/*!
 * vwo-fme-javascript-sdk - v1.34.1
 * URL - https://github.com/wingify/vwo-fme-javascript-sdk
 *
 * Copyright 2024-2025 Wingify Software Pvt. Ltd.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Dependencies used -
 *  1. murmurhash - ^2.0.1
 *  2. superstruct - ^0.14.x
 *  3. uuid - ^9.0.1
 *  4. vwo-fme-sdk-log-messages - ^1.2.9
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.vwoSdk=t():e.vwoSdk=t()}(this,(()=>(()=>{var e={11:function(e,t,n){"use strict";var r,o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),a=0;a<n.length;a++)"default"!==n[a]&&o(t,e,n[a]);return i(t,e),t}),s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},u=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.sendGetCall=function(e){return m(c.HttpMethodEnum.GET,e)},t.sendPostCall=function(e){return m(c.HttpMethodEnum.POST,e)};var c=n(8202),l=n(8667),g=n(4580),d=n(8754),p=n(7128),f=n(9693),h=n(5573),v=null,E=null;function y(){return s(this,void 0,void 0,(function(){var e=this;return u(this,(function(t){return v?[2,v]:(E||(E=s(e,void 0,void 0,(function(){var e,t,r;return u(this,(function(o){switch(o.label){case 0:if("undefined"!=typeof fetch)return g.LogManager.Instance.debug((0,d.buildMessage)(p.DebugLogMessagesEnum.USING_API_WITH_PROCESS,{api:"Global fetch",process:"undefined"})),v=fetch,[2,fetch];o.label=1;case 1:return o.trys.push([1,3,,4]),g.LogManager.Instance.debug((0,d.buildMessage)(p.DebugLogMessagesEnum.USING_API_WITH_PROCESS,{api:"Node-fetch",process:"undefined"})),[4,Promise.resolve("".concat("node-fetch")).then((function(e){return a(n(6306)(e))}))];case 2:return e=o.sent(),t=e.default||e,v=t,[2,t];case 3:return r=o.sent(),g.LogManager.Instance.error((0,d.buildMessage)(p.ErrorLogMessagesEnum.ERROR_INITIALIZING_FETCH,{error:(0,l.getFormattedErrorMessage)(r)})),[3,4];case 4:return[2]}}))}))),[2,E])}))}))}function m(e,t){return s(this,void 0,void 0,(function(){var n,r,o,i,a,s,d,p,v,E,m;return u(this,(function(u){switch(u.label){case 0:n=new h.ResponseModel,r=t.getOptions(),o="".concat(r.scheme,"://").concat(r.hostname).concat(r.path),r.port&&(o="".concat(r.scheme,"://").concat(r.hostname,":").concat(r.port).concat(r.path)),i=0,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,y()];case 2:return a=u.sent(),s=t.getRetryConfig(),d=s.shouldRetry,p=s.maxRetries,e===c.HttpMethodEnum.POST&&(r.body=JSON.stringify(r.body)),v=function(){return new Promise((function(s,u){a(o,r).then((function(r){return r.text().then((function(o){n.setStatusCode(r.status),i>0&&(n.setTotalAttempts(i),n.setError(t.getLastError()));try{e===c.HttpMethodEnum.GET?n.setData(JSON.parse(o)):n.setData(o)}catch(e){n.setError((0,l.getFormattedErrorMessage)(e)),u(n)}200===r.status?s(n):400===r.status?(n.setError((0,l.getFormattedErrorMessage)(r.statusText)),n.setTotalAttempts(i),u(n)):E("".concat(r.statusText,", status: ").concat(r.status),s,u)}))})).catch((function(e){var t=(0,l.getFormattedErrorMessage)(e);e&&e.cause&&(t="".concat(t," ").concat(e.cause)),E(t,s,u)}))}))},E=function(e,a,u){var c=String(r.path||o).split("?")[0];if(d&&i<p){var h=s.initialDelay*Math.pow(s.backoffMultiplier,i)*1e3;i++,g.LogManager.Instance.errorLog("ATTEMPTING_RETRY_FOR_FAILED_NETWORK_CALL",{endPoint:c,err:(0,l.getFormattedErrorMessage)(e),delay:h/1e3,attempt:i,maxRetries:p},{},!1),t.setLastError((0,l.getFormattedErrorMessage)(e)),setTimeout((function(){v().then(a).catch(u)}),h)}else String(r.path).includes(f.EventEnum.VWO_DEBUGGER_EVENT)||g.LogManager.Instance.errorLog("NETWORK_CALL_FAILURE_AFTER_MAX_RETRIES",{extraData:c,attempts:i,err:(0,l.getFormattedErrorMessage)(e)},{},!1),n.setError((0,l.getFormattedErrorMessage)(e)),n.setTotalAttempts(i),u(n)},[2,v()];case 3:throw m=u.sent(),n.setError((0,l.getFormattedErrorMessage)(m)),n.setTotalAttempts(i),n;case 4:return[2]}}))}))}},162:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.createAndSendImpressionForVariationShown=void 0;var i=n(8925),a=n(9693),s=n(4140),u=n(9181),c=n(9181),l=n(5399);t.createAndSendImpressionForVariationShown=function(e,t,n,g,d){return r(void 0,void 0,void 0,(function(){var r,p,f,h,v,E;return o(this,(function(o){switch(o.label){case 0:return r=(0,i.getEventsBaseProperties)(a.EventEnum.VWO_VARIATION_SHOWN,encodeURIComponent(g.getUserAgent()),g.getIpAddress()),p=(0,i.getTrackUserPayloadData)(e,a.EventEnum.VWO_VARIATION_SHOWN,t,n,g),f=(0,u.getCampaignKeyFromCampaignId)(e,t),h=(0,c.getVariationNameFromCampaignIdAndVariationId)(e,t,n),v="",v=d===f?l.Constants.IMPACT_ANALYSIS:null==f?void 0:f.split("".concat(d,"_"))[1],E=(0,u.getCampaignTypeFromCampaignId)(e,t),s.BatchEventsQueue.Instance?(s.BatchEventsQueue.Instance.enqueue(p),[3,3]):[3,1];case 1:return[4,(0,i.sendPostApiRequest)(r,p,g.getId(),{},{campaignKey:v,variationName:h,featureKey:d,campaignType:E})];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))}},324:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RuleModel=void 0;var n=function(){function e(){}return e.prototype.modelFromDictionary=function(e){return this.type=e.type,this.status=e.status,this.variationId=e.variationId,this.campaignId=e.campaignId,this.ruleKey=e.ruleKey,this},e.prototype.getCampaignId=function(){return this.campaignId},e.prototype.getVariationId=function(){return this.variationId},e.prototype.getStatus=function(){return this.status},e.prototype.getType=function(){return this.type},e.prototype.getRuleKey=function(){return this.ruleKey},e}();t.RuleModel=n},362:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSettingsAndAddCampaignsToRules=function(e,t){t.settings=new r.SettingsModel(e),t.originalSettings=e;var n=t.settings.getCampaigns();n.forEach((function(e,t){(0,o.setVariationAllocation)(e),n[t]=e})),(0,i.addLinkedCampaignsToSettings)(t.settings),(0,a.addIsGatewayServiceRequiredFlag)(t.settings)};var r=n(6130),o=n(9181),i=n(8667),a=n(2898)},415:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestHandler=void 0;var n=function(){function e(){}return e.prototype.createRequest=function(e,t){if(!(null!==t.getBaseUrl()&&void 0!==t.getBaseUrl()||null!==e.getUrl()&&void 0!==e.getUrl()))return null;e.setUrl(e.getUrl()||t.getBaseUrl()),e.setTimeout(e.getTimeout()||t.getTimeout()),e.setBody(e.getBody()||t.getBody()),e.setHeaders(e.getHeaders()||t.getHeaders());var n=e.getQuery()||{},r=t.getQuery()||{};for(var o in r)Object.prototype.hasOwnProperty.call(n,o)||(n[o]=r[o]);return e.setQuery(n),e},e}();t.RequestHandler=n},470:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsService=void 0;var a=n(9401),s=n(4580),u=n(6710),c=n(4782),l=n(5399),g=n(2346),d=n(8202),p=n(7128),f=n(9846),h=n(8754),v=n(8925),E=n(8205),y=n(8667),m=n(4237),I=function(){function e(t){var n,r,o,i,a,u;if(this.isGatewayServiceProvided=!1,this.settingsFetchTime=void 0,this.isSettingsValid=!1,this.proxyProvided=!1,this.gatewayServiceConfig={hostname:null,protocol:null,port:null},this.sdkKey=t.sdkKey,this.accountId=t.accountId,this.expiry=(null===(n=null==t?void 0:t.settings)||void 0===n?void 0:n.expiry)||l.Constants.SETTINGS_EXPIRY,this.networkTimeout=(null===(r=null==t?void 0:t.settings)||void 0===r?void 0:r.timeout)||l.Constants.SETTINGS_TIMEOUT,"undefined"!=typeof XMLHttpRequest&&(this.isGatewayServiceProvided=!0,null==t?void 0:t.proxyUrl)){this.proxyProvided=!0;var c=void 0;c=t.proxyUrl.startsWith(g.HTTP_PROTOCOL)||t.proxyUrl.startsWith(g.HTTPS_PROTOCOL)?new URL("".concat(t.proxyUrl)):new URL("".concat(g.HTTPS_PROTOCOL).concat(t.proxyUrl)),this.hostname=c.hostname,this.protocol=c.protocol.replace(":",""),c.port&&(this.port=parseInt(c.port))}(null===(o=null==t?void 0:t.gatewayService)||void 0===o?void 0:o.url)?(c=void 0,this.isGatewayServiceProvided=!0,c=t.gatewayService.url.startsWith(g.HTTP_PROTOCOL)||t.gatewayService.url.startsWith(g.HTTPS_PROTOCOL)?new URL("".concat(t.gatewayService.url)):(null===(i=t.gatewayService)||void 0===i?void 0:i.protocol)?new URL("".concat(t.gatewayService.protocol,"://").concat(t.gatewayService.url)):new URL("".concat(g.HTTPS_PROTOCOL).concat(t.gatewayService.url)),this.proxyProvided?(this.gatewayServiceConfig.hostname=c.hostname,this.gatewayServiceConfig.protocol=c.protocol.replace(":",""),c.port?this.gatewayServiceConfig.port=parseInt(c.port):(null===(u=t.gatewayService)||void 0===u?void 0:u.port)&&(this.gatewayServiceConfig.port=t.gatewayService.port)):(this.hostname=c.hostname,this.protocol=c.protocol.replace(":",""),c.port?this.port=parseInt(c.port):(null===(a=t.gatewayService)||void 0===a?void 0:a.port)&&(this.port=t.gatewayService.port))):this.proxyProvided||(this.hostname=l.Constants.HOST_NAME),s.LogManager.Instance.debug((0,h.buildMessage)(p.DebugLogMessagesEnum.SERVICE_INITIALIZED,{service:"Settings Manager"})),e.instance=this}return Object.defineProperty(e,"Instance",{get:function(){return e.instance},enumerable:!1,configurable:!0}),e.prototype.setSettingsExpiry=function(){var e=this,t=setTimeout((function(){e.fetchSettingsAndCacheInStorage().then((function(){clearTimeout(t),e.setSettingsExpiry()}))}),this.expiry)},e.prototype.normalizeSettings=function(e){return o(this,void 0,void 0,(function(){var t;return i(this,(function(n){return(t=r({},e)).features&&0!==Object.keys(t.features).length||(t.features=[]),t.campaigns&&0!==Object.keys(t.campaigns).length||(t.campaigns=[]),[2,t]}))}))},e.prototype.handleBrowserEnvironment=function(e,t){return o(this,void 0,void 0,(function(){var n,r,o,a;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,8,,9]),[4,e.getSettingsFromStorage(this.sdkKey,this.accountId)];case 1:return(n=i.sent())?(s.LogManager.Instance.info((0,h.buildMessage)(p.InfoLogMessagesEnum.SETTINGS_FETCH_FROM_CACHE)),t.resolve(n),[3,7]):[3,2];case 2:return s.LogManager.Instance.info((0,h.buildMessage)(p.InfoLogMessagesEnum.SETTINGS_CACHE_MISS)),[4,this.fetchSettings()];case 3:return r=i.sent(),[4,this.normalizeSettings(r)];case 4:return o=i.sent(),this.isSettingsValid=(new f.SettingsSchema).isSettingsValid(o),this.isSettingsValid?[4,e.setSettingsInStorage(o)]:[3,6];case 5:i.sent(),i.label=6;case 6:s.LogManager.Instance.info((0,h.buildMessage)(p.InfoLogMessagesEnum.SETTINGS_FETCH_SUCCESS)),t.resolve(o),i.label=7;case 7:return[3,9];case 8:return a=i.sent(),s.LogManager.Instance.errorLog("ERROR_FETCHING_SETTINGS",{err:(0,y.getFormattedErrorMessage)(a)},{an:l.Constants.BROWSER_STORAGE},!1),t.resolve(null),[3,9];case 9:return[2]}}))}))},e.prototype.handleServerEnvironment=function(e){return o(this,void 0,void 0,(function(){var t,n,r;return i(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,this.fetchSettings()];case 1:return t=o.sent(),[4,this.normalizeSettings(t)];case 2:return n=o.sent(),e.resolve(n),[3,4];case 3:return r=o.sent(),s.LogManager.Instance.errorLog("ERROR_FETCHING_SETTINGS",{err:(0,y.getFormattedErrorMessage)(r)},{an:m.ApiEnum.INIT},!1),e.resolve(null),[3,4];case 4:return[2]}}))}))},e.prototype.fetchSettingsAndCacheInStorage=function(){var e=new c.Deferred,t=a.Storage.Instance.getConnector();return"undefined"!=typeof XMLHttpRequest?this.handleBrowserEnvironment(t,e):this.handleServerEnvironment(e),e.promise},e.prototype.fetchSettings=function(e,t){var n=this;void 0===e&&(e=!1),void 0===t&&(t=m.ApiEnum.INIT);var r=new c.Deferred;this.sdkKey&&this.accountId||r.reject(new Error("sdkKey is required for fetching account settings. Aborting!"));var o=u.NetworkManager.Instance,i=(0,v.getSettingsPath)(this.sdkKey,this.accountId),a=o.getRetryConfig();i.platform=l.Constants.PLATFORM,i.sn=l.Constants.SDK_NAME,i.sv=l.Constants.SDK_VERSION,i["api-version"]=l.Constants.API_VERSION,o.getConfig().getDevelopmentMode()||(i.s="prod");var g=l.Constants.SETTINGS_ENDPOINT;e&&(g=l.Constants.WEBHOOK_SETTINGS_ENDPOINT);try{var p=Date.now(),f=new u.RequestModel(this.hostname,d.HttpMethodEnum.GET,g,i,null,null,this.protocol,this.port,a);return f.setTimeout(this.networkTimeout),o.get(f).then((function(o){if(n.settingsFetchTime=Date.now()-p,o.getTotalAttempts()>0){var i=(0,v.createNetWorkAndRetryDebugEvent)(o,"",e?m.ApiEnum.UPDATE_SETTINGS:t,g);(0,E.sendDebugEventToVWO)(i)}r.resolve(o.getData())})).catch((function(n){var o=(0,v.createNetWorkAndRetryDebugEvent)(n,"",e?m.ApiEnum.UPDATE_SETTINGS:t,g);(0,E.sendDebugEventToVWO)(o),r.reject(n)})),r.promise}catch(n){return s.LogManager.Instance.errorLog("ERROR_FETCHING_SETTINGS",{err:(0,y.getFormattedErrorMessage)(n)},{an:e?m.ApiEnum.UPDATE_SETTINGS:t},!1),r.reject(n),r.promise}},e.prototype.getSettings=function(e){var t=this;void 0===e&&(e=!1);var n=new c.Deferred;return e?this.fetchSettingsAndCacheInStorage().then((function(e){n.resolve(e)})):this.fetchSettingsAndCacheInStorage().then((function(e){var r=(new f.SettingsSchema).isSettingsValid(e);t.isSettingsValid=r,t.isSettingsValid?(s.LogManager.Instance.info(p.InfoLogMessagesEnum.SETTINGS_FETCH_SUCCESS),n.resolve(e)):(s.LogManager.Instance.errorLog("INVALID_SETTINGS_SCHEMA",{},{an:m.ApiEnum.INIT},!1),n.resolve({}))})),n.promise},e}();t.SettingsService=I},502:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VariableModel=void 0;var n=function(){function e(e,t,n,r){this.value=r,this.type=t,this.key=n,this.id=e}return e.modelFromDictionary=function(t){var n,r,o;return new e(null!==(n=t.i)&&void 0!==n?n:t.id,t.type,null!==(r=t.k)&&void 0!==r?r:t.key,null!==(o=t.val)&&void 0!==o?o:t.value)},e.prototype.setValue=function(e){this.value=e},e.prototype.setKey=function(e){this.key=e},e.prototype.setType=function(e){this.type=e},e.prototype.getId=function(){return this.id},e.prototype.getValue=function(){return this.value},e.prototype.getType=function(){return this.type},e.prototype.getKey=function(){return this.key},e}();t.VariableModel=n},805:e=>{"use strict";e.exports=JSON.parse('{"API_CALLED":"API - {apiName} called","SERVICE_INITIALIZED":"VWO {service} initialized while creating an instance of SDK","EXPERIMENTS_EVALUATION_WHEN_ROLLOUT_PASSED":"Rollout rule got passed for user {userId}. Hence, evaluating experiments","EXPERIMENTS_EVALUATION_WHEN_NO_ROLLOUT_PRESENT":"No Rollout rules present for the feature. Hence, checking experiment rules","USER_BUCKET_TO_VARIATION":"User ID:{userId} for experiment:{campaignKey} having percent traffic:{percentTraffic} got bucket-value:{bucketValue} and hash-value:{hashValue}","IMPRESSION_FOR_TRACK_USER":"Impression built for vwo_variationShown(VWO standard event for tracking user) event haivng Account ID:{accountId}, User ID:{userId}, and experiment ID:{campaignId}","IMPRESSION_FOR_TRACK_GOAL":"Impression built for event:{eventName} event having Account ID:{accountId}, and user ID:{userId}","IMPRESSION_FOR_SYNC_VISITOR_PROP":"Impression built for {eventName}(VWO internal event) event for Account ID:{accountId}, and user ID:{userId}","CONFIG_BATCH_EVENT_LIMIT_EXCEEDED":"Impression event - {endPoint} failed due to exceeding payload size. Parameter eventsPerRequest in batchEvents config in launch API has value:{eventsPerRequest} for account ID:{accountId}. Please read the official documentation for knowing the size limits","EVENT_BATCH_BEFORE_FLUSHING":"Flushing event queue {manually} having {length} events for Account ID:{accountId}. {timer}","EVENT_BATCH_FLUSH":"Manually flushing batch events for Account ID:{accountId} having {queueLength} events","BATCH_QUEUE_EMPTY":"Batch queue is empty. Nothing to flush.","USING_POLL_INTERVAL_FROM_SETTINGS":"key: pollInterval not found or invalid. Using pollInterval from {source} {pollInterval}.","USING_API_WITH_PROCESS":"API: {api} is being used with process: {process}"}')},973:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.CampaignDecisionService=void 0;var i=n(6775),a=n(4580),s=n(4986),u=n(5399),c=n(4273),l=n(7128),g=n(1359),d=n(8754),p=function(){function e(){}return e.prototype.isUserPartOfCampaign=function(e,t){if(!t||!e)return!1;var n=t.getType()===c.CampaignTypeEnum.ROLLOUT||t.getType()===c.CampaignTypeEnum.PERSONALIZE,r=n?t.getVariations()[0].getSalt():t.getSalt(),o=n?t.getVariations()[0].getWeight():t.getTraffic(),s=r?"".concat(r,"_").concat(e):"".concat(t.getId(),"_").concat(e),u=(new i.DecisionMaker).getBucketValueForUser(s),g=0!==u&&u<=o;return a.LogManager.Instance.info((0,d.buildMessage)(l.InfoLogMessagesEnum.USER_PART_OF_CAMPAIGN,{userId:e,notPart:g?"":"not",campaignKey:t.getType()===c.CampaignTypeEnum.AB?t.getKey():t.getName()+"_"+t.getRuleKey()})),g},e.prototype.getVariation=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(t>=r.getStartRangeVariation()&&t<=r.getEndRangeVariation())return r}return null},e.prototype.checkInRange=function(e,t){if(t>=e.getStartRangeVariation()&&t<=e.getEndRangeVariation())return e},e.prototype.bucketUserToVariation=function(e,t,n){var r;if(!n||!e)return null;n.getTraffic()&&(r=1);var o=n.getTraffic(),s=n.getSalt(),c=s?"".concat(s,"_").concat(t,"_").concat(e):"".concat(n.getId(),"_").concat(t,"_").concat(e),g=(new i.DecisionMaker).generateHashValue(c),p=(new i.DecisionMaker).generateBucketValue(g,u.Constants.MAX_TRAFFIC_VALUE,r);return a.LogManager.Instance.debug((0,d.buildMessage)(l.DebugLogMessagesEnum.USER_BUCKET_TO_VARIATION,{userId:e,campaignKey:n.getKey(),percentTraffic:o,bucketValue:p,hashValue:g})),this.getVariation(n.getVariations(),p)},e.prototype.getPreSegmentationDecision=function(e,t){return r(this,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:return n=e.getType(),r={},n===c.CampaignTypeEnum.ROLLOUT||n===c.CampaignTypeEnum.PERSONALIZE?r=e.getVariations()[0].getSegments():n===c.CampaignTypeEnum.AB&&(r=e.getSegments()),!(0,g.isObject)(r)||Object.keys(r).length?[3,1]:(a.LogManager.Instance.info((0,d.buildMessage)(l.InfoLogMessagesEnum.SEGMENTATION_SKIP,{userId:t.getId(),campaignKey:e.getType()===c.CampaignTypeEnum.AB?e.getKey():e.getName()+"_"+e.getRuleKey()})),[2,!0]);case 1:return[4,s.SegmentationManager.Instance.validateSegmentation(r,t.getCustomVariables())];case 2:return o.sent()?(a.LogManager.Instance.info((0,d.buildMessage)(l.InfoLogMessagesEnum.SEGMENTATION_STATUS,{userId:t.getId(),campaignKey:e.getType()===c.CampaignTypeEnum.AB?e.getKey():e.getName()+"_"+e.getRuleKey(),status:"passed"})),[2,!0]):(a.LogManager.Instance.info((0,d.buildMessage)(l.InfoLogMessagesEnum.SEGMENTATION_STATUS,{userId:t.getId(),campaignKey:e.getType()===c.CampaignTypeEnum.AB?e.getKey():e.getName()+"_"+e.getRuleKey(),status:"failed"})),[2,!1])}}))}))},e.prototype.getVariationAlloted=function(e,t,n){var r=this.isUserPartOfCampaign(e,n);return n.getType()===c.CampaignTypeEnum.ROLLOUT||n.getType()===c.CampaignTypeEnum.PERSONALIZE?r?n.getVariations()[0]:null:r?this.bucketUserToVariation(e,t,n):null},e}();t.CampaignDecisionService=p},977:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.TrackApi=void 0;var i=n(4237),a=n(4580),s=n(8667),u=n(4140),c=n(8925),l=function(){function e(){}return e.prototype.track=function(e,t,n,u,l){return r(this,void 0,void 0,(function(){var r,d;return o(this,(function(o){switch(o.label){case 0:return(0,s.doesEventBelongToAnyFeature)(t,e)?(0,c.getShouldWaitForTrackingCalls)()?[4,g(e,t,n,u)]:[3,2]:[3,4];case 1:return o.sent(),[3,3];case 2:g(e,t,n,u),o.label=3;case 3:return l.set({eventName:t,api:i.ApiEnum.TRACK_EVENT}),l.execute(l.get()),[2,(r={},r[t]=!0,r)];case 4:return a.LogManager.Instance.errorLog("EVENT_NOT_FOUND",{eventName:t},{an:i.ApiEnum.TRACK_EVENT,uuid:n.getUuid(),sId:n.getSessionId()}),[2,(d={},d[t]=!1,d)]}}))}))},e}();t.TrackApi=l;var g=function(e,t,n,i){return r(void 0,void 0,void 0,(function(){var r,a;return o(this,(function(o){switch(o.label){case 0:return r=(0,c.getEventsBaseProperties)(t,encodeURIComponent(n.getUserAgent()),n.getIpAddress()),a=(0,c.getTrackGoalPayloadData)(e,n.getId(),t,i,null==n?void 0:n.getUserAgent(),null==n?void 0:n.getIpAddress(),n.getSessionId()),u.BatchEventsQueue.Instance?(u.BatchEventsQueue.Instance.enqueue(a),[3,3]):[3,1];case 1:return[4,(0,c.sendPostApiRequest)(r,a,n.getId(),i)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))}},1114:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.sendSdkInitEvent=function(e,t){return r(this,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:return n=(0,i.getEventsBaseProperties)(a.EventEnum.VWO_INIT_CALLED),r=(0,i.getSDKInitEventPayload)(a.EventEnum.VWO_INIT_CALLED,e,t),s.BatchEventsQueue.Instance?(s.BatchEventsQueue.Instance.enqueue(r),[3,3]):[3,1];case 1:return[4,(0,i.sendEvent)(n,r,a.EventEnum.VWO_INIT_CALLED).catch((function(){}))];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},t.sendSDKUsageStatsEvent=function(e){return r(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return t=(0,i.getEventsBaseProperties)(a.EventEnum.VWO_USAGE_STATS,null,null,!0,e),n=(0,i.getSDKUsageStatsEventPayload)(a.EventEnum.VWO_USAGE_STATS,e),s.BatchEventsQueue.Instance?(s.BatchEventsQueue.Instance.enqueue(n),[3,3]):[3,1];case 1:return[4,(0,i.sendEvent)(t,n,a.EventEnum.VWO_USAGE_STATS).catch((function(){}))];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))};var i=n(8925),a=n(9693),s=n(4140)},1172:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.StorageEnum=void 0,function(e){e[e.STORAGE_UNDEFINED=0]="STORAGE_UNDEFINED",e[e.INCORRECT_DATA=1]="INCORRECT_DATA",e[e.NO_DATA_FOUND=2]="NO_DATA_FOUND",e[e.CAMPAIGN_PAUSED=3]="CAMPAIGN_PAUSED",e[e.VARIATION_NOT_FOUND=4]="VARIATION_NOT_FOUND",e[e.WHITELISTED_VARIATION=5]="WHITELISTED_VARIATION"}(n||(t.StorageEnum=n={}))},1198:e=>{"use strict";e.exports=JSON.parse('{"INIT_OPTIONS_ERROR":"[ERROR]: VWO-SDK {date} Options should be of type object","INIT_OPTIONS_SDK_KEY_ERROR":"[ERROR]: VWO-SDK {date} Please provide the sdkKey in the options and should be a of type string","INIT_OPTIONS_ACCOUNT_ID_ERROR":"[ERROR]: VWO-SDK {date} Please provide VWO account ID in the options and should be a of type string|number","INIT_OPTIONS_INVALID":"Invalid key:{key} passed in options. Should be of type:{correctType} and greater than equal to 1000","SETTINGS_FETCH_ERROR":"Settings could not be fetched. Error:{err}","SETTINGS_SCHEMA_INVALID":"Settings are not valid. Failed schema validation","POLLING_FETCH_SETTINGS_FAILED":"Error while fetching VWO settings with polling","API_THROW_ERROR":"API - {apiName} failed to execute. Trace:{err}","API_INVALID_PARAM":"Key:{key} passed to API:{apiName} is not of valid type. Got type:{type}, should be:{correctType}","API_SETTING_INVALID":"Settings are not valid. Contact VWO Support","API_CONTEXT_INVALID":"Context should be an object and must contain a mandatory key - id, which is User ID","FEATURE_NOT_FOUND":"Feature not found for the key:{featureKey}","EVENT_NOT_FOUND":"Event:{eventName} not found in any of the features\' metrics","STORED_DATA_ERROR":"Error in getting data from storage. Error:{err}","STORING_DATA_ERROR":"Key:{featureKey} is not valid. Not able to store data into storage","GATEWAY_URL_ERROR":"Please provide a valid URL for VWO Gateway Service while initializing the SDK","NETWORK_CALL_FAILED":"Error occurred while sending {method} request. Error:{err}","SETTINGS_FETCH_FAILED":"Failed to fetch settings and hence VWO client instance couldn\'t be updated when API: {apiName} got called having isViaWebhook param as {isViaWebhook}. Error: {err}","NETWORK_CALL_RETRY_ATTEMPT":"Request failed for {endPoint}, Error: {err}. Retrying in {delay} seconds, attempt {attempt} of {maxRetries}","NETWORK_CALL_RETRY_FAILED":"Max retries reached. Request failed for {endPoint}, Error: {err}","CONFIG_PARAMETER_INVALID":"{parameter} paased in {api} API is not correct. It should be of type:{type}}","BATCH_QUEUE_EMPTY":"No batch queue present for account:{accountId} when calling flushEvents API. Check batchEvents config in launch API","RETRY_CONFIG_INVALID":"Retry config is invalid. Please check the VWO developer documentation. Current retry config: {retryConfig}","SDK_INIT_EVENT_FAILED":"Error occurred while sending SDK init event. Error:{err}","INVALID_NETWORK_RESPONSE_DATA":"Received invalid or empty response data from the network request","ALIAS_NOT_ENABLED":"Aliasing is not enabled. Set isAliasingEnabled in init to enable aliasing"}')},1263:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkServerLessClient=void 0;var r=n(11),o=n(4782),i=function(){function e(){}return e.prototype.GET=function(e){var t=new o.Deferred;return(0,r.sendGetCall)(e).then((function(e){t.resolve(e)})).catch((function(e){t.reject(e)})),t.promise},e.prototype.POST=function(e){var t=new o.Deferred;return(0,r.sendPostCall)(e).then((function(e){t.resolve(e)})).catch((function(e){t.reject(e)})),t.promise},e}();t.NetworkServerLessClient=i},1274:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserStorageConnector=void 0;var a=n(5399),s=n(4782),u=n(4580),c=n(470),l=n(9846),g=n(1359),d=n(8667),p=function(){function e(e){this.SETTINGS_KEY=a.Constants.DEFAULT_SETTINGS_STORAGE_KEY,this.storageKey=(null==e?void 0:e.key)||a.Constants.DEFAULT_LOCAL_STORAGE_KEY,this.storage=(null==e?void 0:e.provider)||window.localStorage,this.isDisabled=(null==e?void 0:e.isDisabled)||!1,this.alwaysUseCachedSettings=(null==e?void 0:e.alwaysUseCachedSettings)||!1,!(0,g.isNumber)(null==e?void 0:e.ttl)||e.ttl<a.Constants.MIN_TTL_MS?(u.LogManager.Instance.debug("TTL is not passed or invalid (less than 1 minute), using default value of 2 hours"),this.ttl=a.Constants.SETTINGS_TTL):this.ttl=(null==e?void 0:e.ttl)||a.Constants.SETTINGS_TTL,(0,g.isBoolean)(null==e?void 0:e.alwaysUseCachedSettings)?this.alwaysUseCachedSettings=(null==e?void 0:e.alwaysUseCachedSettings)||!1:(u.LogManager.Instance.debug("AlwaysUseCachedSettings is not passed or invalid, using default value of false"),this.alwaysUseCachedSettings=!1)}return e.prototype.getStoredData=function(){if(this.isDisabled)return{};try{var e=this.storage.getItem(this.storageKey);return e?JSON.parse(e):{}}catch(e){return u.LogManager.Instance.errorLog("ERROR_READING_DATA_FROM_BROWSER_STORAGE",{err:(0,d.getFormattedErrorMessage)(e)},{an:a.Constants.BROWSER_STORAGE}),{}}},e.prototype.storeData=function(e){if(!this.isDisabled)try{var t=JSON.stringify(e);this.storage.setItem(this.storageKey,t)}catch(e){u.LogManager.Instance.errorLog("ERROR_STORING_DATA_IN_BROWSER_STORAGE",{err:(0,d.getFormattedErrorMessage)(e)},{an:a.Constants.BROWSER_STORAGE})}},e.prototype.set=function(e){var t=new s.Deferred;if(this.isDisabled)t.resolve();else try{var n=this.getStoredData(),r="".concat(e.featureKey,"_").concat(e.userId);n[r]=e,this.storeData(n),u.LogManager.Instance.info("Stored data in storage for key: ".concat(r)),t.resolve()}catch(e){u.LogManager.Instance.errorLog("ERROR_STORING_DATA_IN_BROWSER_STORAGE",{err:(0,d.getFormattedErrorMessage)(e)},{an:a.Constants.BROWSER_STORAGE}),t.reject(e)}return t.promise},e.prototype.get=function(e,t){var n,r=new s.Deferred;if(this.isDisabled)r.resolve({});else try{var o=this.getStoredData(),i="".concat(e,"_").concat(t),c=null!==(n=o[i])&&void 0!==n?n:{};u.LogManager.Instance.info("Retrieved data from storage for key: ".concat(i)),r.resolve(c)}catch(e){u.LogManager.Instance.errorLog("ERROR_READING_DATA_FROM_BROWSER_STORAGE",{err:(0,d.getFormattedErrorMessage)(e)},{an:a.Constants.BROWSER_STORAGE}),r.resolve({})}return r.promise},e.prototype.getSettingsFromStorage=function(e,t){var n,r=new s.Deferred;if(this.isDisabled)r.resolve(null);else try{var o=this.getStoredData()[this.SETTINGS_KEY];if(!o)return r.resolve(null),r.promise;var i=o.data,c=o.timestamp,l=Date.now();if(i&&i.sdkKey)try{i.sdkKey=atob(i.sdkKey)}catch(e){u.LogManager.Instance.errorLog("ERROR_DECODING_SDK_KEY_FROM_STORAGE",{err:(0,d.getFormattedErrorMessage)(e)},{an:a.Constants.BROWSER_STORAGE})}if(!i||i.sdkKey!==e||String(null!==(n=i.accountId)&&void 0!==n?n:i.a)!==String(t))return u.LogManager.Instance.info("Cached settings do not match sdkKey/accountId, treating as cache miss"),r.resolve(null),r.promise;if(this.alwaysUseCachedSettings)return u.LogManager.Instance.info("Using cached settings as alwaysUseCachedSettings is enabled"),r.resolve(i),r.promise;if(l-c>this.ttl)u.LogManager.Instance.info("Settings have expired, need to fetch new settings"),r.resolve(null);else{if(u.LogManager.Instance.info("Retrieved valid settings from storage"),this.setFreshSettingsInStorage(),i&&i.sdkKey)try{i.sdkKey=atob(i.sdkKey)}catch(e){u.LogManager.Instance.errorLog("ERROR_DECODING_SDK_KEY_FROM_STORAGE",{err:(0,d.getFormattedErrorMessage)(e)},{an:a.Constants.BROWSER_STORAGE})}r.resolve(i)}}catch(e){u.LogManager.Instance.errorLog("ERROR_READING_DATA_FROM_BROWSER_STORAGE",{err:(0,d.getFormattedErrorMessage)(e)},{an:a.Constants.BROWSER_STORAGE}),r.resolve(null)}return r.promise},e.prototype.setFreshSettingsInStorage=function(){var e=this,t=c.SettingsService.Instance;t&&t.fetchSettings().then((function(t){return o(e,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return t&&(new l.SettingsSchema).isSettingsValid(t)?[4,this.setSettingsInStorage(t)]:[3,2];case 1:e.sent(),u.LogManager.Instance.info("Settings updated with fresh data from server"),e.label=2;case 2:return[2]}}))}))})).catch((function(e){u.LogManager.Instance.errorLog("ERROR_FETCHING_SETTINGS",{err:(0,d.getFormattedErrorMessage)(e)},{an:a.Constants.BROWSER_STORAGE},!1)}))},e.prototype.setSettingsInStorage=function(e){var t=new s.Deferred;if(this.isDisabled)t.resolve();else try{var n=this.getStoredData(),o=r({},e);o.sdkKey&&(o.sdkKey=btoa(o.sdkKey)),n[this.SETTINGS_KEY]={data:o,timestamp:Date.now()},this.storeData(n),u.LogManager.Instance.info("Settings stored successfully in storage"),t.resolve()}catch(e){u.LogManager.Instance.errorLog("ERROR_STORING_DATA_IN_BROWSER_STORAGE",{err:"Storing settings: "+(0,d.getFormattedErrorMessage)(e)},{an:a.Constants.BROWSER_STORAGE}),t.reject(e)}return t.promise},e}();t.BrowserStorageConnector=p},1359:(e,t)=>{"use strict";function n(e){return"[object Object]"===Object.prototype.toString.call(e)}function r(e){return"[object Array]"===Object.prototype.toString.call(e)}function o(e){return"[object Null]"===Object.prototype.toString.call(e)}function i(e){return"[object Undefined]"===Object.prototype.toString.call(e)}function a(e){return"[object Number]"===Object.prototype.toString.call(e)}function s(e){return"[object String]"===Object.prototype.toString.call(e)}function u(e){return"[object Boolean]"===Object.prototype.toString.call(e)}function c(e){return"[object Function]"===Object.prototype.toString.call(e)}function l(e){return"[object Promise]"===Object.prototype.toString.call(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=n,t.isArray=r,t.isNull=o,t.isUndefined=i,t.isNumber=a,t.isString=s,t.isBoolean=u,t.isFunction=c,t.isPromise=l,t.getType=function(e){return n(e)?"Object":r(e)?"Array":o(e)?"Null":i(e)?"Undefined":a(e)?"Number":s(e)?"String":u(e)?"Boolean":c(e)?"Function":l(e)?"Promise":"Unknown Type"}},1522:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VWOClient=void 0;var a=n(4580),s=n(6612),u=n(8164),c=n(977),l=n(7128),g=n(4140),d=n(9846),p=n(9752),f=i(n(7675)),h=n(8694),v=n(1359),E=n(8754),y=n(4782),m=n(362),I=n(2365),_=n(8925),S=n(470),T=n(4237),b=n(7487),A=n(5389),O=n(1359),R=n(8667),L=function(){function e(e,t){return this.options=t,(0,m.setSettingsAndAddCampaignsToRules)(e,this),h.UrlUtil.init({collectionPrefix:this.settings.getCollectionPrefix()}),(0,_.setShouldWaitForTrackingCalls)(this.options.shouldWaitForTrackingCalls||!1),a.LogManager.Instance.info(l.InfoLogMessagesEnum.CLIENT_INITIALIZED),this.vwoClientInstance=this,this.isAliasingEnabled=t.isAliasingEnabled||!1,this}return e.prototype.getFlag=function(e,t){return r(this,void 0,void 0,(function(){var n,r,i,u,c,g,h;return o(this,(function(o){switch(o.label){case 0:n=T.ApiEnum.GET_FLAG,r=new y.Deferred,i=new s.Flag(!1,new I.VariationModel),o.label=1;case 1:if(o.trys.push([1,3,,4]),u=new f.default(this.options),a.LogManager.Instance.debug((0,E.buildMessage)(l.DebugLogMessagesEnum.API_CALLED,{apiName:n})),!(0,v.isString)(e))throw a.LogManager.Instance.errorLog("INVALID_PARAM",{apiName:n,key:"featureKey",type:(0,v.getType)(e),correctType:"string"},{an:T.ApiEnum.GET_FLAG},!1),new TypeError("TypeError: featureKey should be a string, got "+(0,v.getType)(e));if(!(new d.SettingsSchema).isSettingsValid(this.originalSettings))throw a.LogManager.Instance.errorLog("INVALID_SETTINGS_SCHEMA",{},{an:T.ApiEnum.GET_FLAG},!1),new Error("TypeError: Invalid Settings");if(!t||!t.id)throw a.LogManager.Instance.errorLog("INVALID_CONTEXT_PASSED",{},{an:T.ApiEnum.GET_FLAG},!1),new TypeError("TypeError: Invalid context");return[4,(0,A.getUserId)(t.id,this.isAliasingEnabled)];case 2:return c=o.sent(),t.id=c,g=(new p.ContextModel).modelFromDictionary(t),s.FlagApi.get(e,this.settings,g,u).then((function(e){r.resolve(e)})).catch((function(){r.resolve(i)})),[3,4];case 3:return h=o.sent(),a.LogManager.Instance.errorLog("EXECUTION_FAILED",{apiName:n,err:(0,R.getFormattedErrorMessage)(h)},{an:T.ApiEnum.GET_FLAG}),r.resolve(i),[3,4];case 4:return[2,r.promise]}}))}))},e.prototype.trackEvent=function(e,t){return r(this,arguments,void 0,(function(e,t,n){var r,i,s,u,g,h,m;return void 0===n&&(n={}),o(this,(function(o){switch(o.label){case 0:r=T.ApiEnum.TRACK_EVENT,i=new y.Deferred,o.label=1;case 1:if(o.trys.push([1,3,,4]),s=new f.default(this.options),a.LogManager.Instance.debug((0,E.buildMessage)(l.DebugLogMessagesEnum.API_CALLED,{apiName:r})),!(0,v.isString)(e))throw a.LogManager.Instance.errorLog("INVALID_PARAM",{apiName:r,key:"eventName",type:(0,v.getType)(e),correctType:"string"},{an:T.ApiEnum.TRACK_EVENT},!1),new TypeError("TypeError: Event-name should be a string, got "+(0,v.getType)(e));if(!(0,v.isObject)(n))throw a.LogManager.Instance.errorLog("INVALID_PARAM",{apiName:r,key:"eventProperties",type:(0,v.getType)(n),correctType:"object"},{an:T.ApiEnum.TRACK_EVENT},!1),new TypeError("TypeError: eventProperties should be an object, got "+(0,v.getType)(n));if(!(new d.SettingsSchema).isSettingsValid(this.originalSettings))throw a.LogManager.Instance.errorLog("INVALID_SETTINGS_SCHEMA",{},{an:T.ApiEnum.TRACK_EVENT},!1),new Error("TypeError: Invalid Settings");if(!t||!t.id)throw a.LogManager.Instance.errorLog("INVALID_CONTEXT_PASSED",{},{an:T.ApiEnum.TRACK_EVENT},!1),new TypeError("TypeError: Invalid context");return[4,(0,A.getUserId)(t.id,this.isAliasingEnabled)];case 2:return u=o.sent(),t.id=u,g=(new p.ContextModel).modelFromDictionary(t),(new c.TrackApi).track(this.settings,e,g,n,s).then((function(e){i.resolve(e)})).catch((function(){var t;i.resolve(((t={})[e]=!1,t))})),[3,4];case 3:return h=o.sent(),a.LogManager.Instance.errorLog("EXECUTION_FAILED",{apiName:r,err:(0,R.getFormattedErrorMessage)(h)},{an:T.ApiEnum.TRACK_EVENT}),i.resolve(((m={})[e]=!1,m)),[3,4];case 4:return[2,i.promise]}}))}))},e.prototype.setAttribute=function(e,t,n){return r(this,void 0,void 0,(function(){var r,i,s,c,g,d,f,h,y;return o(this,(function(o){switch(o.label){case 0:r=T.ApiEnum.SET_ATTRIBUTE,o.label=1;case 1:if(o.trys.push([1,8,,9]),!(0,v.isObject)(e))return[3,4];if(a.LogManager.Instance.debug((0,E.buildMessage)(l.DebugLogMessagesEnum.API_CALLED,{apiName:r})),Object.entries(e).length<1)throw new TypeError("TypeError: Attributes should be an object containing at least 1 key-value pair");if(i=e,!(0,v.isObject)(i))throw new TypeError("TypeError: attributes should be an object containing key-value pairs");if(Object.entries(i).forEach((function(e){var t=e[0],n=e[1];if("boolean"!=typeof n&&"string"!=typeof n&&"number"!=typeof n)throw new TypeError('Invalid attribute type for key "'.concat(t,'". Expected boolean, string or number, but got ').concat((0,v.getType)(n)));if(Array.isArray(n)||"object"==typeof n&&null!==n)throw new TypeError('Invalid attribute value for key "'.concat(t,'". Arrays and objects are not supported.'))})),!n&&t&&(n=t),!n||!n.id)throw a.LogManager.Instance.errorLog("INVALID_CONTEXT_PASSED",{},{an:T.ApiEnum.SET_ATTRIBUTE},!1),new TypeError("TypeError: Invalid context");return[4,(0,A.getUserId)(n.id,this.isAliasingEnabled)];case 2:return g=o.sent(),n.id=g,d=(new p.ContextModel).modelFromDictionary(n),[4,(new u.SetAttributeApi).setAttribute(this.settings,i,d)];case 3:return o.sent(),[3,7];case 4:if(s=e,c=t,!(0,v.isString)(s))throw new TypeError("attributeKey should be a string");if(!(0,v.isBoolean)(c)&&!(0,v.isString)(c)&&!(0,v.isNumber)(c))throw new TypeError("attributeValue should be a boolean, string, or number");if(!n||!n.id)throw new TypeError("Invalid context");return[4,(0,A.getUserId)(n.id,this.isAliasingEnabled)];case 5:return g=o.sent(),n.id=g,d=(new p.ContextModel).modelFromDictionary(n),(y={})[s]=c,f=y,[4,(new u.SetAttributeApi).setAttribute(this.settings,f,d)];case 6:o.sent(),o.label=7;case 7:return[3,9];case 8:return h=o.sent(),a.LogManager.Instance.errorLog("EXECUTION_FAILED",{apiName:r,err:(0,R.getFormattedErrorMessage)(h)},{an:T.ApiEnum.SET_ATTRIBUTE}),[3,9];case 9:return[2]}}))}))},e.prototype.updateSettings=function(e){return r(this,arguments,void 0,(function(e,t){var n,r,i,s;return void 0===t&&(t=!0),o(this,(function(o){switch(o.label){case 0:n=T.ApiEnum.UPDATE_SETTINGS,o.label=1;case 1:return o.trys.push([1,5,,6]),a.LogManager.Instance.debug((0,E.buildMessage)(l.DebugLogMessagesEnum.API_CALLED,{apiName:n})),e&&0!==Object.keys(e).length?[3,3]:[4,S.SettingsService.Instance.fetchSettings(t,n)];case 2:return i=o.sent(),[3,4];case 3:i=e,o.label=4;case 4:if(r=i,!(new d.SettingsSchema).isSettingsValid(r))throw new Error("TypeError: Invalid Settings schema");return(0,m.setSettingsAndAddCampaignsToRules)(r,this.vwoClientInstance),a.LogManager.Instance.info((0,E.buildMessage)(l.InfoLogMessagesEnum.SETTINGS_UPDATED,{apiName:n,isViaWebhook:t})),[3,6];case 5:return s=o.sent(),a.LogManager.Instance.errorLog("UPDATING_CLIENT_INSTANCE_FAILED_WHEN_WEBHOOK_TRIGGERED",{apiName:n,isViaWebhook:t,err:(0,R.getFormattedErrorMessage)(s)},{an:T.ApiEnum.UPDATE_SETTINGS}),[3,6];case 6:return[2]}}))}))},e.prototype.flushEvents=function(){var e=T.ApiEnum.FLUSH_EVENTS,t=new y.Deferred;try{if(a.LogManager.Instance.debug((0,E.buildMessage)(l.DebugLogMessagesEnum.API_CALLED,{apiName:e})),g.BatchEventsQueue.Instance)return g.BatchEventsQueue.Instance.flushAndClearTimer();a.LogManager.Instance.errorLog("BATCHING_NOT_ENABLED",{},{an:T.ApiEnum.FLUSH_EVENTS}),t.resolve({status:"error",events:[]})}catch(n){a.LogManager.Instance.errorLog("EXECUTION_FAILED",{apiName:e,err:(0,R.getFormattedErrorMessage)(n)},{an:T.ApiEnum.FLUSH_EVENTS}),t.resolve({status:"error",events:[]})}return t.promise},e.prototype.setAlias=function(e,t){return r(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(o){switch(o.label){case 0:n=T.ApiEnum.SET_ALIAS,o.label=1;case 1:if(o.trys.push([1,3,,4]),a.LogManager.Instance.debug((0,E.buildMessage)(l.DebugLogMessagesEnum.API_CALLED,{apiName:n})),!this.isAliasingEnabled)return a.LogManager.Instance.errorLog("ALIAS_CALLED_BUT_NOT_PASSED",{},{an:T.ApiEnum.SET_ALIAS}),[2,!1];if(!S.SettingsService.Instance.isGatewayServiceProvided)return a.LogManager.Instance.errorLog("INVALID_GATEWAY_URL",{},{an:T.ApiEnum.SET_ALIAS}),[2,!1];if(!t)throw new TypeError("TypeError: Invalid aliasId");if((0,O.isArray)(t))throw new TypeError("TypeError: aliasId cannot be an array");if(t=t.trim(),r=void 0,"string"==typeof e){if((e=e.trim())===t)throw new TypeError("UserId and aliasId cannot be the same.");if(!e)throw new TypeError("TypeError: Invalid userId");if((0,O.isArray)(e))throw new TypeError("TypeError: userId cannot be an array");r=e}else{if(!e||!e.id)throw new TypeError("TypeError: Invalid context");if((0,O.isArray)(e.id))throw new TypeError("TypeError: context.id cannot be an array");if(e.id=e.id.trim(),e.id===t)throw new TypeError("UserId and aliasId cannot be the same.");r=e.id}return[4,b.AliasingUtil.setAlias(r,t)];case 2:return o.sent(),[2,!0];case 3:return i=o.sent(),a.LogManager.Instance.errorLog("EXECUTION_FAILED",{apiName:n,err:(0,R.getFormattedErrorMessage)(i)},{an:T.ApiEnum.SET_ALIAS}),[2,!1];case 4:return[2]}}))}))},e}();t.VWOClient=L},1703:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkBrowserClient=void 0;var r=n(3890),o=n(4782),i=function(){function e(){}return e.prototype.GET=function(e){var t=new o.Deferred;return(0,r.sendGetCall)({requestModel:e,successCallback:function(e){t.resolve(e)},errorCallback:function(e){t.reject(e)}}),t.promise},e.prototype.POST=function(e){var t=new o.Deferred;return(0,r.sendPostCall)({requestModel:e,successCallback:function(e){t.resolve(e)},errorCallback:function(e){t.reject(e)}}),t.promise},e}();t.NetworkBrowserClient=i},1720:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomUUID=function(e){var t=(0,i.v5)(e,i.v5.DNS);return(0,i.v5)((0,o.v4)(),t)},t.getUUID=function(e,t){var n=(0,i.v5)(r.SEED_URL,i.v5.URL);e=String(e);var o=a(t=String(t),n),s=a(e,o);return null==s?void 0:s.replace(/-/gi,"").toUpperCase()},t.generateUUID=a;var r=n(2346),o=n(2831),i=n(2831);function a(e,t){if(e&&t)return(0,i.v5)(e,t)}},1880:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextVWOModel=void 0;var n=function(){function e(){}return e.prototype.modelFromDictionary=function(e){return(null==e?void 0:e.location)&&(this.location=e.location),(null==e?void 0:e.userAgent)&&(this.userAgent=e.userAgent),this},e.prototype.getLocation=function(){return this.location},e.prototype.getUaInfo=function(){return this.userAgent},e}();t.ContextVWOModel=n},2144:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CampaignModel=void 0;var r=n(9094),o=n(502),i=n(2365),a=function(){function e(){this.variations=[],this.metrics=[],this.variables=[]}return e.prototype.copy=function(e){this.metrics=e.metrics,this.variations=e.variations,this.variables=e.variables,this.processCampaignKeys(e)},e.prototype.modelFromDictionary=function(e){return this.processCampaignProperties(e),this.processCampaignKeys(e),this},e.prototype.processCampaignProperties=function(e){var t=this;e.variables&&(e.variables.constructor==={}.constructor?this.variables=[]:e.variables.forEach((function(e){t.variables.push(o.VariableModel.modelFromDictionary(e))}))),e.variations&&(e.variations.constructor==={}.constructor?this.variations=[]:e.variations.forEach((function(e){t.variations.push((new i.VariationModel).modelFromDictionary(e))}))),e.metrics&&(e.metrics&&e.metrics.constructor==={}.constructor?this.metrics=[]:(e.metrics||[]).forEach((function(e){t.metrics.push((new r.MetricModel).modelFromDictionary(e))})))},e.prototype.processCampaignKeys=function(e){this.id=e.id,this.percentTraffic=e.percentTraffic,this.name=e.name,this.variationId=e.variationId,this.campaignId=e.campaignId,this.ruleKey=e.ruleKey,this.isForcedVariationEnabled=e.isForcedVariationEnabled,this.isUserListEnabled=e.isUserListEnabled,this.segments=e.segments,this.key=e.key,this.type=e.type,this.salt=e.salt},e.prototype.getId=function(){return this.id},e.prototype.getName=function(){return this.name},e.prototype.getSegments=function(){return this.segments},e.prototype.getTraffic=function(){return this.percentTraffic},e.prototype.getType=function(){return this.type},e.prototype.getIsForcedVariationEnabled=function(){return this.isForcedVariationEnabled},e.prototype.getIsUserListEnabled=function(){return this.isUserListEnabled},e.prototype.getKey=function(){return this.key},e.prototype.getMetrics=function(){return this.metrics},e.prototype.getVariations=function(){return this.variations},e.prototype.getVariables=function(){return this.variables},e.prototype.getRuleKey=function(){return this.ruleKey},e.prototype.getSalt=function(){return this.salt},e}();t.CampaignModel=a},2245:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateTrafficAndGetVariation=t.checkWhitelistingAndPreSeg=void 0;var i=n(1359),a=n(4273),s=n(9217),u=n(7128),c=n(6775),l=n(4580),g=n(4986),d=n(973),p=n(1359),f=n(5399),h=n(9181),v=n(8667),E=n(8754),y=n(7928),m=n(1720),I=n(3780);t.checkWhitelistingAndPreSeg=function(e,t,n,i,s,c,g,p){return r(void 0,void 0,void 0,(function(){var r,v,S,T,b,A,O,R;return o(this,(function(o){switch(o.label){case 0:return r=(0,m.getUUID)(i.getId(),e.getAccountId()),v=n.getId(),n.getType()!==a.CampaignTypeEnum.AB?[3,3]:(i.setVariationTargetingVariables(Object.assign({},i.getVariationTargetingVariables(),{_vwoUserId:n.getIsUserListEnabled()?r:i.getId()})),Object.assign(p,{variationTargetingVariables:i.getVariationTargetingVariables()}),n.getIsForcedVariationEnabled()?[4,_(n,i)]:[3,2]);case 1:return(S=o.sent())&&Object.keys(S).length>0?[2,[!0,S]]:[3,3];case 2:l.LogManager.Instance.info((0,E.buildMessage)(u.InfoLogMessagesEnum.WHITELISTING_SKIP,{campaignKey:n.getRuleKey(),userId:i.getId()})),o.label=3;case 3:if(i.setCustomVariables(Object.assign({},i.getCustomVariables(),{_vwoUserId:n.getIsUserListEnabled()?r:i.getId()})),Object.assign(p,{customVariables:i.getCustomVariables()}),T=(0,h.getGroupDetailsIfCampaignPartOfIt)(e,n.getId(),n.getType()===a.CampaignTypeEnum.PERSONALIZE?n.getVariations()[0].getId():null).groupId,!(b=null==c?void 0:c.get(T)))return[3,4];if(n.getType()===a.CampaignTypeEnum.AB){if(b===v)return[2,[!0,null]]}else if(n.getType()===a.CampaignTypeEnum.PERSONALIZE&&b===v+"_"+n.getVariations()[0].getId())return[2,[!0,null]];return[2,[!1,null]];case 4:return T?[4,(new I.StorageDecorator).getFeatureFromStorage("".concat(f.Constants.VWO_META_MEG_KEY).concat(T),i,g)]:[3,6];case 5:if((A=o.sent())&&A.experimentKey&&A.experimentId)return l.LogManager.Instance.info((0,E.buildMessage)(u.InfoLogMessagesEnum.MEG_CAMPAIGN_FOUND_IN_STORAGE,{campaignKey:A.experimentKey,userId:i.getId()})),A.experimentId===v?n.getType()===a.CampaignTypeEnum.PERSONALIZE?A.experimentVariationId===n.getVariations()[0].getId()?[2,[!0,null]]:(c.set(T,A.experimentId+"_"+A.experimentVariationId),[2,[!1,null]]):[2,[!0,null]]:(-1!=A.experimentVariationId?c.set(T,A.experimentId+"_"+A.experimentVariationId):c.set(T,A.experimentId),[2,[!1,null]]);o.label=6;case 6:return[4,(new d.CampaignDecisionService).getPreSegmentationDecision(n,i)];case 7:return(O=o.sent())&&T?[4,(0,y.evaluateGroups)(e,t,T,s,i,g)]:[3,9];case 8:return(R=o.sent())&&R.id===v?R.type===a.CampaignTypeEnum.AB||R.variations[0].id===n.getVariations()[0].getId()?[2,[!0,null]]:(c.set(T,R.id+"_"+R.variations[0].id),[2,[!1,null]]):R?(R.type===a.CampaignTypeEnum.AB?c.set(T,R.id):c.set(T,R.id+"_"+R.variations[0].id),[2,[!1,null]]):(c.set(T,-1),[2,[!1,null]]);case 9:return[2,[O,null]]}}))}))},t.evaluateTrafficAndGetVariation=function(e,t,n){var r=(new d.CampaignDecisionService).getVariationAlloted(n,e.getAccountId(),t);return r?(l.LogManager.Instance.info((0,E.buildMessage)(u.InfoLogMessagesEnum.USER_CAMPAIGN_BUCKET_INFO,{campaignKey:t.getType()===a.CampaignTypeEnum.AB?t.getKey():t.getName()+"_"+t.getRuleKey(),userId:n,status:"got variation:".concat(r.getKey())})),r):(l.LogManager.Instance.info((0,E.buildMessage)(u.InfoLogMessagesEnum.USER_CAMPAIGN_BUCKET_INFO,{campaignKey:t.getType()===a.CampaignTypeEnum.AB?t.getKey():t.getName()+"_"+t.getRuleKey(),userId:n,status:"did not get any variation"})),null)};var _=function(e,t){return r(void 0,void 0,void 0,(function(){var n,r,i;return o(this,(function(o){switch(o.label){case 0:return[4,S(e,t)];case 1:return n=o.sent(),r=n?s.StatusEnum.PASSED:s.StatusEnum.FAILED,i=n?n.variation.key:"",l.LogManager.Instance.info((0,E.buildMessage)(u.InfoLogMessagesEnum.WHITELISTING_STATUS,{userId:t.getId(),campaignKey:e.getType()===a.CampaignTypeEnum.AB?e.getKey():e.getName()+"_"+e.getRuleKey(),status:r,variationString:i})),[2,n]}}))}))},S=function(e,t){return r(void 0,void 0,void 0,(function(){var n,r,s,f,y,m;return o(this,(function(o){switch(o.label){case 0:return n=[],r=[],e.getVariations().forEach((function(o){if(!(0,p.isObject)(o.getSegments())||Object.keys(o.getSegments()).length){if((0,p.isObject)(o.getSegments())){var s=g.SegmentationManager.Instance.validateSegmentation(o.getSegments(),t.getVariationTargetingVariables());(s=(0,i.isPromise)(s)?s:Promise.resolve(s)).then((function(e){e&&n.push((0,v.cloneObject)(o))})),r.push(s)}}else l.LogManager.Instance.info((0,E.buildMessage)(u.InfoLogMessagesEnum.WHITELISTING_SKIP,{campaignKey:e.getType()===a.CampaignTypeEnum.AB?e.getKey():e.getName()+"_"+e.getRuleKey(),userId:t.getId(),variation:o.getKey()?"for variation: ".concat(o.getKey()):""}))})),[4,Promise.all(r)];case 1:if(o.sent(),n.length>1){for((0,h.scaleVariationWeights)(n),f=0,y=0,m=0;f<n.length;f++)m=(0,h.assignRangeValues)(n[f],y),y+=m;s=(new d.CampaignDecisionService).getVariation(n,(new c.DecisionMaker).calculateBucketValue((0,h.getBucketingSeed)(t.getId(),e,null)))}else s=n[0];return s?[2,{variation:s,variationName:s.name,variationId:s.id}]:[2]}}))}))}},2311:(e,t)=>{"use strict";function n(e){return 14+(e+64>>>9<<4)+1}function r(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function o(e,t,n,o,i,a){return r((s=r(r(t,e),r(o,a)))<<(u=i)|s>>>32-u,n);var s,u}function i(e,t,n,r,i,a,s){return o(t&n|~t&r,e,t,i,a,s)}function a(e,t,n,r,i,a,s){return o(t&r|n&~r,e,t,i,a,s)}function s(e,t,n,r,i,a,s){return o(t^n^r,e,t,i,a,s)}function u(e,t,n,r,i,a,s){return o(n^(t|~r),e,t,i,a,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){const t=[],n=32*e.length,r="0123456789abcdef";for(let o=0;o<n;o+=8){const n=e[o>>5]>>>o%32&255,i=parseInt(r.charAt(n>>>4&15)+r.charAt(15&n),16);t.push(i)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;let o=1732584193,c=-271733879,l=-1732584194,g=271733878;for(let t=0;t<e.length;t+=16){const n=o,d=c,p=l,f=g;o=i(o,c,l,g,e[t],7,-680876936),g=i(g,o,c,l,e[t+1],12,-389564586),l=i(l,g,o,c,e[t+2],17,606105819),c=i(c,l,g,o,e[t+3],22,-1044525330),o=i(o,c,l,g,e[t+4],7,-176418897),g=i(g,o,c,l,e[t+5],12,1200080426),l=i(l,g,o,c,e[t+6],17,-1473231341),c=i(c,l,g,o,e[t+7],22,-45705983),o=i(o,c,l,g,e[t+8],7,1770035416),g=i(g,o,c,l,e[t+9],12,-1958414417),l=i(l,g,o,c,e[t+10],17,-42063),c=i(c,l,g,o,e[t+11],22,-1990404162),o=i(o,c,l,g,e[t+12],7,1804603682),g=i(g,o,c,l,e[t+13],12,-40341101),l=i(l,g,o,c,e[t+14],17,-1502002290),c=i(c,l,g,o,e[t+15],22,1236535329),o=a(o,c,l,g,e[t+1],5,-165796510),g=a(g,o,c,l,e[t+6],9,-1069501632),l=a(l,g,o,c,e[t+11],14,643717713),c=a(c,l,g,o,e[t],20,-373897302),o=a(o,c,l,g,e[t+5],5,-701558691),g=a(g,o,c,l,e[t+10],9,38016083),l=a(l,g,o,c,e[t+15],14,-660478335),c=a(c,l,g,o,e[t+4],20,-405537848),o=a(o,c,l,g,e[t+9],5,568446438),g=a(g,o,c,l,e[t+14],9,-1019803690),l=a(l,g,o,c,e[t+3],14,-187363961),c=a(c,l,g,o,e[t+8],20,1163531501),o=a(o,c,l,g,e[t+13],5,-1444681467),g=a(g,o,c,l,e[t+2],9,-51403784),l=a(l,g,o,c,e[t+7],14,1735328473),c=a(c,l,g,o,e[t+12],20,-1926607734),o=s(o,c,l,g,e[t+5],4,-378558),g=s(g,o,c,l,e[t+8],11,-2022574463),l=s(l,g,o,c,e[t+11],16,1839030562),c=s(c,l,g,o,e[t+14],23,-35309556),o=s(o,c,l,g,e[t+1],4,-1530992060),g=s(g,o,c,l,e[t+4],11,1272893353),l=s(l,g,o,c,e[t+7],16,-155497632),c=s(c,l,g,o,e[t+10],23,-1094730640),o=s(o,c,l,g,e[t+13],4,681279174),g=s(g,o,c,l,e[t],11,-358537222),l=s(l,g,o,c,e[t+3],16,-722521979),c=s(c,l,g,o,e[t+6],23,76029189),o=s(o,c,l,g,e[t+9],4,-640364487),g=s(g,o,c,l,e[t+12],11,-421815835),l=s(l,g,o,c,e[t+15],16,530742520),c=s(c,l,g,o,e[t+2],23,-995338651),o=u(o,c,l,g,e[t],6,-198630844),g=u(g,o,c,l,e[t+7],10,1126891415),l=u(l,g,o,c,e[t+14],15,-1416354905),c=u(c,l,g,o,e[t+5],21,-57434055),o=u(o,c,l,g,e[t+12],6,1700485571),g=u(g,o,c,l,e[t+3],10,-1894986606),l=u(l,g,o,c,e[t+10],15,-1051523),c=u(c,l,g,o,e[t+1],21,-2054922799),o=u(o,c,l,g,e[t+8],6,1873313359),g=u(g,o,c,l,e[t+15],10,-30611744),l=u(l,g,o,c,e[t+6],15,-1560198380),c=u(c,l,g,o,e[t+13],21,1309151649),o=u(o,c,l,g,e[t+4],6,-145523070),g=u(g,o,c,l,e[t+11],10,-1120210379),l=u(l,g,o,c,e[t+2],15,718787259),c=u(c,l,g,o,e[t+9],21,-343485551),o=r(o,n),c=r(c,d),l=r(l,p),g=r(g,f)}return[o,c,l,g]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(n(t));for(let n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))}},2346:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HTTPS_PROTOCOL=t.HTTP_PROTOCOL=t.SEED_URL=t.HTTPS=t.HTTP=void 0,t.HTTP="http",t.HTTPS="https",t.SEED_URL="https://vwo.com",t.HTTP_PROTOCOL="".concat(t.HTTP,"://"),t.HTTPS_PROTOCOL="".concat(t.HTTPS)},2365:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VariationModel=void 0;var r=n(502),o=function(){function e(){this.variables=[],this.variations=[]}return e.prototype.modelFromDictionary=function(t){var n=this;return this.id=t.i||t.id,this.key=t.n||t.key||t.name,this.weight=t.w||t.weight,this.ruleKey=t.ruleKey,this.salt=t.salt,this.type=t.type,this.setStartRange(t.startRangeVariation),this.setEndRange(t.endRangeVariation),(t.seg||t.segments)&&(this.segments=t.seg||t.segments),t.variables&&(t.variables.constructor==={}.constructor?this.variables=[]:t.variables.forEach((function(e){n.variables.push(r.VariableModel.modelFromDictionary(e))}))),t.variations&&(t.variations.constructor==={}.constructor?this.variations=[]:t.variations.forEach((function(t){n.variations.push((new e).modelFromDictionary(t))}))),this},e.prototype.setStartRange=function(e){this.startRangeVariation=e},e.prototype.setEndRange=function(e){this.endRangeVariation=e},e.prototype.setWeight=function(e){this.weight=e},e.prototype.getId=function(){return this.id},e.prototype.getKey=function(){return this.key},e.prototype.getRuleKey=function(){return this.ruleKey},e.prototype.getWeight=function(){return this.weight},e.prototype.getSegments=function(){return this.segments},e.prototype.getStartRangeVariation=function(){return this.startRangeVariation},e.prototype.getEndRangeVariation=function(){return this.endRangeVariation},e.prototype.getVariables=function(){return this.variables},e.prototype.getVariations=function(){return this.variations},e.prototype.getType=function(){return this.type},e.prototype.getSalt=function(){return this.salt},e}();t.VariationModel=o},2752:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogMessageBuilder=void 0;var r=n(4940),o="[1m",i="[0m",a=function(){function e(e,t){this.loggerConfig=e,this.transportConfig=t,this.prefix=this.transportConfig.prefix||this.loggerConfig.prefix||"",this.dateTimeFormat=this.transportConfig.dateTimeFormat||this.loggerConfig.dateTimeFormat}return e.prototype.formatMessage=function(e,t){return"[".concat(this.getFormattedLevel(e),"]: ").concat(this.getFormattedPrefix(this.prefix)," ").concat(this.getFormattedDateTime()," ").concat(t)},e.prototype.getFormattedPrefix=function(e){return this.loggerConfig.isAnsiColorEnabled?"".concat(o).concat("[32m").concat(e).concat(i):"".concat(e)},e.prototype.getFormattedLevel=function(e){var t,n,a,s=e.toUpperCase();return this.loggerConfig.isAnsiColorEnabled?((t={})[r.LogLevelEnum.TRACE]="".concat(o).concat("[30m").concat(s).concat(i),t[r.LogLevelEnum.DEBUG]="".concat(o).concat("[94m").concat(s).concat(i),t[r.LogLevelEnum.INFO]="".concat(o).concat("[36m").concat(s).concat(i),t[r.LogLevelEnum.WARN]="".concat(o).concat("[33m").concat(s).concat(i),t[r.LogLevelEnum.ERROR]="".concat(o).concat("[31m").concat(s).concat(i),a=t):((n={})[r.LogLevelEnum.TRACE]=s,n[r.LogLevelEnum.DEBUG]=s,n[r.LogLevelEnum.INFO]=s,n[r.LogLevelEnum.WARN]=s,n[r.LogLevelEnum.ERROR]=s,a=n),a[e]},e.prototype.getFormattedDateTime=function(){return this.dateTimeFormat()},e}();t.LogMessageBuilder=a},2780:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=void 0;var n=function(){function e(){}return e.prototype.attachConnector=function(e){var t,n,r,o;return"class"===(null===(o=null===(r=null===(n=null===(t=null==e?void 0:e.prototype)||void 0===t?void 0:t.constructor)||void 0===n?void 0:n.toString())||void 0===r?void 0:r.trim())||void 0===o?void 0:o.substring(0,5))?this.connector=new e:this.connector=e,this.connector},Object.defineProperty(e,"Instance",{get:function(){return this.instance=this.instance||new e,this.instance},enumerable:!1,configurable:!0}),e.prototype.getConnector=function(){return this.connector},e}();t.Storage=n},2831:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return u.default}});var r=d(n(3518)),o=d(n(4948)),i=d(n(5073)),a=d(n(7186)),s=d(n(4808)),u=d(n(7775)),c=d(n(7037)),l=d(n(9910)),g=d(n(6792));function d(e){return e&&e.__esModule?e:{default:e}}},2858:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)};const r=new Uint8Array(16)},2887:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.RequestModel=void 0;var o=n(8202),i=n(2346),a=n(5399),s=n(1359),u=n(8667),c=function(){function e(e,t,n,r,s,u,c,l,g){void 0===t&&(t=o.HttpMethodEnum.GET),void 0===c&&(c=i.HTTPS),this.whiteListedKeys=["eventName","uuid","campaignId","eventProperties"],this.url=e,this.method=t,this.path=n,this.query=r,this.body=s,this.headers=u,this.scheme=c,this.port=l,this.retryConfig=g||a.Constants.DEFAULT_RETRY_CONFIG}return e.prototype.getMethod=function(){return this.method},e.prototype.setMethod=function(e){this.method=e},e.prototype.getBody=function(){return this.body},e.prototype.setBody=function(e){this.body=e},e.prototype.setQuery=function(e){this.query=e},e.prototype.getQuery=function(){return this.query},e.prototype.setHeaders=function(e){return this.headers=e,this},e.prototype.getHeaders=function(){return this.headers},e.prototype.setTimeout=function(e){return this.timeout=e,this},e.prototype.getTimeout=function(){return this.timeout},e.prototype.getUrl=function(){return this.url},e.prototype.setUrl=function(e){return this.url=e,this},e.prototype.getScheme=function(){return this.scheme},e.prototype.setScheme=function(e){return this.scheme=e,this},e.prototype.getPort=function(){return this.port},e.prototype.setPort=function(e){return this.port=e,this},e.prototype.getPath=function(){return this.path},e.prototype.setPath=function(e){return this.path=e,this},e.prototype.getRetryConfig=function(){return r({},this.retryConfig)},e.prototype.setRetryConfig=function(e){return this.retryConfig=e,this},e.prototype.setEventName=function(e){return this.eventName=e,this},e.prototype.getEventName=function(){return this.eventName},e.prototype.setUuid=function(e){return this.uuid=e,this},e.prototype.getUuid=function(){return this.uuid},e.prototype.setCampaignId=function(e){return this.campaignId=e,this},e.prototype.getCampaignId=function(){return this.campaignId},e.prototype.setEventProperties=function(e){return this.eventProperties=e,this},e.prototype.getEventProperties=function(){return this.eventProperties},e.prototype.getLastError=function(){return this.lastError},e.prototype.setLastError=function(e){return this.lastError=(0,u.getFormattedErrorMessage)(e),this},e.prototype.getOptions=function(){var e="";for(var t in this.query)e+="".concat(t,"=").concat(this.query[t],"&");var n=this.url.split("/"),r=n[0],o=n[1],i={hostname:r,agent:!1};if(this.scheme&&(i.scheme=this.scheme),this.port&&(i.port=this.port),this.headers&&(i.headers=this.headers),this.method&&(i.method=this.method),this.body){var a=JSON.stringify(this.body);i.headers=i.headers||{},i.headers["Content-Type"]="application/json","undefined"==typeof Buffer?i.headers["Content-Length"]=(new TextEncoder).encode(a).length:i.headers["Content-Length"]=Buffer.byteLength(a),i.body=this.body}return this.path&&(i.path=""!==e?this.path+"?"+e||"":this.path),o&&(i.path="/".concat(o)+i.path),this.timeout&&(i.timeout=this.timeout),"&"===i.path.charAt(i.path.length-1)&&(i.path=i.path.substring(0,i.path.length-1)),i.retryConfig=this.retryConfig,i},e.prototype.getExtraInfo=function(){var e=this;return Object.fromEntries(Object.entries(this).filter((function(t){var n=t[0],r=t[1];return!(0,s.isNull)(r)&&!(0,s.isUndefined)(r)&&e.whiteListedKeys.includes(n)})))},e}();t.RequestModel=c},2898:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getFromGatewayService=function(e,t,n){return r(this,void 0,void 0,(function(){var r,a,d,p,f,h,v;return o(this,(function(o){if(r=new g.Deferred,a=c.NetworkManager.Instance,d=a.getRetryConfig(),!l.SettingsService.Instance.isGatewayServiceProvided)return u.LogManager.Instance.errorLog("INVALID_GATEWAY_URL",{},{an:i.ApiEnum.GET_FLAG,uuid:n.getUuid(),sId:n.getSessionId()}),r.resolve(!1),[2,r.promise];e.accountId=l.SettingsService.Instance.accountId,p=null,f=null,h=null,null!=l.SettingsService.Instance.gatewayServiceConfig.hostname?(p=l.SettingsService.Instance.gatewayServiceConfig.hostname,f=l.SettingsService.Instance.gatewayServiceConfig.port,h=l.SettingsService.Instance.gatewayServiceConfig.protocol):(p=l.SettingsService.Instance.hostname,f=l.SettingsService.Instance.port,h=l.SettingsService.Instance.protocol);try{return v=new c.RequestModel(p,s.HttpMethodEnum.GET,t,e,null,null,h,f,d),a.get(v).then((function(e){r.resolve(e.getData())})).catch((function(e){r.reject(e)})),[2,r.promise]}catch(e){return r.resolve(!1),[2,r.promise]}return[2]}))}))},t.getQueryParams=function(e){for(var t={},n=0,r=Object.entries(e);n<r.length;n++){var o=r[n],i=o[0],a=o[1],s=encodeURIComponent(String(a));t[i]=s}return t},t.addIsGatewayServiceRequiredFlag=function(e){for(var t=/\b(country|region|city|os|device_type|browser_string|ua|browser_version|os_version)\b/g,n=/"custom_variable"\s*:\s*{[^}]*inlist\([^)]*\)/g,r=0,o=e.getFeatures();r<o.length;r++)for(var i=o[r],s=0,u=i.getRulesLinkedCampaign();s<u.length;s++){var c,l=u[s];if(c=l.getType()===a.CampaignTypeEnum.PERSONALIZE||l.getType()===a.CampaignTypeEnum.ROLLOUT?l.getVariations()[0].getSegments():l.getSegments()){var g=JSON.stringify(c),d=g.match(t),p=g.match(n);if(d&&d.length>0||p&&p.length>0){i.setIsGatewayServiceRequired(!0);break}}}};var i=n(4237),a=n(4273),s=n(8202),u=n(4580),c=n(6710),l=n(470),g=n(4782)},3095:(e,t,n)=>{e.exports={debugMessages:n(805),infoMessages:n(7778),warnMessages:n(8854),errorMessages:n(1198),errorMessagesV2:n(6301),traceMessages:n(6611)}},3185:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends TypeError{constructor(e,t){let n;const{message:r,...o}=e,{path:i}=e;super(0===i.length?r:"At path: "+i.join(".")+" -- "+r),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>{var r;return null!=(r=n)?r:n=[e,...t()]}}}function r(e){return"object"==typeof e&&null!=e}function o(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function i(e){return"string"==typeof e?JSON.stringify(e):""+e}function a(e,t,n,r){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:o,branch:a}=t,{type:s}=n,{refinement:u,message:c="Expected a value of type `"+s+"`"+(u?" with refinement `"+u+"`":"")+", but received: `"+i(r)+"`"}=e;return{value:r,type:s,refinement:u,key:o[o.length-1],path:o,branch:a,...e,message:c}}function*s(e,t,n,o){var i;r(i=e)&&"function"==typeof i[Symbol.iterator]||(e=[e]);for(const r of e){const e=a(r,t,n,o);e&&(yield e)}}function*u(e,t,n={}){const{path:o=[],branch:i=[e],coerce:a=!1,mask:s=!1}=n,c={path:o,branch:i};if(a&&(e=t.coercer(e,c),s&&"type"!==t.type&&r(t.schema)&&r(e)&&!Array.isArray(e)))for(const n in e)void 0===t.schema[n]&&delete e[n];let l=!0;for(const n of t.validator(e,c))l=!1,yield[n,void 0];for(let[n,g,d]of t.entries(e,c)){const t=u(g,d,{path:void 0===n?o:[...o,n],branch:void 0===n?i:[...i,g],coerce:a,mask:s});for(const o of t)o[0]?(l=!1,yield[o[0],void 0]):a&&(g=o[1],void 0===n?e=g:e instanceof Map?e.set(n,g):e instanceof Set?e.add(g):r(e)&&(e[n]=g))}if(l)for(const n of t.refiner(e,c))l=!1,yield[n,void 0];l&&(yield[void 0,e])}class c{constructor(e){const{type:t,schema:n,validator:r,refiner:o,coercer:i=e=>e,entries:a=function*(){}}=e;this.type=t,this.schema=n,this.entries=a,this.coercer=i,this.validator=r?(e,t)=>s(r(e,t),t,this,e):()=>[],this.refiner=o?(e,t)=>s(o(e,t),t,this,e):()=>[]}assert(e){return l(e,this)}create(e){return g(e,this)}is(e){return p(e,this)}mask(e){return d(e,this)}validate(e,t={}){return f(e,this,t)}}function l(e,t){const n=f(e,t);if(n[0])throw n[0]}function g(e,t){const n=f(e,t,{coerce:!0});if(n[0])throw n[0];return n[1]}function d(e,t){const n=f(e,t,{coerce:!0,mask:!0});if(n[0])throw n[0];return n[1]}function p(e,t){return!f(e,t)[0]}function f(e,t,r={}){const o=u(e,t,r),i=function(e){const{done:t,value:n}=e.next();return t?void 0:n}(o);return i[0]?[new n(i[0],(function*(){for(const e of o)e[0]&&(yield e[0])})),void 0]:[void 0,i[1]]}function h(e,t){return new c({type:e,schema:null,validator:t})}function v(){return h("never",(()=>!1))}function E(e){const t=e?Object.keys(e):[],n=v();return new c({type:"object",schema:e||null,*entries(o){if(e&&r(o)){const r=new Set(Object.keys(o));for(const n of t)r.delete(n),yield[n,o[n],e[n]];for(const e of r)yield[e,o[e],n]}},validator:e=>r(e)||"Expected an object, but received: "+i(e),coercer:e=>r(e)?{...e}:e})}function y(e){return new c({...e,validator:(t,n)=>void 0===t||e.validator(t,n),refiner:(t,n)=>void 0===t||e.refiner(t,n)})}function m(){return h("string",(e=>"string"==typeof e||"Expected a string, but received: "+i(e)))}function I(){return h("unknown",(()=>!0))}function _(e,t,n){return new c({...e,coercer:(r,o)=>p(r,t)?e.coercer(n(r,o),o):e.coercer(r,o)})}function S(e,t,n){return new c({...e,*refiner(r,o){yield*e.refiner(r,o);const i=s(n(r,o),o,e,r);for(const e of i)yield{...e,refinement:t}}})}t.Struct=c,t.StructError=n,t.any=function(){return h("any",(()=>!0))},t.array=function(e){return new c({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[n,r]of t.entries())yield[n,r,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||"Expected an array value, but received: "+i(e)})},t.assert=l,t.assign=function(...e){const t=e.map((e=>e.schema));return E(Object.assign({},...t))},t.boolean=function(){return h("boolean",(e=>"boolean"==typeof e))},t.coerce=_,t.create=g,t.date=function(){return h("date",(e=>e instanceof Date&&!isNaN(e.getTime())||"Expected a valid `Date` object, but received: "+i(e)))},t.defaulted=function(e,t,n={}){return _(e,I(),(e=>{const r="function"==typeof t?t():t;if(void 0===e)return r;if(!n.strict&&o(e)&&o(r)){const t={...e};let n=!1;for(const e in r)void 0===t[e]&&(t[e]=r[e],n=!0);if(n)return t}return e}))},t.define=h,t.deprecated=function(e,t){return new c({...e,refiner:(t,n)=>void 0===t||e.refiner(t,n),validator:(n,r)=>void 0===n||(t(n,r),e.validator(n,r))})},t.dynamic=function(e){return new c({type:"dynamic",schema:null,*entries(t,n){const r=e(t,n);yield*r.entries(t,n)},validator:(t,n)=>e(t,n).validator(t,n),coercer:(t,n)=>e(t,n).coercer(t,n)})},t.empty=function(e){const t="Expected an empty "+e.type;return S(e,"empty",(e=>{if(e instanceof Map||e instanceof Set){const{size:n}=e;return 0===n||t+" but received one with a size of `"+n+"`"}{const{length:n}=e;return 0===n||t+" but received one with a length of `"+n+"`"}}))},t.enums=function(e){const t={},n=e.map((e=>i(e))).join();for(const n of e)t[n]=n;return new c({type:"enums",schema:t,validator:t=>e.includes(t)||"Expected one of `"+n+"`, but received: "+i(t)})},t.func=function(){return h("func",(e=>"function"==typeof e||"Expected a function, but received: "+i(e)))},t.instance=function(e){return h("instance",(t=>t instanceof e||"Expected a `"+e.name+"` instance, but received: "+i(t)))},t.integer=function(){return h("integer",(e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||"Expected an integer, but received: "+i(e)))},t.intersection=function(e){return new c({type:"intersection",schema:null,*entries(t,n){for(const r of e)yield*r.entries(t,n)},*validator(t,n){for(const r of e)yield*r.validator(t,n)},*refiner(t,n){for(const r of e)yield*r.refiner(t,n)}})},t.is=p,t.lazy=function(e){let t;return new c({type:"lazy",schema:null,*entries(n,r){null!=t||(t=e()),yield*t.entries(n,r)},validator:(n,r)=>(null!=t||(t=e()),t.validator(n,r)),coercer:(n,r)=>(null!=t||(t=e()),t.coercer(n,r))})},t.literal=function(e){const t=i(e),n=typeof e;return new c({type:"literal",schema:"string"===n||"number"===n||"boolean"===n?e:null,validator:n=>n===e||"Expected the literal `"+t+"`, but received: "+i(n)})},t.map=function(e,t){return new c({type:"map",schema:null,*entries(n){if(e&&t&&n instanceof Map)for(const[r,o]of n.entries())yield[r,r,e],yield[r,o,t]},coercer:e=>e instanceof Map?new Map(e):e,validator:e=>e instanceof Map||"Expected a `Map` object, but received: "+i(e)})},t.mask=d,t.max=function(e,t,n={}){const{exclusive:r}=n;return S(e,"max",(n=>r?n<t:n<=t||"Expected a "+e.type+" greater than "+(r?"":"or equal to ")+t+" but received `"+n+"`"))},t.min=function(e,t,n={}){const{exclusive:r}=n;return S(e,"min",(n=>r?n>t:n>=t||"Expected a "+e.type+" greater than "+(r?"":"or equal to ")+t+" but received `"+n+"`"))},t.never=v,t.nullable=function(e){return new c({...e,validator:(t,n)=>null===t||e.validator(t,n),refiner:(t,n)=>null===t||e.refiner(t,n)})},t.number=function(){return h("number",(e=>"number"==typeof e&&!isNaN(e)||"Expected a number, but received: "+i(e)))},t.object=E,t.omit=function(e,t){const{schema:n}=e,r={...n};for(const e of t)delete r[e];return E(r)},t.optional=y,t.partial=function(e){const t=e instanceof c?{...e.schema}:{...e};for(const e in t)t[e]=y(t[e]);return E(t)},t.pattern=function(e,t){return S(e,"pattern",(n=>t.test(n)||"Expected a "+e.type+" matching `/"+t.source+'/` but received "'+n+'"'))},t.pick=function(e,t){const{schema:n}=e,r={};for(const e of t)r[e]=n[e];return E(r)},t.record=function(e,t){return new c({type:"record",schema:null,*entries(n){if(r(n))for(const r in n){const o=n[r];yield[r,r,e],yield[r,o,t]}},validator:e=>r(e)||"Expected an object, but received: "+i(e)})},t.refine=S,t.regexp=function(){return h("regexp",(e=>e instanceof RegExp))},t.set=function(e){return new c({type:"set",schema:null,*entries(t){if(e&&t instanceof Set)for(const n of t)yield[n,n,e]},coercer:e=>e instanceof Set?new Set(e):e,validator:e=>e instanceof Set||"Expected a `Set` object, but received: "+i(e)})},t.size=function(e,t,n=t){const r="Expected a "+e.type,o=t===n?"of `"+t+"`":"between `"+t+"` and `"+n+"`";return S(e,"size",(e=>{if("number"==typeof e||e instanceof Date)return t<=e&&e<=n||r+" "+o+" but received `"+e+"`";if(e instanceof Map||e instanceof Set){const{size:i}=e;return t<=i&&i<=n||r+" with a size "+o+" but received one with a size of `"+i+"`"}{const{length:i}=e;return t<=i&&i<=n||r+" with a length "+o+" but received one with a length of `"+i+"`"}}))},t.string=m,t.struct=function(e,t){return console.warn("superstruct@0.11 - The `struct` helper has been renamed to `define`."),h(e,t)},t.trimmed=function(e){return _(e,m(),(e=>e.trim()))},t.tuple=function(e){const t=v();return new c({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(e.length,n.length);for(let o=0;o<r;o++)yield[o,n[o],e[o]||t]}},validator:e=>Array.isArray(e)||"Expected an array, but received: "+i(e)})},t.type=function(e){const t=Object.keys(e);return new c({type:"type",schema:e,*entries(n){if(r(n))for(const r of t)yield[r,n[r],e[r]]},validator:e=>r(e)||"Expected an object, but received: "+i(e)})},t.union=function(e){const t=e.map((e=>e.type)).join(" | ");return new c({type:"union",schema:null,validator(n,r){const o=[];for(const t of e){const[...e]=u(n,t,r),[i]=e;if(!i[0])return[];for(const[t]of e)t&&o.push(t)}return["Expected the value to satisfy a union of `"+t+"`, but received: "+i(n),...o]}})},t.unknown=I,t.validate=f},3236:e=>{e.exports={version:"1.34.1"}},3293:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.LogManager=void 0;var a=n(2831),s=n(5374),u=n(4820),c=n(1359),l=n(4940),g=n(8754),d=n(3368),p=n(8205),f=n(7128),h=n(8667),v=function(e){function t(n){var r=e.call(this)||this;return r.name="VWO Logger",r.requestId=(0,a.v4)(),r.level=l.LogLevelEnum.ERROR,r.prefix="VWO-SDK",r.shouldLogToStandardOutput=!1,r.config=n,!n.isAlwaysNewInstance&&t.instance||(t.instance=r,r.config.name=n.name||r.name,r.config.requestId=n.requestId||r.requestId,r.config.level=n.level||r.level,r.config.prefix=n.prefix||r.prefix,r.config.dateTimeFormat=n.dateTimeFormat||r.dateTimeFormat,r.config.shouldLogToStandardOutput=n.shouldLogToStandardOutput||r.shouldLogToStandardOutput,r.transportManager=new u.LogTransportManager(r.config),r.handleTransports()),t.instance}return o(t,e),t.prototype.dateTimeFormat=function(){return(new Date).toISOString()},Object.defineProperty(t,"Instance",{get:function(){return t.instance},enumerable:!1,configurable:!0}),t.prototype.handleTransports=function(){var e=this.config.transports;(null==e?void 0:e.length)?this.addTransports(this.config.transports):this.config.transport&&(0,c.isObject)(this.config.transport)&&this.addTransport(this.config.transport)},t.prototype.addTransport=function(e){this.transportManager.addTransport(e)},t.prototype.addTransports=function(e){for(var t=0;t<e.length;t++)this.addTransport(e[t])},t.prototype.trace=function(e){this.transportManager.log(l.LogLevelEnum.TRACE,e)},t.prototype.debug=function(e){this.transportManager.log(l.LogLevelEnum.DEBUG,e)},t.prototype.info=function(e){this.transportManager.log(l.LogLevelEnum.INFO,e)},t.prototype.warn=function(e){this.transportManager.log(l.LogLevelEnum.WARN,e)},t.prototype.error=function(e){this.transportManager.log(l.LogLevelEnum.ERROR,e)},t.prototype.errorLog=function(e,t,n,r){void 0===t&&(t={}),void 0===n&&(n={}),void 0===r&&(r=!0);try{var o=(0,g.buildMessage)(f.ErrorLogMessagesEnum[e],t);if(this.error(o),r){var a=i(i(i({},n),t),{msg_t:e,msg:o,lt:l.LogLevelEnum.ERROR.toString(),cg:d.DebuggerCategoryEnum.ERROR});(0,p.sendDebugEventToVWO)(a)}}catch(e){console.error("Got error while logging error"+(0,h.getFormattedErrorMessage)(e))}},t}(s.Logger);t.LogManager=v},3368:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DebuggerCategoryEnum=void 0,function(e){e.NETWORK="network",e.DECISION="decision",e.INITIALIZATION="initialization",e.RETRY="retry",e.ERROR="error"}(n||(t.DebuggerCategoryEnum=n={}))},3518:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(2858))&&r.__esModule?r:{default:r},i=n(9910);let a,s,u=0,c=0;t.default=function(e,t,n){let r=t&&n||0;const l=t||new Array(16);let g=(e=e||{}).node||a,d=void 0!==e.clockseq?e.clockseq:s;if(null==g||null==d){const t=e.random||(e.rng||o.default)();null==g&&(g=a=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==d&&(d=s=16383&(t[6]<<8|t[7]))}let p=void 0!==e.msecs?e.msecs:Date.now(),f=void 0!==e.nsecs?e.nsecs:c+1;const h=p-u+(f-c)/1e4;if(h<0&&void 0===e.clockseq&&(d=d+1&16383),(h<0||p>u)&&void 0===e.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=p,c=f,s=d,p+=122192928e5;const v=(1e4*(268435455&p)+f)%4294967296;l[r++]=v>>>24&255,l[r++]=v>>>16&255,l[r++]=v>>>8&255,l[r++]=255&v;const E=p/4294967296*1e4&268435455;l[r++]=E>>>8&255,l[r++]=255&E,l[r++]=E>>>24&15|16,l[r++]=E>>>16&255,l[r++]=d>>>8|128,l[r++]=255&d;for(let e=0;e<6;++e)l[r+e]=g[e];return t||(0,i.unsafeStringify)(l)}},3769:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getKeyValue=function(e){if((0,r.isObject)(e)){var t=Object.keys(e)[0];return{key:t,value:e[t]}}},t.matchWithRegex=function(e,t){try{return e.match(new RegExp(t))}catch(e){return null}};var r=n(1359)},3780:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.StorageDecorator=void 0;var i=n(4580),a=n(1172),s=n(4782),u=n(4237),c=function(){function e(){}return e.prototype.getFeatureFromStorage=function(e,t,n){return r(this,void 0,void 0,(function(){var r;return o(this,(function(o){return r=new s.Deferred,n.getDataInStorage(e,t).then((function(e){switch(e){case a.StorageEnum.STORAGE_UNDEFINED:case a.StorageEnum.NO_DATA_FOUND:r.resolve(null);break;case a.StorageEnum.INCORRECT_DATA:r.resolve(a.StorageEnum.INCORRECT_DATA);break;case a.StorageEnum.CAMPAIGN_PAUSED:r.resolve(null);break;case a.StorageEnum.VARIATION_NOT_FOUND:r.resolve(a.StorageEnum.VARIATION_NOT_FOUND);break;case a.StorageEnum.WHITELISTED_VARIATION:r.resolve(null);break;default:r.resolve(e)}})),[2,r.promise]}))}))},e.prototype.setDataInStorage=function(e,t){var n=new s.Deferred,r=e.featureKey,o=e.context,a=e.rolloutId,c=e.rolloutKey,l=e.rolloutVariationId,g=e.experimentId,d=e.experimentKey,p=e.experimentVariationId;return r?o.id?!c||d||l?d&&!p?(i.LogManager.Instance.errorLog("ERROR_STORING_DATA_IN_STORAGE",{key:"Variation:(experimentKey or rolloutVariationId)"},{an:u.ApiEnum.GET_FLAG,uuid:o._vwo_uuid,sId:o._vwo_sessionId}),void n.reject()):(t.setDataInStorage({featureKey:r,userId:o.id,rolloutId:a,rolloutKey:c,rolloutVariationId:l,experimentId:g,experimentKey:d,experimentVariationId:p}),n.resolve(),n.promise):(i.LogManager.Instance.errorLog("ERROR_STORING_DATA_IN_STORAGE",{key:"Variation:(rolloutKey, experimentKey or rolloutVariationId)"},{an:u.ApiEnum.GET_FLAG,uuid:o._vwo_uuid,sId:o._vwo_sessionId}),void n.reject()):(i.LogManager.Instance.errorLog("ERROR_STORING_DATA_IN_STORAGE",{key:"Context or Context.id"},{an:u.ApiEnum.GET_FLAG,uuid:o._vwo_uuid,sId:o._vwo_sessionId}),void n.reject()):(i.LogManager.Instance.errorLog("ERROR_STORING_DATA_IN_STORAGE",{key:"featureKey"},{an:u.ApiEnum.GET_FLAG,uuid:o._vwo_uuid,sId:o._vwo_sessionId}),void n.reject())},e}();t.StorageDecorator=c},3836:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureModel=void 0;var r=n(9378),o=n(9094),i=n(324),a=function(){function e(){this.m=[],this.metrics=[],this.rules=[],this.impactCampaign=null,this.isDebuggerEnabled=!1,this.rulesLinkedCampaign=[],this.isGatewayServiceRequired=!1}return e.prototype.modelFromDictionary=function(e){var t,n,a,s=this;if(this.id=e.id,this.key=e.key,this.name=e.name,this.type=e.type,(null==e?void 0:e.isDebuggerEnabled)&&(this.isDebuggerEnabled=e.isDebuggerEnabled),(null==e?void 0:e.isGatewayServiceRequired)&&(this.isGatewayServiceRequired=e.isGatewayServiceRequired),e.impactCampaign&&(this.impactCampaign=(new r.ImpactCapmaignModel).modelFromDictionary(e.impactCampaign)),e.m&&e.m.constructor==={}.constructor||(null===(t=e.metrics)||void 0===t?void 0:t.constructor)==={}.constructor)this.metrics=[];else{var u=e.m||e.metrics;null==u||u.forEach((function(e){s.metrics.push((new o.MetricModel).modelFromDictionary(e))}))}if((null===(n=null==e?void 0:e.rules)||void 0===n?void 0:n.constructor)==={}.constructor)this.rules=[];else{var c=e.rules;null==c||c.forEach((function(e){s.rules.push((new i.RuleModel).modelFromDictionary(e))}))}if((null==e?void 0:e.rulesLinkedCampaign)&&(null===(a=e.rulesLinkedCampaign)||void 0===a?void 0:a.constructor)!=={}.constructor){var l=e.rulesLinkedCampaign;this.rulesLinkedCampaign=l}return this},e.prototype.getName=function(){return this.name},e.prototype.getType=function(){return this.type},e.prototype.getId=function(){return this.id},e.prototype.getKey=function(){return this.key},e.prototype.getRules=function(){return this.rules},e.prototype.getImpactCampaign=function(){return this.impactCampaign},e.prototype.getRulesLinkedCampaign=function(){return this.rulesLinkedCampaign},e.prototype.setRulesLinkedCampaign=function(e){this.rulesLinkedCampaign=e},e.prototype.getMetrics=function(){return this.metrics},e.prototype.getIsGatewayServiceRequired=function(){return this.isGatewayServiceRequired},e.prototype.setIsGatewayServiceRequired=function(e){this.isGatewayServiceRequired=e},e.prototype.getIsDebuggerEnabled=function(){return this.isDebuggerEnabled},e}();t.FeatureModel=a},3890:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendGetCall=function(e){c(r.HttpMethodEnum.GET,e)},t.sendPostCall=function(e){c(r.HttpMethodEnum.POST,e)};var r=n(8202),o=n(4580),i=n(9693),a=n(5573),s=n(8667),u=function(){};function c(e,t){var n=t.requestModel,c=t.successCallback,l=void 0===c?u:c,g=t.errorCallback,d=void 0===g?u:g,p=n.getOptions(),f=0,h=p.retryConfig.shouldRetry,v=p.retryConfig.maxRetries;!function t(){var u=new a.ResponseModel,c="".concat(p.scheme,"://").concat(p.hostname).concat(p.path);p.port&&(c="".concat(p.scheme,"://").concat(p.hostname,":").concat(p.port).concat(p.path));var g=p.body,E=p.headers||{},y=p.timeout,m=new XMLHttpRequest;function I(e){if(h&&f<v){var r=p.retryConfig.initialDelay*Math.pow(p.retryConfig.backoffMultiplier,f)*1e3;f++,o.LogManager.Instance.errorLog("ATTEMPTING_RETRY_FOR_FAILED_NETWORK_CALL",{endPoint:c.split("?")[0],err:(0,s.getFormattedErrorMessage)(e),delay:r/1e3,attempt:f,maxRetries:v},{},!1),n.setLastError(e),setTimeout(t,r)}else String(p.path).includes(i.EventEnum.VWO_DEBUGGER_EVENT)||o.LogManager.Instance.errorLog("NETWORK_CALL_FAILURE_AFTER_MAX_RETRIES",{extraData:c.split("?")[0],attempts:f,err:(0,s.getFormattedErrorMessage)(e)},{},!1),u.setTotalAttempts(f),u.setError((0,s.getFormattedErrorMessage)(e)),d(u)}for(var _ in y&&(m.timeout=y),m.onload=function(){if(u.setStatusCode(m.status),m.status>=200&&m.status<300){var t=m.responseText;if(f>0&&(u.setTotalAttempts(f),u.setError(n.getLastError())),e===r.HttpMethodEnum.GET){var o=JSON.parse(t);u.setData(o),l(u)}else u.setData(t),l(u)}else 400===m.status?(u.setTotalAttempts(f),u.setError(m.responseText),d(u)):I(m.statusText)},m.onerror=function(){I("".concat(m.statusText,", status: ").concat(m.status))},y&&(m.ontimeout=function(){I("Request timed out")}),m.open(e,c,!0),E)_ in E&&"Content-Type"!==_&&"Content-Length"!==_&&m.setRequestHeader(_,E[_]);e===r.HttpMethodEnum.POST&&"string"!=typeof g?m.send(JSON.stringify(g)):e===r.HttpMethodEnum.GET&&m.send()}()}},4019:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.HeadersEnum=void 0,function(e){e.USER_AGENT="X-Device-User-Agent",e.IP="VWO-X-Forwarded-For"}(n||(t.HeadersEnum=n={}))},4036:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalRequestModel=void 0;var r=n(5399),o=function(){function e(e,t,n,o){this.timeout=r.Constants.EVENTS_CALL_TIMEOUT,this.url=e,this.query=t,this.body=n,this.headers=o}return e.prototype.setQuery=function(e){this.query=e},e.prototype.getQuery=function(){return this.query},e.prototype.setBody=function(e){this.body=e},e.prototype.getBody=function(){return this.body},e.prototype.setBaseUrl=function(e){this.url=e},e.prototype.getBaseUrl=function(){return this.url},e.prototype.setTimeout=function(e){this.timeout=e},e.prototype.getTimeout=function(){return this.timeout},e.prototype.setHeaders=function(e){this.headers=e},e.prototype.getHeaders=function(){return this.headers},e.prototype.setDevelopmentMode=function(e){this.isDevelopmentMode=e},e.prototype.getDevelopmentMode=function(){return this.isDevelopmentMode},e}();t.GlobalRequestModel=o},4076:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentOperatorValueEnum=void 0,function(e){e.AND="and",e.NOT="not",e.OR="or",e.CUSTOM_VARIABLE="custom_variable",e.USER="user",e.COUNTRY="country",e.REGION="region",e.CITY="city",e.OPERATING_SYSTEM="os",e.DEVICE_TYPE="device_type",e.DEVICE="device",e.BROWSER_AGENT="browser_string",e.UA="ua",e.FEATURE_ID="featureId",e.IP="ip_address",e.BROWSER_VERSION="browser_version",e.OS_VERSION="os_version"}(n||(t.SegmentOperatorValueEnum=n={}))},4140:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.BatchEventsQueue=void 0;var i=n(5399),a=n(1359),s=n(4580),u=n(8754),c=n(7128),l=n(470),g=function(){function e(t){return void 0===t&&(t={}),this.queue=[],this.timer=null,this.isEdgeEnvironment=!1,(0,a.isBoolean)(t.isEdgeEnvironment)&&(this.isEdgeEnvironment=t.isEdgeEnvironment),(0,a.isNumber)(t.requestTimeInterval)&&t.requestTimeInterval>=1?this.requestTimeInterval=t.requestTimeInterval:(this.requestTimeInterval=i.Constants.DEFAULT_REQUEST_TIME_INTERVAL,s.LogManager.Instance.info((0,u.buildMessage)(c.InfoLogMessagesEnum.EVENT_BATCH_DEFAULTS,{parameter:"requestTimeInterval",minLimit:0,defaultValue:this.requestTimeInterval.toString()}))),(0,a.isNumber)(t.eventsPerRequest)&&t.eventsPerRequest>0&&t.eventsPerRequest<=i.Constants.MAX_EVENTS_PER_REQUEST?this.eventsPerRequest=t.eventsPerRequest:t.eventsPerRequest>i.Constants.MAX_EVENTS_PER_REQUEST?(this.eventsPerRequest=i.Constants.MAX_EVENTS_PER_REQUEST,s.LogManager.Instance.info((0,u.buildMessage)(c.InfoLogMessagesEnum.EVENT_BATCH_MAX_LIMIT,{parameter:"eventsPerRequest",maxLimit:i.Constants.MAX_EVENTS_PER_REQUEST.toString()}))):(this.eventsPerRequest=i.Constants.DEFAULT_EVENTS_PER_REQUEST,s.LogManager.Instance.info((0,u.buildMessage)(c.InfoLogMessagesEnum.EVENT_BATCH_DEFAULTS,{parameter:"eventsPerRequest",minLimit:0,defaultValue:this.eventsPerRequest.toString()}))),this.flushCallback=(0,a.isFunction)(t.flushCallback)?t.flushCallback:function(){},this.dispatcher=t.dispatcher,this.accountId=l.SettingsService.Instance.accountId,this.isEdgeEnvironment||this.createNewBatchTimer(),e.instance=this,this}return Object.defineProperty(e,"Instance",{get:function(){return e.instance},enumerable:!1,configurable:!0}),e.prototype.enqueue=function(e){this.queue.push(e),s.LogManager.Instance.info((0,u.buildMessage)(c.InfoLogMessagesEnum.EVENT_QUEUE,{queueType:"batch",event:JSON.stringify(e)})),this.queue.length>=this.eventsPerRequest&&this.flush()},e.prototype.flush=function(e){var t=this;if(void 0===e&&(e=!1),this.queue.length){s.LogManager.Instance.debug((0,u.buildMessage)(c.DebugLogMessagesEnum.EVENT_BATCH_BEFORE_FLUSHING,{manually:e?"manually":"",length:this.queue.length,accountId:this.accountId,timer:e?"Timer will be cleared and registered again":""}));var n=this.queue;return this.queue=[],this.dispatcher(n,this.flushCallback).then((function(r){var o;return"success"===r.status?(s.LogManager.Instance.info((0,u.buildMessage)(c.InfoLogMessagesEnum.EVENT_BATCH_After_FLUSHING,{manually:e?"manually":"",length:n.length})),r):((o=t.queue).push.apply(o,n),r)})).catch((function(){var e;return(e=t.queue).push.apply(e,n),{status:"error",events:n}}))}return s.LogManager.Instance.debug((0,u.buildMessage)(c.DebugLogMessagesEnum.BATCH_QUEUE_EMPTY)),new Promise((function(e){e({status:"success",events:[]})}))},e.prototype.createNewBatchTimer=function(){var e=this;this.timer=setInterval((function(){return r(e,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return[4,this.flush()];case 1:return e.sent(),[2]}}))}))}),1e3*this.requestTimeInterval)},e.prototype.clearRequestTimer=function(){clearTimeout(this.timer),this.timer=null},e.prototype.flushAndClearTimer=function(){return this.flush(!0)},e}();t.BatchEventsQueue=g,t.default=g},4237:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ApiEnum=void 0,function(e){e.INIT="init",e.ON_INIT="onInit",e.GET_FLAG="getFlag",e.TRACK_EVENT="trackEvent",e.SET_ATTRIBUTE="setAttribute",e.FLUSH_EVENTS="flushEvents",e.UPDATE_SETTINGS="updateSettings",e.SET_ALIAS="setAlias"}(n||(t.ApiEnum=n={}))},4273:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CampaignTypeEnum=void 0,function(e){e.ROLLOUT="FLAG_ROLLOUT",e.AB="FLAG_TESTING",e.PERSONALIZE="FLAG_PERSONALIZE"}(n||(t.CampaignTypeEnum=n={}))},4580:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevelEnum=t.LogManager=void 0;var r=n(3293);Object.defineProperty(t,"LogManager",{enumerable:!0,get:function(){return r.LogManager}});var o=n(4940);Object.defineProperty(t,"LogLevelEnum",{enumerable:!0,get:function(){return o.LogLevelEnum}})},4782:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Deferred=function(){var e=this;return this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),this}},4808:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default="00000000-0000-0000-0000-000000000000"},4820:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogTransportManager=t.LogLevelNumberEnum=void 0;var r,o=n(4940),i=n(2752),a=n(1359),s=n(6325);!function(e){e[e.TRACE=0]="TRACE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR"}(r||(t.LogLevelNumberEnum=r={}));var u=function(){function e(e){this.transports=[],this.config=e,this.consoleTransport=new s.ConsoleTransport({level:e.level})}return e.prototype.addTransport=function(e){this.transports.push(e)},e.prototype.shouldLog=function(e,t){return r[e.toUpperCase()]>=r[(t||this.config.level).toUpperCase()]},e.prototype.trace=function(e){this.log(o.LogLevelEnum.TRACE,e)},e.prototype.debug=function(e){this.log(o.LogLevelEnum.DEBUG,e)},e.prototype.info=function(e){this.log(o.LogLevelEnum.INFO,e)},e.prototype.warn=function(e){this.log(o.LogLevelEnum.WARN,e)},e.prototype.error=function(e){this.log(o.LogLevelEnum.ERROR,e)},e.prototype.log=function(e,t){var n=new i.LogMessageBuilder(this.config,this.consoleTransport).formatMessage(e,t);this.config.level&&(0===this.transports.length||this.transports.length>0&&this.config.shouldLogToStandardOutput)&&this.shouldLog(e,this.config.level)&&this.consoleTransport[e](n);for(var r=0;r<this.transports.length;r++)this.shouldLog(e,this.transports[r].level)&&this.transports[r].log&&(0,a.isFunction)(this.transports[r].log)&&this.transports[r].log(e,t)},e}();t.LogTransportManager=u},4940:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevelEnum=void 0,function(e){e.TRACE="trace",e.DEBUG="debug",e.INFO="info",e.WARN="warn",e.ERROR="error"}(n||(t.LogLevelEnum=n={}))},4948:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(9025)),o=i(n(2311));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,r.default)("v3",48,o.default);t.default=a},4986:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentEvaluator=t.SegmentationManager=void 0;var r=n(6373);Object.defineProperty(t,"SegmentationManager",{enumerable:!0,get:function(){return r.SegmentationManager}});var o=n(8011);Object.defineProperty(t,"SegmentEvaluator",{enumerable:!0,get:function(){return o.SegmentEvaluator}})},5030:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connector=void 0;t.Connector=function(){}},5073:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(6140)),o=a(n(2858)),i=n(9910);function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,n){if(r.default.randomUUID&&!t&&!e)return r.default.randomUUID();const a=(e=e||{}).random||(e.rng||o.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=a[e];return t}return(0,i.unsafeStringify)(a)}},5374:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;t.Logger=function(){}},5389:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getUserId=function(e,t){return r(this,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:return t?a.SettingsService.Instance.isGatewayServiceProvided?[4,i.AliasingUtil.getAlias(e)]:[3,2]:[3,4];case 1:return n=o.sent(),r=n.find((function(t){return t.aliasId===e})),u.LogManager.Instance.info((0,c.buildMessage)(s.InfoLogMessagesEnum.ALIAS_ENABLED,{userId:null==r?void 0:r.userId})),[2,(null==r?void 0:r.userId)||e];case 2:return u.LogManager.Instance.error((0,c.buildMessage)(s.ErrorLogMessagesEnum.INVALID_GATEWAY_URL)),[2,e];case 3:return[3,5];case 4:return[2,e];case 5:return[2]}}))}))};var i=n(7487),a=n(470),s=n(7128),u=n(4580),c=n(8754)},5399:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Constants=void 0;var o,i,a=n(5520),s=n(2346);o={name:"vwo-fme-javascript-sdk",version:r(n(3236)).default.version},i=a.PlatformEnum.CLIENT,t.Constants={SDK_NAME:o.name,SDK_VERSION:o.version,PLATFORM:i,MAX_TRAFFIC_PERCENT:100,MAX_TRAFFIC_VALUE:1e4,STATUS_RUNNING:"RUNNING",SEED_VALUE:1,MAX_EVENTS_PER_REQUEST:5e3,DEFAULT_REQUEST_TIME_INTERVAL:600,DEFAULT_EVENTS_PER_REQUEST:100,SEED_URL:s.SEED_URL,HTTP_PROTOCOL:s.HTTP_PROTOCOL,HTTPS_PROTOCOL:s.HTTPS_PROTOCOL,SETTINGS:"settings",SETTINGS_EXPIRY:1e7,SETTINGS_TIMEOUT:5e4,EVENTS_CALL_TIMEOUT:1e4,SETTINGS_TTL:72e5,MIN_TTL_MS:6e4,HOST_NAME:"dev.visualwebsiteoptimizer.com",SETTINGS_ENDPOINT:"/server-side/v2-settings",WEBHOOK_SETTINGS_ENDPOINT:"/server-side/v2-pull",LOCATION_ENDPOINT:"/getLocation",VWO_FS_ENVIRONMENT:"vwo_fs_environment",RANDOM_ALGO:1,API_VERSION:"1",VWO_META_MEG_KEY:"_vwo_meta_meg_",DEFAULT_RETRY_CONFIG:{shouldRetry:!0,initialDelay:2,maxRetries:3,backoffMultiplier:2},DEFAULT_LOCAL_STORAGE_KEY:"vwo_fme_data",DEFAULT_SETTINGS_STORAGE_KEY:"vwo_fme_settings",POLLING_INTERVAL:6e5,PRODUCT_NAME:"fme",V2_SETTINGS:"v2-settings",POLLING:"polling",BATCH_EVENTS:"batch-events",BROWSER_STORAGE:"browserStorage",FLAG_DECISION_GIVEN:"FLAG_DECISION_GIVEN",NETWORK_CALL_FAILURE_AFTER_MAX_RETRIES:"NETWORK_CALL_FAILURE_AFTER_MAX_RETRIES",NETWORK_CALL_SUCCESS_WITH_RETRIES:"NETWORK_CALL_SUCCESS_WITH_RETRIES",IMPACT_ANALYSIS:"IMPACT_ANALYSIS"}},5520:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformEnum=void 0,function(e){e.CLIENT="client",e.SERVER="server"}(n||(t.PlatformEnum=n={}))},5573:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseModel=void 0;var r=n(8667),o=function(){function e(){}return e.prototype.setStatusCode=function(e){this.statusCode=e},e.prototype.setHeaders=function(e){this.headers=e},e.prototype.setData=function(e){this.data=e},e.prototype.setError=function(e){this.error=(0,r.getFormattedErrorMessage)(e)},e.prototype.getHeaders=function(){return this.headers},e.prototype.getData=function(){return this.data},e.prototype.getStatusCode=function(){return this.statusCode},e.prototype.getError=function(){return this.error},e.prototype.setTotalAttempts=function(e){this.totalAttempts=e},e.prototype.getTotalAttempts=function(){return this.totalAttempts},e}();t.ResponseModel=o},6130:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsModel=void 0;var r=n(2144),o=n(3836),i=function(){function e(e){var t=this;return this.f=[],this.features=[],this.c=[],this.campaigns=[],this.campaignGroups={},this.cG={},this.groups={},this.g={},this.sdkKey=e.sK||e.sdkKey,this.accountId=e.a||e.accountId,this.version=e.v||e.version,this.collectionPrefix=e.collectionPrefix,this.usageStatsAccountId=e.usageStatsAccountId,(e.f&&e.f.constructor!=={}.constructor||e.features&&e.features.constructor!=={}.constructor)&&(e.f||e.features).forEach((function(e){t.features.push((new o.FeatureModel).modelFromDictionary(e))})),(e.c&&e.c.constructor!=={}.constructor||e.campaigns&&e.campaigns.constructor!=={}.constructor)&&(e.c||e.campaigns).forEach((function(e){t.campaigns.push((new r.CampaignModel).modelFromDictionary(e))})),(e.cG||e.campaignGroups)&&(this.campaignGroups=e.cG||e.campaignGroups),(e.g||e.groups)&&(this.groups=e.g||e.groups),e.pollInterval&&(this.pollInterval=e.pollInterval),this}return e.prototype.getFeatures=function(){return this.features},e.prototype.getCampaigns=function(){return this.campaigns},e.prototype.getSdkkey=function(){return this.sdkKey},e.prototype.getAccountId=function(){return this.accountId},e.prototype.getVersion=function(){return this.version},e.prototype.getCollectionPrefix=function(){return this.collectionPrefix},e.prototype.getCampaignGroups=function(){return this.campaignGroups},e.prototype.getGroups=function(){return this.groups},e.prototype.setPollInterval=function(e){this.pollInterval=e},e.prototype.getPollInterval=function(){return this.pollInterval},e.prototype.getUsageStatsAccountId=function(){return this.usageStatsAccountId},e}();t.SettingsModel=i},6140:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};t.default=n},6195:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateRule=void 0;var i=n(1359),a=n(2245),s=n(8925),u=n(162);t.evaluateRule=function(e,t,n,c,l,g,d,p){return r(void 0,void 0,void 0,(function(){var r,f,h;return o(this,(function(o){switch(o.label){case 0:return[4,(0,a.checkWhitelistingAndPreSeg)(e,t,n,c,l,g,d,p)];case 1:return r=o.sent(),f=r[0],h=r[1],f&&(0,i.isObject)(h)&&Object.keys(h).length>0?(Object.assign(p,{experimentId:n.getId(),experimentKey:n.getKey(),experimentVariationId:h.variationId}),(0,s.getShouldWaitForTrackingCalls)()?[4,(0,u.createAndSendImpressionForVariationShown)(e,n.getId(),h.variation.id,c,t.getKey())]:[3,3]):[3,4];case 2:return o.sent(),[3,4];case 3:(0,u.createAndSendImpressionForVariationShown)(e,n.getId(),h.variation.id,c,t.getKey()),o.label=4;case 4:return[2,{preSegmentationResult:f,whitelistedObject:h,updatedDecision:p}]}}))}))}},6301:e=>{"use strict";e.exports=JSON.parse('{"INVALID_OPTIONS":"Options should be of type:object","INVALID_SDK_KEY_IN_OPTIONS":"SDK Key is required in the options and should be of type:string","INVALID_ACCOUNT_ID_IN_OPTIONS":"Account ID is required in the options and should be of type:string|number","INVALID_POLLING_CONFIGURATION":"Invalid key:{key} passed in options. Should be of type:{correctType} and greater than equal to 1000","ERROR_FETCHING_SETTINGS":"Settings could not be fetched. Error:{err}","ERROR_FETCHING_SETTINGS_WITH_POLLING":"Settings could not be fetched with polling. Error:{err}","UPDATING_CLIENT_INSTANCE_FAILED_WHEN_WEBHOOK_TRIGGERED":"Failed to fetch settings. VWO client instance couldn\'t be updated. API:{apiName} called having isViaWebhook:{isViaWebhook}. Error: {err}","INVALID_SETTINGS_SCHEMA":"Settings are not valid. Failed schema validation","EXECUTION_FAILED":"API - {apiName} failed to execute. Error:{err}","INVALID_PARAM":"Key:{key} passed to API:{apiName} is not of valid type. Got type:{type}, should be:{correctType}","INVALID_CONTEXT_PASSED":"Context should be of type:object and must contain a mandatory key: id, which is User ID","FEATURE_NOT_FOUND":"Feature not found for the key:{featureKey}","FEATURE_NOT_FOUND_WITH_ID":"Feature not found for the id:{featureId}","EVENT_NOT_FOUND":"Event:{eventName} not found in any of the features\' metrics","ERROR_READING_STORED_DATA_IN_STORAGE":"Error reading data from storage. Error:{err}","ERROR_STORING_DATA_IN_STORAGE":"Key:{featureKey} is not valid. Unable to store data into storage","ERROR_READING_DATA_FROM_BROWSER_STORAGE":"Error while reading from browser storage. Error: {err}","ERROR_STORING_DATA_IN_BROWSER_STORAGE":"Error while writing to browserstorage. Error: {err}","ERROR_DECODING_SDK_KEY_FROM_STORAGE":"Failed to decode sdkKey from browser storage. Error: {err}","INVALID_GATEWAY_URL":"Invalid URL for VWO Gateway Service while initializing the SDK","NETWORK_CALL_FAILED":"Error occurred while sending {method} request. Error:{err}","ATTEMPTING_RETRY_FOR_FAILED_NETWORK_CALL":"Request failed for {endPoint}. Error: {err}. Retrying in {delay} seconds, attempt {attempt} of {maxRetries}","NETWORK_CALL_FAILURE_AFTER_MAX_RETRIES":"Network call for {extraData} failed after {attempts} retry attempt(s). Got Error: {err}","INVALID_RETRY_CONFIG":"Retry config is invalid. Should be of type:object","SDK_INIT_EVENT_FAILED":"Error occurred while sending SDK init event. Error:{err}","INVALID_NETWORK_RESPONSE_DATA":"Received invalid or empty response data from the network request","ALIAS_CALLED_BUT_NOT_PASSED":"Aliasing is not enabled. Set isAliasingEnabled:true in init to enable","ERROR_SETTING_SEGMENTATION_CONTEXT":"Error in setting contextual data for segmentation. Error: {err}","USER_AGENT_VALIDATION_ERROR":"Failed to validate user agent. Error: {err}","INVALID_IP_ADDRESS_IN_CONTEXT_FOR_PRE_SEGMENTATION":"ipAddress is required in context to evaluate location pre-segmentation","INVALID_USER_AGENT_IN_CONTEXT_FOR_PRE_SEGMENTATION":"userAgent is required in context to evaluate user-agent pre-segmentation","INVALID_ATTRIBUTE_LIST_FORMAT":"Invalid inList operand format","ERROR_FETCHING_DATA_FROM_GATEWAY":"Error while fetching data from gateway. Error: {err}","INVALID_BATCH_EVENTS_CONFIG":"Invalid batch events config. Should be an object - eventsPerRequest and requestTimeInterval should be of type:number and > 0","BATCHING_NOT_ENABLED":"Batching is not enabled. Pass batchEventData in the SDK configuration while invoking init API.","ERROR_INITIALIZING_FETCH":"Unable to initialize the fetch API. Details: {error}"}')},6306:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=6306,e.exports=t},6325:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleTransport=void 0;var r=n(4940),o=function(){function e(e){void 0===e&&(e={}),this.config=e,this.level=this.config.level}return e.prototype.trace=function(e){this.consoleLog(r.LogLevelEnum.TRACE,e)},e.prototype.debug=function(e){this.consoleLog(r.LogLevelEnum.DEBUG,e)},e.prototype.info=function(e){this.consoleLog(r.LogLevelEnum.INFO,e)},e.prototype.warn=function(e){this.consoleLog(r.LogLevelEnum.WARN,e)},e.prototype.error=function(e){this.consoleLog(r.LogLevelEnum.ERROR,e)},e.prototype.consoleLog=function(e,t){console[e](t)},e}();t.ConsoleTransport=o},6373:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentationManager=void 0;var i=n(8011),a=n(2898),s=n(9528),u=n(4580),c=n(1880),l=n(470),g=n(1359),d=n(4237),p=n(8667),f=function(){function e(){}return Object.defineProperty(e,"Instance",{get:function(){return this.instance=this.instance||new e,this.instance},enumerable:!1,configurable:!0}),e.prototype.attachEvaluator=function(e){this.evaluator=e||new i.SegmentEvaluator},e.prototype.setContextualData=function(e,t,n){return r(this,void 0,void 0,(function(){var r,i,f,h;return o(this,(function(o){switch(o.label){case 0:if(this.attachEvaluator(),this.evaluator.settings=e,this.evaluator.context=n,this.evaluator.feature=t,null===(null==n?void 0:n.getUserAgent())&&null===(null==n?void 0:n.getIpAddress()))return[2];if(!0!==t.getIsGatewayServiceRequired())return[3,4];if(!l.SettingsService.Instance.isGatewayServiceProvided||!(0,g.isUndefined)(n.getVwo())&&null!==n.getVwo())return[3,4];r={},(null==n?void 0:n.getUserAgent())&&(r.userAgent=n.getUserAgent()),(null==n?void 0:n.getIpAddress())&&(r.ipAddress=n.getIpAddress()),o.label=1;case 1:return o.trys.push([1,3,,4]),i=(0,a.getQueryParams)(r),[4,(0,a.getFromGatewayService)(i,s.UrlEnum.GET_USER_DATA,n)];case 2:return f=o.sent(),n.setVwo((new c.ContextVWOModel).modelFromDictionary(f)),this.evaluator.context=n,[3,4];case 3:return h=o.sent(),u.LogManager.Instance.errorLog("ERROR_SETTING_SEGMENTATION_CONTEXT",{err:(0,p.getFormattedErrorMessage)(h)},{an:d.ApiEnum.GET_FLAG,uuid:n.getUuid(),sId:n.getSessionId()}),[3,4];case 4:return[2]}}))}))},e.prototype.validateSegmentation=function(e,t){return r(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return[4,this.evaluator.isSegmentationValid(e,t)];case 1:return[2,n.sent()]}}))}))},e}();t.SegmentationManager=f},6611:e=>{"use strict";e.exports={}},6612:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FlagApi=t.Flag=void 0;var a=n(3780),s=n(4237),u=n(4273),c=n(7128),l=n(2144),g=n(502),d=n(2365),p=n(4580),f=n(4986),h=n(8792),v=n(9181),E=n(1359),y=n(2245),m=n(8667),I=n(162),_=n(8754),S=n(4782),T=n(6195),b=n(8925),A=n(8205),O=n(3368),R=n(5399),L=function(){function e(e,t){this.enabled=e,this.variation=t}return e.prototype.isEnabled=function(){return this.enabled},e.prototype.getVariables=function(){var e;return(null===(e=this.variation)||void 0===e?void 0:e.getVariables())||[]},e.prototype.getVariable=function(e,t){var n,r,o=null===(r=null===(n=this.variation)||void 0===n?void 0:n.getVariables().find((function(t){return g.VariableModel.modelFromDictionary(t).getKey()===e})))||void 0===r?void 0:r.getValue();return void 0!==o?o:t},e}();t.Flag=L;var N=function(){function e(){}return e.get=function(e,t,n,g){return o(this,void 0,void 0,(function(){var o,N,M,C,V,D,P,U,G,F,x,k,K,j,W,B,H,q,Y,X,Q,z,Z,J,$,ee,te,ne,re,oe,ie,ae,se,ue,ce;return i(this,(function(i){switch(i.label){case 0:return o=!1,N=null,M=null,C=!1,V={},D=new S.Deferred,P=new Map,U=(0,m.getFeatureFromKey)(t,e),G={featureName:null==U?void 0:U.getName(),featureId:null==U?void 0:U.getId(),featureKey:null==U?void 0:U.getKey(),userId:null==n?void 0:n.getId(),api:s.ApiEnum.GET_FLAG},F={an:s.ApiEnum.GET_FLAG,uuid:n.getUuid(),fk:null==U?void 0:U.getKey(),sId:n.getSessionId()},x=new h.StorageService,[4,(new a.StorageDecorator).getFeatureFromStorage(e,n,x)];case 1:if(null==(k=i.sent())?void 0:k.experimentVariationId){if(k.experimentKey&&(ie=(0,v.getVariationFromCampaignKey)(t,k.experimentKey,k.experimentVariationId)))return p.LogManager.Instance.info((0,_.buildMessage)(c.InfoLogMessagesEnum.STORED_VARIATION_FOUND,{variationKey:ie.getKey(),userId:n.getId(),experimentType:"experiment",experimentKey:k.experimentKey})),D.resolve(new L(!0,ie)),[2,D.promise]}else(null==k?void 0:k.rolloutKey)&&(null==k?void 0:k.rolloutId)&&(ie=(0,v.getVariationFromCampaignKey)(t,k.rolloutKey,k.rolloutVariationId))&&(p.LogManager.Instance.info((0,_.buildMessage)(c.InfoLogMessagesEnum.STORED_VARIATION_FOUND,{variationKey:ie.getKey(),userId:n.getId(),experimentType:"rollout",experimentKey:k.rolloutKey})),p.LogManager.Instance.debug((0,_.buildMessage)(c.DebugLogMessagesEnum.EXPERIMENTS_EVALUATION_WHEN_ROLLOUT_PASSED,{userId:n.getId()})),o=!0,C=!0,N=ie,K={rolloutId:k.rolloutId,rolloutKey:k.rolloutKey,rolloutVariationId:k.rolloutVariationId},P.set(e,K),Object.assign(V,K));return(0,E.isObject)(U)&&void 0!==U?[4,f.SegmentationManager.Instance.setContextualData(t,U,n)]:(p.LogManager.Instance.errorLog("FEATURE_NOT_FOUND",{featureKey:e},F),D.reject({}),[2,D.promise]);case 2:if(i.sent(),!((j=(0,m.getSpecificRulesBasedOnType)(U,u.CampaignTypeEnum.ROLLOUT)).length>0)||o)return[3,10];W=[],B=0,H=j,i.label=3;case 3:return B<H.length?($=H[B],[4,(0,T.evaluateRule)(t,U,$,n,P,null,x,G)]):[3,6];case 4:return q=i.sent(),te=q.preSegmentationResult,re=q.updatedDecision,Object.assign(G,re),te?(W.push($),P.set(e,{rolloutId:$.getId(),rolloutKey:$.getKey(),rolloutVariationId:null===(ae=$.getVariations()[0])||void 0===ae?void 0:ae.getId()}),[3,6]):[3,5];case 5:return B++,[3,3];case 6:return W.length>0?(Y=(new l.CampaignModel).modelFromDictionary(W[0]),ie=(0,y.evaluateTrafficAndGetVariation)(t,Y,n.getId()),(0,E.isObject)(ie)&&Object.keys(ie).length>0?(o=!0,C=!0,N=ie,w(Y,ie,V,G),(0,b.getShouldWaitForTrackingCalls)()?[4,(0,I.createAndSendImpressionForVariationShown)(t,Y.getId(),ie.getId(),n,e)]:[3,8]):[3,9]):[3,9];case 7:return i.sent(),[3,9];case 8:(0,I.createAndSendImpressionForVariationShown)(t,Y.getId(),ie.getId(),n,e),i.label=9;case 9:return[3,11];case 10:0===j.length&&(p.LogManager.Instance.debug(c.DebugLogMessagesEnum.EXPERIMENTS_EVALUATION_WHEN_NO_ROLLOUT_PRESENT),C=!0),i.label=11;case 11:if(!C)return[3,18];X=[],Q=(0,m.getAllExperimentRules)(U),z=new Map,Z=0,J=Q,i.label=12;case 12:return Z<J.length?($=J[Z],[4,(0,T.evaluateRule)(t,U,$,n,P,z,x,G)]):[3,15];case 13:return ee=i.sent(),te=ee.preSegmentationResult,ne=ee.whitelistedObject,re=ee.updatedDecision,Object.assign(G,re),te?(null===ne?X.push($):(o=!0,M=ne.variation,Object.assign(V,{experimentId:$.getId(),experimentKey:$.getKey(),experimentVariationId:ne.variationId})),[3,15]):[3,14];case 14:return Z++,[3,12];case 15:return X.length>0?(oe=(new l.CampaignModel).modelFromDictionary(X[0]),ie=(0,y.evaluateTrafficAndGetVariation)(t,oe,n.getId()),(0,E.isObject)(ie)&&Object.keys(ie).length>0?(o=!0,M=ie,w(oe,ie,V,G),(0,b.getShouldWaitForTrackingCalls)()?[4,(0,I.createAndSendImpressionForVariationShown)(t,oe.getId(),ie.getId(),n,e)]:[3,17]):[3,18]):[3,18];case 16:return i.sent(),[3,18];case 17:(0,I.createAndSendImpressionForVariationShown)(t,oe.getId(),ie.getId(),n,e),i.label=18;case 18:return o&&(new a.StorageDecorator).setDataInStorage(r({featureKey:e,context:n},V),x),g.set(G),g.execute(g.get()),U.getIsDebuggerEnabled()&&(F.cg=O.DebuggerCategoryEnum.DECISION,F.lt=p.LogLevelEnum.INFO.toString(),F.msg_t=R.Constants.FLAG_DECISION_GIVEN,function(e,t){var n=(0,A.extractDecisionKeys)(t),r="Flag decision given for feature:".concat(t.featureKey,".");t.rolloutKey&&t.rolloutVariationId&&(r+=" Got rollout:".concat(t.rolloutKey.substring((t.featureKey+"_").length)," with variation:").concat(t.rolloutVariationId)),t.experimentKey&&t.experimentVariationId&&(r+=" and experiment:".concat(t.experimentKey.substring((t.featureKey+"_").length)," with variation:").concat(t.experimentVariationId)),e.msg=r,Object.assign(e,n)}(F,G),(0,A.sendDebugEventToVWO)(F)),(null===(se=U.getImpactCampaign())||void 0===se?void 0:se.getCampaignId())?(p.LogManager.Instance.info((0,_.buildMessage)(c.InfoLogMessagesEnum.IMPACT_ANALYSIS,{userId:n.getId(),featureKey:e,status:o?"enabled":"disabled"})),(0,b.getShouldWaitForTrackingCalls)()?[4,(0,I.createAndSendImpressionForVariationShown)(t,null===(ue=U.getImpactCampaign())||void 0===ue?void 0:ue.getCampaignId(),o?2:1,n,e)]:[3,20]):[3,21];case 19:return i.sent(),[3,21];case 20:(0,I.createAndSendImpressionForVariationShown)(t,null===(ce=U.getImpactCampaign())||void 0===ce?void 0:ce.getCampaignId(),o?2:1,n,e),i.label=21;case 21:return D.resolve(new L(o,(new d.VariationModel).modelFromDictionary(null!=M?M:N))),[2,D.promise]}}))}))},e}();function w(e,t,n,r){e.getType()===u.CampaignTypeEnum.ROLLOUT?Object.assign(n,{rolloutId:e.getId(),rolloutKey:e.getKey(),rolloutVariationId:t.getId()}):Object.assign(n,{experimentId:e.getId(),experimentKey:e.getKey(),experimentVariationId:t.getId()}),Object.assign(r,n)}t.FlagApi=N},6710:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseModel=t.RequestModel=t.GlobalRequestModel=t.NetworkManager=void 0;var r=n(7885);Object.defineProperty(t,"NetworkManager",{enumerable:!0,get:function(){return r.NetworkManager}});var o=n(4036);Object.defineProperty(t,"GlobalRequestModel",{enumerable:!0,get:function(){return o.GlobalRequestModel}});var i=n(2887);Object.defineProperty(t,"RequestModel",{enumerable:!0,get:function(){return i.RequestModel}});var a=n(5573);Object.defineProperty(t,"ResponseModel",{enumerable:!0,get:function(){return a.ResponseModel}})},6775:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DecisionMaker=void 0;var o=r(n(8005)).default;o.v3||(o.v3=o);var i=function(){function e(){}return e.prototype.generateBucketValue=function(e,t,n){void 0===n&&(n=1);var r=(t*(e/Math.pow(2,32))+1)*n;return Math.floor(r)},e.prototype.getBucketValueForUser=function(e,t){void 0===t&&(t=100);var n=o.v3(e,1);return this.generateBucketValue(n,t)},e.prototype.calculateBucketValue=function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=1e4);var r=this.generateHashValue(e);return this.generateBucketValue(r,n,t)},e.prototype.generateHashValue=function(e){return o.v3(e,1)},e}();t.DecisionMaker=i},6792:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(7037))&&r.__esModule?r:{default:r};t.default=function(e){if(!(0,o.default)(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}},6905:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentOperandValueEnum=void 0,function(e){e[e.LOWER_VALUE=1]="LOWER_VALUE",e[e.STARTING_ENDING_STAR_VALUE=2]="STARTING_ENDING_STAR_VALUE",e[e.STARTING_STAR_VALUE=3]="STARTING_STAR_VALUE",e[e.ENDING_STAR_VALUE=4]="ENDING_STAR_VALUE",e[e.REGEX_VALUE=5]="REGEX_VALUE",e[e.EQUAL_VALUE=6]="EQUAL_VALUE",e[e.GREATER_THAN_VALUE=7]="GREATER_THAN_VALUE",e[e.GREATER_THAN_EQUAL_TO_VALUE=8]="GREATER_THAN_EQUAL_TO_VALUE",e[e.LESS_THAN_VALUE=9]="LESS_THAN_VALUE",e[e.LESS_THAN_EQUAL_TO_VALUE=10]="LESS_THAN_EQUAL_TO_VALUE"}(n||(t.SegmentOperandValueEnum=n={}))},6947:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentOperandRegexEnum=void 0,function(e){e.LOWER="^lower",e.LOWER_MATCH="^lower\\((.*)\\)",e.WILDCARD="^wildcard",e.WILDCARD_MATCH="^wildcard\\((.*)\\)",e.REGEX="^regex",e.REGEX_MATCH="^regex\\((.*)\\)",e.STARTING_STAR="^\\*",e.ENDING_STAR="\\*$",e.GREATER_THAN_MATCH="^gt\\((\\d+(?:\\.\\d+)*|\\.\\d+)\\)",e.GREATER_THAN_EQUAL_TO_MATCH="^gte\\((\\d+(?:\\.\\d+)*|\\.\\d+)\\)",e.LESS_THAN_MATCH="^lt\\((\\d+(?:\\.\\d+)*|\\.\\d+)\\)",e.LESS_THAN_EQUAL_TO_MATCH="^lte\\((\\d+(?:\\.\\d+)*|\\.\\d+)\\)"}(n||(t.SegmentOperandRegexEnum=n={}))},7037:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(7656))&&r.__esModule?r:{default:r};t.default=function(e){return"string"==typeof e&&o.default.test(e)}},7128:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorLogMessagesEnum=t.InfoLogMessagesEnum=t.DebugLogMessagesEnum=void 0;var o=r(n(3095)),i=o.default.default||o.default,a=i.debugMessages;t.DebugLogMessagesEnum=a;var s=i.infoMessages;t.InfoLogMessagesEnum=s;var u=i.errorMessagesV2;t.ErrorLogMessagesEnum=u},7186:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(9025)),o=i(n(9042));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,r.default)("v5",80,o.default);t.default=a},7241:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UsageStatsUtil=void 0;var r=n(4820),o=n(470),i=function(){function e(){this.usageStatsData={}}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.setUsageStats=function(e){var t,n=e.storage,i=e.logger,a=e.batchEventData,s=e.gatewayService,u=e.integrations,c=e.pollInterval,l=e._vwo_meta,g=e.shouldWaitForTrackingCalls,d={};d.a=o.SettingsService.Instance.accountId,d.env=o.SettingsService.Instance.sdkKey,u&&(d.ig=1),a&&(d.eb=1),i&&(i.transport||i.transports)&&(d.cl=1),n&&(d.ss=1),(null==i?void 0:i.level)&&(d.ll=null!==(t=r.LogLevelNumberEnum[i.level.toUpperCase()])&&void 0!==t?t:-1),s&&(d.gs=1),c&&(d.pi=c),g&&(d.swtc=1),l&&l.ea&&(d._ea=1),this.usageStatsData=d},e.prototype.getUsageStats=function(){return this.usageStatsData},e.prototype.clearUsageStats=function(){this.usageStatsData={}},e}();t.UsageStatsUtil=i},7487:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.AliasingUtil=void 0;var i=n(6710),a=n(470),s=n(8202),u=n(9528),c=n(4782),l=function(){function e(){}return e.getAlias=function(e){return r(this,void 0,void 0,(function(){var t,n,r,u,l,g,d,p,f;return o(this,(function(o){t=new c.Deferred;try{return n=null,r=null,u=null,l=i.NetworkManager.Instance.getRetryConfig(),null!=a.SettingsService.Instance.gatewayServiceConfig.hostname?(n=a.SettingsService.Instance.gatewayServiceConfig.hostname,r=a.SettingsService.Instance.gatewayServiceConfig.port,u=a.SettingsService.Instance.gatewayServiceConfig.protocol):(n=a.SettingsService.Instance.hostname,r=a.SettingsService.Instance.port,u=a.SettingsService.Instance.protocol),(g={}).accountId=null===(p=a.SettingsService.Instance)||void 0===p?void 0:p.accountId,g.sdkKey=null===(f=a.SettingsService.Instance)||void 0===f?void 0:f.sdkKey,g[this.KEY_USER_ID]=JSON.stringify([e]),d=new i.RequestModel(n,s.HttpMethodEnum.GET,this.GET_ALIAS_URL,g,null,null,u,r,l),i.NetworkManager.Instance.get(d).then((function(e){t.resolve(e.getData())})).catch((function(e){t.reject(e)})),[2,t.promise]}catch(e){return t.resolve(!1),[2,t.promise]}return[2]}))}))},e.setAlias=function(e,t){return r(this,void 0,void 0,(function(){var n,r,u,l,g,d,p,f,h,v,E;return o(this,(function(o){n=new c.Deferred;try{return r=null,u=null,l=null,g=i.NetworkManager.Instance.getRetryConfig(),null!=a.SettingsService.Instance.gatewayServiceConfig.hostname?(r=a.SettingsService.Instance.gatewayServiceConfig.hostname,u=a.SettingsService.Instance.gatewayServiceConfig.port,l=a.SettingsService.Instance.gatewayServiceConfig.protocol):(r=a.SettingsService.Instance.hostname,u=a.SettingsService.Instance.port,l=a.SettingsService.Instance.protocol),(d={}).accountId=null===(v=a.SettingsService.Instance)||void 0===v?void 0:v.accountId,d.sdkKey=null===(E=a.SettingsService.Instance)||void 0===E?void 0:E.sdkKey,d[this.KEY_USER_ID]=e,d[this.KEY_ALIAS_ID]=t,(h={})[this.KEY_USER_ID]=e,h[this.KEY_ALIAS_ID]=t,p=h,f=new i.RequestModel(r,s.HttpMethodEnum.POST,this.SET_ALIAS_URL,d,p,null,l,u,g),i.NetworkManager.Instance.post(f).then((function(e){n.resolve(e.getData())})).catch((function(e){n.reject(e)})),[2,n.promise]}catch(e){return n.resolve(!1),[2,n.promise]}return[2]}))}))},e.KEY_USER_ID="userId",e.KEY_ALIAS_ID="aliasId",e.GET_ALIAS_URL=u.UrlEnum.GET_ALIAS,e.SET_ALIAS_URL=u.UrlEnum.SET_ALIAS,e}();t.AliasingUtil=l},7656:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},7675:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1359),o=function(){function e(e){var t;this.callback=null===(t=e.integrations)||void 0===t?void 0:t.callback,this.isCallBackFunction=(0,r.isFunction)(this.callback),this.decision={}}return e.prototype.execute=function(e){this.isCallBackFunction&&this.callback(e)},e.prototype.set=function(e){this.isCallBackFunction&&(this.decision=e)},e.prototype.get=function(){return this.decision},e}();t.default=o},7775:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(7037))&&r.__esModule?r:{default:r};t.default=function(e){if(!(0,o.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},7778:e=>{"use strict";e.exports=JSON.parse('{"ON_INIT_ALREADY_RESOLVED":"[INFO]: VWO-SDK {date} {apiName} already resolved","ON_INIT_SETTINGS_FAILED":"[INFO]: VWO-SDK {date} VWO settings could not be fetched","POLLING_SET_SETTINGS":"There\'s a change in settings from the last settings fetched. Hence, instantiating a new VWO client internally","POLLING_NO_CHANGE_IN_SETTINGS":"No change in settings with the last settings fetched. Hence, not instantiating new VWO client","SETTINGS_FETCH_SUCCESS":"Settings fetched successfully","SETTINGS_FETCH_FROM_CACHE":"Settings retrieved from cache","SETTINGS_BACKGROUND_UPDATE":"Settings asynchronously fetched and cache updated","SETTINGS_CACHE_MISS":"Settings not in cache; fetching from server","SETTINGS_PASSED_IN_INIT_VALID":"Settings passed in init are valid","CLIENT_INITIALIZED":"VWO Client initialized","STORED_VARIATION_FOUND":"Variation {variationKey} found in storage for the user {userId} for the {experimentType} experiment:{experimentKey}","USER_PART_OF_CAMPAIGN":"User ID:{userId} is {notPart} part of experiment:{campaignKey}","SEGMENTATION_SKIP":"For userId:{userId} of experiment:{campaignKey}, segments was missing. Hence, skipping segmentation","SEGMENTATION_STATUS":"Segmentation {status} for userId:{userId} of experiment:{campaignKey}","USER_CAMPAIGN_BUCKET_INFO":"User ID:{userId} for experiment:{campaignKey} {status}","WHITELISTING_SKIP":"Whitelisting is not used for experiment:{campaignKey}, hence skipping evaluating whitelisting {variation} for User ID:{userId}","WHITELISTING_STATUS":"User ID:{userId} for experiment:{campaignKey} {status} whitelisting {variationString}","VARIATION_RANGE_ALLOCATION":"Variation:{variationKey} of experiment:{campaignKey} having weight:{variationWeight} got bucketing range: ({startRange} - {endRange})","IMPACT_ANALYSIS":"Tracking feature:{featureKey} being {status} for Impact Analysis Campaign for the user {userId}","MEG_SKIP_ROLLOUT_EVALUATE_EXPERIMENTS":"No rollout rule found for feature:{featureKey}. Hence, evaluating experiments","MEG_CAMPAIGN_FOUND_IN_STORAGE":"Campaign {campaignKey} found in storage for user ID:{userId}","MEG_CAMPAIGN_ELIGIBLE":"Campaign {campaignKey} is eligible for user ID:{userId}","MEG_WINNER_CAMPAIGN":"MEG: Campaign {campaignKey} is the winner for group {groupId} for user ID:{userId} {algo}","SETTINGS_UPDATED":"Settings fetched and updated successfully on the current VWO client instance when API: {apiName} got called having isViaWebhook param as {isViaWebhook}","NETWORK_CALL_SUCCESS":"Impression for {event} - {endPoint} was successfully received by VWO having Account ID:{accountId}, User ID:{userId} and UUID: {uuid}","EVENT_BATCH_DEFAULTS":"{parameter} in SDK configuration is missing or invalid (should be greater than {minLimit}). Using default value: {defaultValue}","EVENT_QUEUE":"Event with payload:{event} pushed to the {queueType} queue","EVENT_BATCH_After_FLUSHING":"Event queue having {length} events has been flushed {manually}","IMPRESSION_BATCH_SUCCESS":"Impression event - {endPoint} was successfully received by VWO having Account ID:{accountId}","IMPRESSION_BATCH_FAILED":"Batch events couldn\\"t be received by VWO. Calling Flush Callback with error and data","EVENT_BATCH_MAX_LIMIT":"{parameter} passed in SDK configuration is greater than the maximum limit of {maxLimit}. Setting it to the maximum limit","GATEWAY_AND_BATCH_EVENTS_CONFIG_MISMATCH":"Batch Events config passed in SDK configuration will not work as the gatewayService is already configured. Please check the documentation for more details","PROXY_URL_SET":"Proxy URL is set and will be used for all network requests","ALIAS_ENABLED":"Aliasing enabled, using {userId} as userId","NETWORK_CALL_SUCCESS_WITH_RETRIES":"Network call for {extraData} succeeded after {attempts} retry attempt(s). Previous attempts failed with error: {err}"}')},7885:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkManager=void 0;var o=n(4782),i=n(415),a=n(4036),s=n(5399),u=n(1359),c=n(3293),l=n(4237),g=n(1263),d=n(1703),p=n(8754),f=n(7128),h=(n(2346),function(){function e(){}return e.prototype.validateRetryConfig=function(e){var t=r({},e),n=!1;return(0,u.isBoolean)(t.shouldRetry)||(t.shouldRetry=s.Constants.DEFAULT_RETRY_CONFIG.shouldRetry,n=!0),(!(0,u.isNumber)(t.maxRetries)||!Number.isInteger(t.maxRetries)||t.maxRetries<1)&&(t.maxRetries=s.Constants.DEFAULT_RETRY_CONFIG.maxRetries,n=!0),(!(0,u.isNumber)(t.initialDelay)||!Number.isInteger(t.initialDelay)||t.initialDelay<1)&&(t.initialDelay=s.Constants.DEFAULT_RETRY_CONFIG.initialDelay,n=!0),(!(0,u.isNumber)(t.backoffMultiplier)||!Number.isInteger(t.backoffMultiplier)||t.backoffMultiplier<2)&&(t.backoffMultiplier=s.Constants.DEFAULT_RETRY_CONFIG.backoffMultiplier,n=!0),n&&c.LogManager.Instance.errorLog("INVALID_RETRY_CONFIG",{retryConfig:JSON.stringify(t)},{an:l.ApiEnum.INIT}),n?s.Constants.DEFAULT_RETRY_CONFIG:t},e.prototype.attachClient=function(e,t,n){if(void 0===n&&(n=!1),!this.retryConfig||t){var o=s.Constants.DEFAULT_RETRY_CONFIG,i=r(r({},o),t||{});this.retryConfig=this.validateRetryConfig(i),n&&(this.retryConfig.shouldRetry=!1)}"undefined"==typeof XMLHttpRequest?this.client=e||new g.NetworkServerLessClient:(c.LogManager.Instance.debug((0,p.buildMessage)(f.DebugLogMessagesEnum.USING_API_WITH_PROCESS,{api:"xhr",process:"undefined"})),this.client=e||new d.NetworkBrowserClient),this.config=new a.GlobalRequestModel(null,null,null,null)},e.prototype.getRetryConfig=function(){return r({},this.retryConfig)},Object.defineProperty(e,"Instance",{get:function(){return this.instance=this.instance||new e,this.instance},enumerable:!1,configurable:!0}),e.prototype.setConfig=function(e){this.config=e},e.prototype.getConfig=function(){return this.config},e.prototype.createRequest=function(e){return(new i.RequestHandler).createRequest(e,this.config)},e.prototype.get=function(e){var t=new o.Deferred,n=this.createRequest(e);return n.getUrl()?this.client.GET(n).then((function(e){t.resolve(e)})).catch((function(e){t.reject(e)})):t.reject(new Error("no url found")),t.promise},e.prototype.post=function(e){var t=new o.Deferred,n=this.createRequest(e);return n.getUrl()?this.client.POST(n).then((function(e){t.resolve(e)})).catch((function(e){t.reject(e)})):t.reject(new Error("no url found")),t.promise},e}());t.NetworkManager=h},7928:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateGroups=void 0,t.getFeatureKeysFromGroup=I;var i=n(5399),a=n(3780),s=n(4273),u=n(7128),c=n(2144),l=n(2365),g=n(6775),d=n(4580),p=n(973),f=n(6195),h=n(9181),v=n(1359),E=n(2245),y=n(8667),m=n(8754);function I(e,t){var n=(0,h.getCampaignsByGroupId)(e,t);return{featureKeys:(0,h.getFeatureKeysFromCampaignIds)(e,n),groupCampaignIds:n}}t.evaluateGroups=function(e,t,n,i,a,s){return r(void 0,void 0,void 0,(function(){var r,u,c,l,g,d,p,f,h,v,E,m;return o(this,(function(b){switch(b.label){case 0:r=[],u=new Map,c=I(e,n),l=c.featureKeys,g=c.groupCampaignIds,d=function(t){var n;return o(this,(function(o){switch(o.label){case 0:return n=(0,y.getFeatureFromKey)(e,t),r.includes(t)?[2,"continue"]:[4,_(e,n,i,r,s,a)];case 1:return o.sent()&&e.getFeatures().forEach((function(e){e.getKey()===t&&e.getRulesLinkedCampaign().forEach((function(e){(g.includes(e.getId().toString())||g.includes("".concat(e.getId(),"_").concat(e.getVariations()[0].getId()).toString()))&&(u.has(t)||u.set(t,[]),-1===u.get(t).findIndex((function(t){return t.ruleKey===e.getRuleKey()}))&&u.get(t).push(e))}))})),[2]}}))},p=0,f=l,b.label=1;case 1:return p<f.length?(h=f[p],[5,d(h)]):[3,4];case 2:b.sent(),b.label=3;case 3:return p++,[3,1];case 4:return[4,S(e,u,a,s)];case 5:return v=b.sent(),E=v.eligibleCampaigns,m=v.eligibleCampaignsWithStorage,[4,T(e,t.getKey(),E,m,n,a,s)];case 6:return[2,b.sent()]}}))}))};var _=function(e,t,n,i,a,l){return r(void 0,void 0,void 0,(function(){var r,g,p,h,I,_,S;return o(this,(function(o){switch(o.label){case 0:if(n.has(t.getKey())&&"rolloutId"in n.get(t.getKey()))return[2,!0];if(!((r=(0,y.getSpecificRulesBasedOnType)(t,s.CampaignTypeEnum.ROLLOUT)).length>0))return[3,5];g=null,p=0,h=r,o.label=1;case 1:return p<h.length?(I=h[p],[4,(0,f.evaluateRule)(e,t,I,l,n,null,a,{})]):[3,4];case 2:return o.sent().preSegmentationResult?(g=I,[3,4]):[3,3];case 3:return p++,[3,1];case 4:return null!==g&&(_=(new c.CampaignModel).modelFromDictionary(g),S=(0,E.evaluateTrafficAndGetVariation)(e,_,l.getId()),(0,v.isObject)(S)&&Object.keys(S).length>0)?(n.set(t.getKey(),{rolloutId:g.id,rolloutKey:g.key,rolloutVariationId:g.variations[0].id}),[2,!0]):(i.push(t.getKey()),[2,!1]);case 5:return d.LogManager.Instance.info((0,m.buildMessage)(u.InfoLogMessagesEnum.MEG_SKIP_ROLLOUT_EVALUATE_EXPERIMENTS,{featureKey:t.getKey()})),[2,!0]}}))}))},S=function(e,t,n,i){return r(void 0,void 0,void 0,(function(){var r,l,g,f,v,E,y,I,_,S,T,b,A;return o(this,(function(O){switch(O.label){case 0:r=[],l=[],g=[],f=Array.from(t),v=0,E=f,O.label=1;case 1:if(!(v<E.length))return[3,6];y=E[v],I=y[0],_=y[1],S=function(t){var f;return o(this,(function(o){switch(o.label){case 0:return[4,(new a.StorageDecorator).getFeatureFromStorage(I,n,i)];case 1:return(null==(f=o.sent())?void 0:f.experimentVariationId)&&f.experimentKey&&f.experimentKey===t.getKey()&&(0,h.getVariationFromCampaignKey)(e,f.experimentKey,f.experimentVariationId)?(d.LogManager.Instance.info((0,m.buildMessage)(u.InfoLogMessagesEnum.MEG_CAMPAIGN_FOUND_IN_STORAGE,{campaignKey:f.experimentKey,userId:n.getId()})),-1===l.findIndex((function(e){return e.key===t.getKey()}))&&l.push(t),[2,"continue"]):[4,(new p.CampaignDecisionService).getPreSegmentationDecision((new c.CampaignModel).modelFromDictionary(t),n)];case 2:return o.sent()&&(new p.CampaignDecisionService).isUserPartOfCampaign(n.getId(),t)?(d.LogManager.Instance.info((0,m.buildMessage)(u.InfoLogMessagesEnum.MEG_CAMPAIGN_ELIGIBLE,{campaignKey:t.getType()===s.CampaignTypeEnum.AB?t.getKey():t.getName()+"_"+t.getRuleKey(),userId:n.getId()})),r.push(t),[2,"continue"]):(g.push(t),[2])}}))},T=0,b=_,O.label=2;case 2:return T<b.length?(A=b[T],[5,S(A)]):[3,5];case 3:O.sent(),O.label=4;case 4:return T++,[3,2];case 5:return v++,[3,1];case 6:return[2,Promise.resolve({eligibleCampaigns:r,eligibleCampaignsWithStorage:l,inEligibleCampaigns:g})]}}))}))},T=function(e,t,n,a,c,l,g){return r(void 0,void 0,void 0,(function(){var r,p,f,E;return o(this,(function(o){return r=null,p=(0,h.getCampaignIdsFromFeatureKey)(e,t),f=(0,v.isUndefined)(null===(E=null==e?void 0:e.getGroups()[c])||void 0===E?void 0:E.et)?i.Constants.RANDOM_ALGO:e.getGroups()[c].et,1===a.length?(r=a[0],d.LogManager.Instance.info((0,m.buildMessage)(u.InfoLogMessagesEnum.MEG_WINNER_CAMPAIGN,{campaignKey:a[0].getType()===s.CampaignTypeEnum.AB?a[0].getKey():a[0].getName()+"_"+a[0].getRuleKey(),groupId:c,userId:l.getId(),algo:""}))):a.length>1&&f===i.Constants.RANDOM_ALGO?r=b(a,l,p,c,g):a.length>1&&(r=A(e,a,l,p,c,g)),0===a.length&&(1===n.length?(r=n[0],d.LogManager.Instance.info((0,m.buildMessage)(u.InfoLogMessagesEnum.MEG_WINNER_CAMPAIGN,{campaignKey:n[0].getType()===s.CampaignTypeEnum.AB?n[0].getKey():n[0].getName()+"_"+n[0].getRuleKey(),groupId:c,userId:l.getId(),algo:""}))):n.length>1&&f===i.Constants.RANDOM_ALGO?r=b(n,l,p,c,g):n.length>1&&(r=A(e,n,l,p,c,g))),[2,r]}))}))},b=function(e,t,n,r,o){e.forEach((function(t){t.weight=Math.round(100/e.length*1e4)/1e4})),e=e.map((function(e){return(new l.VariationModel).modelFromDictionary(e)})),(0,h.setCampaignAllocation)(e);var c=(new p.CampaignDecisionService).getVariation(e,(new g.DecisionMaker).calculateBucketValue((0,h.getBucketingSeed)(t.getId(),void 0,r)));return d.LogManager.Instance.info((0,m.buildMessage)(u.InfoLogMessagesEnum.MEG_WINNER_CAMPAIGN,{campaignKey:c.getType()===s.CampaignTypeEnum.AB?c.getKey():c.getKey()+"_"+c.getRuleKey(),groupId:r,userId:t.getId(),algo:"using random algorithm"})),c&&((new a.StorageDecorator).setDataInStorage({featureKey:"".concat(i.Constants.VWO_META_MEG_KEY).concat(r),context:t,experimentId:c.getId(),experimentKey:c.getKey(),experimentVariationId:c.getType()===s.CampaignTypeEnum.PERSONALIZE?c.getVariations()[0].getId():-1},o),n.includes(c.getId()))?c:null},A=function(e,t,n,r,o,c){for(var f=null,E=!1,I=(0,v.isUndefined)(e.getGroups()[o].p)?{}:e.getGroups()[o].p,_=(0,v.isUndefined)(e.getGroups()[o].wt)?{}:e.getGroups()[o].wt,S=0;S<I.length;S++){for(var T=0;T<t.length;T++){if(t[T].id==I[S]){f=(0,y.cloneObject)(t[T]),E=!0;break}if(t[T].id+"_"+t[T].variations[0].id===I[S]){f=(0,y.cloneObject)(t[T]),E=!0;break}}if(!0===E)break}if(null===f){var b=[];for(S=0;S<t.length;S++){var A=t[S].id;if((0,v.isUndefined)(_[A])){if(!(0,v.isUndefined)(_[A+"_"+t[S].variations[0].id])){var O;(O=(0,y.cloneObject)(t[S])).weight=_[A+"_"+t[S].variations[0].id],b.push(O)}}else(O=(0,y.cloneObject)(t[S])).weight=_[A],b.push(O)}b=b.map((function(e){return(new l.VariationModel).modelFromDictionary(e)})),(0,h.setCampaignAllocation)(b),f=(new p.CampaignDecisionService).getVariation(b,(new g.DecisionMaker).calculateBucketValue((0,h.getBucketingSeed)(n.getId(),void 0,o)))}return f?d.LogManager.Instance.info((0,m.buildMessage)(u.InfoLogMessagesEnum.MEG_WINNER_CAMPAIGN,{campaignKey:f.type===s.CampaignTypeEnum.AB?f.key:f.key+"_"+f.ruleKey,groupId:o,userId:n.getId(),algo:"using advanced algorithm"})):d.LogManager.Instance.info("No winner campaign found for MEG group: ".concat(o)),f&&((new a.StorageDecorator).setDataInStorage({featureKey:"".concat(i.Constants.VWO_META_MEG_KEY).concat(o),context:n,experimentId:f.id,experimentKey:f.key,experimentVariationId:f.type===s.CampaignTypeEnum.PERSONALIZE?f.variations[0].id:-1},c),r.includes(f.id))?f:null}},8005:e=>{!function(){const t=e=>(new TextEncoder).encode(e);function n(e,n){let r,o,i,a,s,u,c,l;for("string"==typeof e&&(e=t(e)),r=3&e.length,o=e.length-r,i=n,s=3432918353,u=461845907,l=0;l<o;)c=255&e[l]|(255&e[++l])<<8|(255&e[++l])<<16|(255&e[++l])<<24,++l,c=(65535&c)*s+(((c>>>16)*s&65535)<<16)&4294967295,c=c<<15|c>>>17,c=(65535&c)*u+(((c>>>16)*u&65535)<<16)&4294967295,i^=c,i=i<<13|i>>>19,a=5*(65535&i)+((5*(i>>>16)&65535)<<16)&4294967295,i=27492+(65535&a)+((58964+(a>>>16)&65535)<<16);switch(c=0,r){case 3:c^=(255&e[l+2])<<16;case 2:c^=(255&e[l+1])<<8;case 1:c^=255&e[l],c=(65535&c)*s+(((c>>>16)*s&65535)<<16)&4294967295,c=c<<15|c>>>17,c=(65535&c)*u+(((c>>>16)*u&65535)<<16)&4294967295,i^=c}return i^=e.length,i^=i>>>16,i=2246822507*(65535&i)+((2246822507*(i>>>16)&65535)<<16)&4294967295,i^=i>>>13,i=3266489909*(65535&i)+((3266489909*(i>>>16)&65535)<<16)&4294967295,i^=i>>>16,i>>>0}const r=n;r.v2=function(e,n){"string"==typeof e&&(e=t(e));let r,o=e.length,i=n^o,a=0;for(;o>=4;)r=255&e[a]|(255&e[++a])<<8|(255&e[++a])<<16|(255&e[++a])<<24,r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16),r^=r>>>24,r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^r,o-=4,++a;switch(o){case 3:i^=(255&e[a+2])<<16;case 2:i^=(255&e[a+1])<<8;case 1:i^=255&e[a],i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)}return i^=i>>>13,i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16),i^=i>>>15,i>>>0},r.v3=n,e.exports=r}()},8011:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentEvaluator=void 0;var i=n(3780),a=n(4580),s=n(8792),u=n(1359),c=n(4076),l=n(3769),g=n(9750),d=n(4237),p=n(8667),f=function(){function e(){}return e.prototype.isSegmentationValid=function(e,t){return r(this,void 0,void 0,(function(){var n,r,i,a;return o(this,(function(o){switch(o.label){case 0:switch(n=(0,l.getKeyValue)(e),r=n.key,i=n.value,a=i,r){case c.SegmentOperatorValueEnum.NOT:return[3,1];case c.SegmentOperatorValueEnum.AND:return[3,3];case c.SegmentOperatorValueEnum.OR:return[3,5];case c.SegmentOperatorValueEnum.CUSTOM_VARIABLE:return[3,7];case c.SegmentOperatorValueEnum.USER:return[3,9];case c.SegmentOperatorValueEnum.UA:return[3,10];case c.SegmentOperatorValueEnum.IP:return[3,11];case c.SegmentOperatorValueEnum.BROWSER_VERSION:return[3,12];case c.SegmentOperatorValueEnum.OS_VERSION:return[3,13]}return[3,14];case 1:return[4,this.isSegmentationValid(a,t)];case 2:return[2,!o.sent()];case 3:return[4,this.every(a,t)];case 4:case 6:case 8:return[2,o.sent()];case 5:return[4,this.some(a,t)];case 7:return[4,(new g.SegmentOperandEvaluator).evaluateCustomVariableDSL(a,t,this.context)];case 9:return[2,(new g.SegmentOperandEvaluator).evaluateUserDSL(a,t)];case 10:return[2,(new g.SegmentOperandEvaluator).evaluateUserAgentDSL(a,this.context)];case 11:return[2,(new g.SegmentOperandEvaluator).evaluateStringOperandDSL(a,this.context,c.SegmentOperatorValueEnum.IP)];case 12:return[2,(new g.SegmentOperandEvaluator).evaluateStringOperandDSL(a,this.context,c.SegmentOperatorValueEnum.BROWSER_VERSION)];case 13:return[2,(new g.SegmentOperandEvaluator).evaluateStringOperandDSL(a,this.context,c.SegmentOperatorValueEnum.OS_VERSION)];case 14:return[2,!1]}}))}))},e.prototype.some=function(e,t){return r(this,void 0,void 0,(function(){var n,r,i,s,u,l,g,f,h,v,E,y,m,I;return o(this,(function(_){switch(_.label){case 0:n={},r=0,i=!1,s=0,u=e,_.label=1;case 1:if(!(s<u.length))return[3,12];for(E in l=u[s],g=function(e){var t,s,u,g,p,h,v,E;return o(this,(function(o){switch(o.label){case 0:return e!==c.SegmentOperatorValueEnum.OPERATING_SYSTEM&&e!==c.SegmentOperatorValueEnum.BROWSER_AGENT&&e!==c.SegmentOperatorValueEnum.DEVICE_TYPE&&e!==c.SegmentOperatorValueEnum.DEVICE||(i=!0,t=l[e],n[e]||(n[e]=[]),(Array.isArray(t)?t:[t]).forEach((function(t){"string"==typeof t&&n[e].push(t)})),r++),e!==c.SegmentOperatorValueEnum.FEATURE_ID?[3,3]:(s=l[e],u=Object.keys(s)[0],"on"!==(g=s[u])&&"off"!==g?[3,3]:(p=f.settings.getFeatures(),(h=p.find((function(e){return e.getId()===parseInt(u)})))?(v=h.getKey(),[4,f.checkInUserStorage(f.settings,v,f.context)]):[3,2]));case 1:return E=o.sent(),"off"===g?[2,{value:!E}]:[2,{value:E}];case 2:return a.LogManager.Instance.errorLog("FEATURE_NOT_FOUND_WITH_ID",{featureId:u},{an:d.ApiEnum.GET_FLAG,uuid:f.context.getUuid(),sId:f.context.getSessionId()}),[2,{value:null}];case 3:return[2]}}))},f=this,v=[],h=l)v.push(E);y=0,_.label=2;case 2:return y<v.length?(E=v[y])in h?[5,g(E)]:[3,4]:[3,5];case 3:if("object"==typeof(m=_.sent()))return[2,m.value];_.label=4;case 4:return y++,[3,2];case 5:if(!i||r!==e.length)return[3,9];_.label=6;case 6:return _.trys.push([6,8,,9]),[4,this.checkUserAgentParser(n)];case 7:return[2,_.sent()];case 8:return I=_.sent(),a.LogManager.Instance.errorLog("USER_AGENT_VALIDATION_ERROR",{err:(0,p.getFormattedErrorMessage)(I)},{an:d.ApiEnum.GET_FLAG,uuid:this.context.getUuid(),sId:this.context.getSessionId()}),[3,9];case 9:return[4,this.isSegmentationValid(l,t)];case 10:if(_.sent())return[2,!0];_.label=11;case 11:return s++,[3,1];case 12:return[2,!1]}}))}))},e.prototype.every=function(e,t){return r(this,void 0,void 0,(function(){var n,r,i,a;return o(this,(function(o){switch(o.label){case 0:n={},r=0,i=e,o.label=1;case 1:return r<i.length?(a=i[r],c.SegmentOperatorValueEnum.COUNTRY in a||c.SegmentOperatorValueEnum.REGION in a||c.SegmentOperatorValueEnum.CITY in a?(this.addLocationValuesToMap(a,n),Object.keys(n).length!==e.length?[3,3]:[4,this.checkLocationPreSegmentation(n)]):[3,4]):[3,7];case 2:return[2,o.sent()];case 3:return[3,6];case 4:return[4,this.isSegmentationValid(a,t)];case 5:if(!o.sent())return[2,!1];o.label=6;case 6:return r++,[3,1];case 7:return[2,!0]}}))}))},e.prototype.addLocationValuesToMap=function(e,t){c.SegmentOperatorValueEnum.COUNTRY in e&&(t[c.SegmentOperatorValueEnum.COUNTRY]=e[c.SegmentOperatorValueEnum.COUNTRY]),c.SegmentOperatorValueEnum.REGION in e&&(t[c.SegmentOperatorValueEnum.REGION]=e[c.SegmentOperatorValueEnum.REGION]),c.SegmentOperatorValueEnum.CITY in e&&(t[c.SegmentOperatorValueEnum.CITY]=e[c.SegmentOperatorValueEnum.CITY])},e.prototype.checkLocationPreSegmentation=function(e){return r(this,void 0,void 0,(function(){var t,n,r,i,a,s,u,c,l;return o(this,(function(o){return null===(t=this.context)||void 0===t||t.getIpAddress(),(null===(r=null===(n=this.context)||void 0===n?void 0:n.getVwo())||void 0===r?void 0:r.getLocation())&&void 0!==(null===(a=null===(i=this.context)||void 0===i?void 0:i.getVwo())||void 0===a?void 0:a.getLocation())&&null!==(null===(u=null===(s=this.context)||void 0===s?void 0:s.getVwo())||void 0===u?void 0:u.getLocation())?[2,this.valuesMatch(e,null===(l=null===(c=this.context)||void 0===c?void 0:c.getVwo())||void 0===l?void 0:l.getLocation())]:[2,!1]}))}))},e.prototype.checkUserAgentParser=function(e){return r(this,void 0,void 0,(function(){var t,n,r,i,s,u,c,l;return o(this,(function(o){return(null===(t=this.context)||void 0===t?void 0:t.getUserAgent())&&void 0!==(null===(n=this.context)||void 0===n?void 0:n.getUserAgent())?(null===(i=null===(r=this.context)||void 0===r?void 0:r.getVwo())||void 0===i?void 0:i.getUaInfo())&&void 0!==(null===(u=null===(s=this.context)||void 0===s?void 0:s.getVwo())||void 0===u?void 0:u.getUaInfo())?[2,this.checkValuePresent(e,null===(l=null===(c=this.context)||void 0===c?void 0:c.getVwo())||void 0===l?void 0:l.getUaInfo())]:[2,!1]:(a.LogManager.Instance.errorLog("INVALID_USER_AGENT_IN_CONTEXT_FOR_PRE_SEGMENTATION",{},{an:d.ApiEnum.GET_FLAG,uuid:this.context.getUuid(),sId:this.context.getSessionId()}),[2,!1])}))}))},e.prototype.checkInUserStorage=function(e,t,n){return r(this,void 0,void 0,(function(){var e,r;return o(this,(function(o){switch(o.label){case 0:return e=new s.StorageService,[4,(new i.StorageDecorator).getFeatureFromStorage(t,n,e)];case 1:return r=o.sent(),(0,u.isObject)(r)&&Object.keys(r).length>0?[2,!0]:[2,!1]}}))}))},e.prototype.checkValuePresent=function(e,t){return r(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(o){for(r in n=function(n){if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];r.forEach((function(e,t){r[t]=e.toLowerCase()}));for(var o=t[n],i=0,a=r;i<a.length;i++){var s=a[i];if(s.startsWith("wildcard(")&&s.endsWith(")")){var u=s.slice(9,-1);if(new RegExp(u.replace(/\*/g,".*"),"i").test(o))return{value:!0}}}if(r.includes(null==o?void 0:o.toLowerCase()))return{value:!0}}},t)if("object"==typeof(i=n(r)))return[2,i.value];return[2,!1]}))}))},e.prototype.valuesMatch=function(e,t){return r(this,void 0,void 0,(function(){var n,r,i,a,s,u,c;return o(this,(function(o){for(n=0,r=Object.entries(e);n<r.length;n++){if(i=r[n],a=i[0],s=i[1],!(a in t))return[2,!1];if(u=this.normalizeValue(s),c=this.normalizeValue(t[a]),u!==c)return[2,!1]}return[2,!0]}))}))},e.prototype.normalizeValue=function(e){return null==e?null:e.toString().replace(/^"|"$/g,"").trim()},e}();t.SegmentEvaluator=f},8092:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EdgeConfigModel=void 0;var r=n(5399),o=function(){function e(){this.shouldWaitForTrackingCalls=!0}return e.prototype.modelFromDictionary=function(e){return e.shouldWaitForTrackingCalls&&(this.shouldWaitForTrackingCalls=e.shouldWaitForTrackingCalls),e.maxEventsToBatch?this.maxEventsToBatch=e.maxEventsToBatch:this.maxEventsToBatch=r.Constants.MAX_EVENTS_PER_REQUEST,this},e.prototype.getShouldWaitForTrackingCalls=function(){return this.shouldWaitForTrackingCalls},e.prototype.getMaxEventsToBatch=function(){return this.maxEventsToBatch},e}();t.EdgeConfigModel=o},8164:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SetAttributeApi=void 0;var i=n(9693),a=n(8925),s=n(4140),u=function(){function e(){}return e.prototype.setAttribute=function(e,t,n){return r(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return(0,a.getShouldWaitForTrackingCalls)()?[4,c(e,t,n)]:[3,2];case 1:return r.sent(),[3,3];case 2:c(e,t,n),r.label=3;case 3:return[2]}}))}))},e}();t.SetAttributeApi=u;var c=function(e,t,n){return r(void 0,void 0,void 0,(function(){var r,u;return o(this,(function(o){switch(o.label){case 0:return r=(0,a.getEventsBaseProperties)(i.EventEnum.VWO_SYNC_VISITOR_PROP,encodeURIComponent(n.getUserAgent()),n.getIpAddress()),u=(0,a.getAttributePayloadData)(e,n.getId(),i.EventEnum.VWO_SYNC_VISITOR_PROP,t,n.getUserAgent(),n.getIpAddress(),n.getSessionId()),s.BatchEventsQueue.Instance?(s.BatchEventsQueue.Instance.enqueue(u),[3,3]):[3,1];case 1:return[4,(0,a.sendPostApiRequest)(r,u,n.getId())];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))}},8202:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.HttpMethodEnum=void 0,function(e){e.GET="GET",e.POST="POST"}(n||(t.HttpMethodEnum=n={}))},8205:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.extractDecisionKeys=function(e){void 0===e&&(e={});var t={};return e.rolloutId&&(t.rId=e.rolloutId),e.rolloutVariationId&&(t.rvId=e.rolloutVariationId),e.experimentId&&(t.eId=e.experimentId),e.experimentVariationId&&(t.evId=e.experimentVariationId),t},t.sendDebugEventToVWO=function(){return r(this,arguments,void 0,(function(e){var t,n;return void 0===e&&(e={}),o(this,(function(r){switch(r.label){case 0:return t=(0,i.getEventsBaseProperties)(a.EventEnum.VWO_DEBUGGER_EVENT,null,null),n=(0,i.getDebuggerEventPayload)(e),s.BatchEventsQueue.Instance?(s.BatchEventsQueue.Instance.enqueue(n),[3,3]):[3,1];case 1:return[4,(0,i.sendEvent)(t,n,a.EventEnum.VWO_DEBUGGER_EVENT).catch((function(){}))];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))};var i=n(8925),a=n(9693),s=n(4140)},8667:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.cloneObject=function(e){return e?JSON.parse(JSON.stringify(e)):e},t.getCurrentTime=function(){return(new Date).toISOString()},t.getCurrentUnixTimestamp=function(){return Math.ceil(+new Date/1e3)},t.getCurrentUnixTimestampInMillis=function(){return+new Date},t.getRandomNumber=function(){return Math.random()},t.getSpecificRulesBasedOnType=function(e,t){return void 0===t&&(t=null),e&&!(null==e?void 0:e.getRulesLinkedCampaign())?[]:e&&e.getRulesLinkedCampaign()&&t&&(0,a.isString)(t)?e.getRulesLinkedCampaign().filter((function(e){return(new i.CampaignModel).modelFromDictionary(e).getType()===t})):e.getRulesLinkedCampaign()},t.getAllExperimentRules=function(e){return(null==e?void 0:e.getRulesLinkedCampaign().filter((function(e){return e.getType()===o.CampaignTypeEnum.AB||e.getType()===o.CampaignTypeEnum.PERSONALIZE})))||[]},t.getFeatureFromKey=function(e,t){var n;return null===(n=null==e?void 0:e.getFeatures())||void 0===n?void 0:n.find((function(e){return e.getKey()===t}))},t.doesEventBelongToAnyFeature=function(e,t){return t.getFeatures().some((function(t){return t.getMetrics().some((function(t){return t.getIdentifier()===e}))}))},t.addLinkedCampaignsToSettings=function(e){for(var t=new Map(e.getCampaigns().map((function(e){return[e.getId(),e]}))),n=0,o=e.getFeatures();n<o.length;n++){var a=o[n],s=a.getRules().map((function(e){var n=t.get(e.getCampaignId());if(!n)return null;var o=r(r({key:n.getKey()},n),{ruleKey:e.getRuleKey()});if(e.getVariationId()){var i=n.getVariations().find((function(t){return t.getId()===e.getVariationId()}));i&&(o.variations=[i])}return o})).filter((function(e){return null!==e})).map((function(e){var t=new i.CampaignModel;return t.modelFromDictionary(e),t}));a.setRulesLinkedCampaign(s)}},t.getFormattedErrorMessage=function(e){var t="";return e instanceof Error?t=e.message:"string"==typeof e?t=e:e&&"object"==typeof e&&(t=JSON.stringify(e)),t};var o=n(4273),i=n(2144),a=n(1359)},8694:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UrlUtil=void 0;var r=n(5399),o=n(470),i=n(1359);t.UrlUtil={init:function(e){var n=(void 0===e?{}:e).collectionPrefix;return n&&(0,i.isString)(n)&&(t.UrlUtil.collectionPrefix=n),t.UrlUtil},getBaseUrl:function(){return o.SettingsService.Instance.hostname},getUpdatedBaseUrl:function(e){return t.UrlUtil.collectionPrefix&&e===r.Constants.HOST_NAME?"".concat(e,"/").concat(t.UrlUtil.collectionPrefix):e}}},8754:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildMessage=function(e,t){void 0===e&&(e=""),void 0===t&&(t={});try{return e.replace(s,(function(n,r,o){if("{"===e[o-1]&&"}"===e[o+n.length])return r;var a=t[r];return null==a?"":(0,i.isFunction)(a)?a():a}))}catch(t){return e}},t.sendLogToVWO=function(e,t,n){void 0===n&&(n={});var i=e;if(i=i+"-"+r.Constants.SDK_NAME+"-"+r.Constants.SDK_VERSION,Object.keys(n).length>0&&(i=i+" "+JSON.stringify(n)),!u.has(i)){u.add(i);var s=(0,a.getEventsBaseProperties)(o.EventEnum.VWO_LOG_EVENT),c=(0,a.getMessagingEventPayload)(t,e,o.EventEnum.VWO_LOG_EVENT,n);(0,a.sendEvent)(s,c,o.EventEnum.VWO_LOG_EVENT).catch((function(){}))}};var r=n(5399),o=n(9693),i=n(1359),a=n(8925),s=/\{([0-9a-zA-Z_]+)\}/g,u=new Set},8792:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.StorageService=void 0;var i=n(1172),a=n(9401),s=n(4580),u=n(1359),c=n(4782),l=n(4237),g=function(){function e(){this.storageData={}}return e.prototype.getDataInStorage=function(e,t){return r(this,void 0,void 0,(function(){var n,r;return o(this,(function(o){return n=new c.Deferred,r=a.Storage.Instance.getConnector(),(0,u.isNull)(r)||(0,u.isUndefined)(r)?n.resolve(i.StorageEnum.STORAGE_UNDEFINED):r.get(e,t.getId()).then((function(e){n.resolve(e)})).catch((function(e){s.LogManager.Instance.errorLog("ERROR_READING_STORED_DATA_IN_STORAGE",{err:e},{an:l.ApiEnum.GET_FLAG,uuid:t.getUuid(),sId:t.getSessionId()}),n.resolve(i.StorageEnum.NO_DATA_FOUND)})),[2,n.promise]}))}))},e.prototype.setDataInStorage=function(e){return r(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){return t=new c.Deferred,null==(n=a.Storage.Instance.getConnector())?t.resolve(!1):n.set(e).then((function(){t.resolve(!0)})).catch((function(){t.resolve(!1)})),[2,t.promise]}))}))},e}();t.StorageService=g},8854:e=>{"use strict";e.exports={}},8925:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.getSettingsPath=function(e,t){return{i:"".concat(e),r:Math.random(),a:t}},t.getTrackEventPath=function(e,t,n){return{event_type:e,account_id:t,uId:n,u:(0,s.getUUID)(n,t),sdk:u.Constants.SDK_NAME,"sdk-v":u.Constants.SDK_VERSION,random:(0,a.getRandomNumber)(),ap:u.Constants.PLATFORM,sId:(0,a.getCurrentUnixTimestamp)(),ed:JSON.stringify({p:"server"})}},t.getEventsBaseProperties=function(e,t,n,r,o){void 0===t&&(t=""),void 0===n&&(n=""),void 0===r&&(r=!1),void 0===o&&(o=null);var i=Object.assign({en:e,a:h.SettingsService.Instance.accountId,eTime:(0,a.getCurrentUnixTimestampInMillis)(),random:(0,a.getRandomNumber)(),p:"FS",visitor_ua:t,visitor_ip:n,sn:u.Constants.SDK_NAME,sv:u.Constants.SDK_VERSION});return r?i.a=o:i.env=h.SettingsService.Instance.sdkKey,i.url=u.Constants.HTTPS_PROTOCOL+y.UrlUtil.getBaseUrl()+g.UrlEnum.EVENTS,i},t._getEventBasePayload=O,t.getTrackUserPayloadData=function(e,t,n,r,o){var i=o.getId(),a=o.getUserAgent(),s=o.getIpAddress(),u=o.getCustomVariables(),c=o.getPostSegmentationVariables(),l=O(0,i,t,a,s);if(0!==o.getSessionId()&&(l.d.sessionId=o.getSessionId()),l.d.event.props.id=n,l.d.event.props.variation=r,l.d.event.props.isFirst=1,c&&c.length>0&&u&&Object.keys(u).length>0)for(var g=0,f=c;g<f.length;g++){var h=f[g];u[h]&&(l.d.visitor.props[h]=u[h])}return s&&(l.d.visitor.props.ip=s),p.LogManager.Instance.debug((0,E.buildMessage)(d.DebugLogMessagesEnum.IMPRESSION_FOR_TRACK_USER,{accountId:e.getAccountId(),userId:i,campaignId:n})),l},t.getTrackGoalPayloadData=function(e,t,n,r,o,i,a){void 0===o&&(o=""),void 0===i&&(i=""),void 0===a&&(a=0);var s=O(0,t,n,o,i);if(0!==a&&(s.d.sessionId=a),s.d.event.props.isCustomEvent=!0,s.d.event.props.variation=1,s.d.event.props.id=1,r&&(0,v.isObject)(r)&&Object.keys(r).length>0)for(var u in r)s.d.event.props[u]=r[u];return p.LogManager.Instance.debug((0,E.buildMessage)(d.DebugLogMessagesEnum.IMPRESSION_FOR_TRACK_GOAL,{eventName:n,accountId:e.getAccountId(),userId:t})),s},t.getAttributePayloadData=function(e,t,n,r,o,i,a){void 0===o&&(o=""),void 0===i&&(i=""),void 0===a&&(a=0);var s=O(0,t,n,o,i);0!==a&&(s.d.sessionId=a),s.d.event.props.isCustomEvent=!0,s.d.event.props[u.Constants.VWO_FS_ENVIRONMENT]=e.getSdkkey();for(var c=0,l=Object.entries(r);c<l.length;c++){var g=l[c],f=g[0],h=g[1];s.d.visitor.props[f]=h}return p.LogManager.Instance.debug((0,E.buildMessage)(d.DebugLogMessagesEnum.IMPRESSION_FOR_SYNC_VISITOR_PROP,{eventName:n,accountId:e.getAccountId(),userId:t})),s},t.sendPostApiRequest=function(e,t,n){return o(this,arguments,void 0,(function(e,t,n,r,o){var s,u,v,m,S,O,R,N,w;return void 0===r&&(r={}),void 0===o&&(o={}),i(this,(function(i){switch(i.label){case 0:return s=f.NetworkManager.Instance,u=s.getRetryConfig(),v={},m=t.d.visitor_ua,S=t.d.visitor_ip,m&&(v[c.HeadersEnum.USER_AGENT]=m),S&&(v[c.HeadersEnum.IP]=S),O=y.UrlUtil.getBaseUrl(),O=y.UrlUtil.getUpdatedBaseUrl(O),(R=new f.RequestModel(O,l.HttpMethodEnum.POST,g.UrlEnum.EVENTS,e,t,v,h.SettingsService.Instance.protocol,h.SettingsService.Instance.port,u)).setEventName(e.en),R.setUuid(t.d.visId),e.en===_.EventEnum.VWO_VARIATION_SHOWN?(N=b.ApiEnum.GET_FLAG,w=o.campaignType===A.CampaignTypeEnum.ROLLOUT||o.campaignType===A.CampaignTypeEnum.PERSONALIZE?"feature: ".concat(o.featureKey,", rule: ").concat(o.variationName):"feature: ".concat(o.featureKey,", rule: ").concat(o.campaignKey," and variation: ").concat(o.variationName),R.setCampaignId(t.d.event.props.id)):e.en!=_.EventEnum.VWO_VARIATION_SHOWN&&(e.en===_.EventEnum.VWO_SYNC_VISITOR_PROP?(N=b.ApiEnum.SET_ATTRIBUTE,w=N):e.en!==_.EventEnum.VWO_DEBUGGER_EVENT&&e.en!==_.EventEnum.VWO_LOG_EVENT&&e.en!==_.EventEnum.VWO_INIT_CALLED&&(N=b.ApiEnum.TRACK_EVENT,w="event: ".concat(e.en)),Object.keys(r).length>0&&R.setEventProperties(r)),[4,f.NetworkManager.Instance.post(R).then((function(r){if(r.getTotalAttempts()>0){var o=L(r,t,N,w);o.uuid=R.getUuid(),(0,T.sendDebugEventToVWO)(o)}Object.keys(I.UsageStatsUtil.getInstance().getUsageStats()).length>0&&I.UsageStatsUtil.getInstance().clearUsageStats(),p.LogManager.Instance.info((0,E.buildMessage)(d.InfoLogMessagesEnum.NETWORK_CALL_SUCCESS,{event:e.en,endPoint:g.UrlEnum.EVENTS,accountId:h.SettingsService.Instance.accountId,userId:n,uuid:t.d.visId}))})).catch((function(e){var n=L(e,t,N,w);n.uuid=R.getUuid(),(0,T.sendDebugEventToVWO)(n),p.LogManager.Instance.errorLog("NETWORK_CALL_FAILED",{method:l.HttpMethodEnum.POST,err:(0,a.getFormattedErrorMessage)(e)},{},!1)}))];case 1:return i.sent(),[2]}}))}))},t.getShouldWaitForTrackingCalls=function(){return R},t.setShouldWaitForTrackingCalls=function(e){R=e},t.getMessagingEventPayload=function(e,t,n,o){void 0===o&&(o={});var i=O(0,h.SettingsService.Instance.accountId+"_"+h.SettingsService.Instance.sdkKey,n);i.d.event.props[u.Constants.VWO_FS_ENVIRONMENT]=h.SettingsService.Instance.sdkKey,i.d.event.props.product=u.Constants.PRODUCT_NAME;var s={type:e,content:{title:t,dateTime:(0,a.getCurrentUnixTimestampInMillis)()},metaInfo:r({},o)};return i.d.event.props.data=s,i},t.getSDKInitEventPayload=function(e,t,n){var r=O(0,h.SettingsService.Instance.accountId+"_"+h.SettingsService.Instance.sdkKey,e);r.d.event.props[u.Constants.VWO_FS_ENVIRONMENT]=h.SettingsService.Instance.sdkKey,r.d.event.props.product=u.Constants.PRODUCT_NAME;var o={isSDKInitialized:!0,settingsFetchTime:t,sdkInitTime:n};return r.d.event.props.data=o,r},t.getSDKUsageStatsEventPayload=function(e,t){var n=O(0,h.SettingsService.Instance.accountId+"_"+h.SettingsService.Instance.sdkKey,e,"","",!0,t);return n.d.event.props.product=u.Constants.PRODUCT_NAME,n.d.event.props.vwoMeta=I.UsageStatsUtil.getInstance().getUsageStats(),n},t.getDebuggerEventPayload=function(e){void 0===e&&(e={});var t,n=h.SettingsService.Instance.accountId.toString(),o=h.SettingsService.Instance.sdkKey;e.uuid?t=e.uuid:(t=(0,s.getUUID)(n+"_"+o,n),e.uuid=t);var i=O(0,t,_.EventEnum.VWO_DEBUGGER_EVENT,"","",!1,null,!1);return i.d.event.props={},e.sId?i.d.sessionId=e.sId:e.sId=i.d.sessionId,e.an||(e.an=_.EventEnum.VWO_DEBUGGER_EVENT),i.d.event.props.vwoMeta=r(r({},e),{a:h.SettingsService.Instance.accountId,product:u.Constants.PRODUCT_NAME,sn:u.Constants.SDK_NAME,sv:u.Constants.SDK_VERSION,eventId:(0,s.getRandomUUID)(h.SettingsService.Instance.sdkKey)}),i},t.sendEvent=function(e,t,n){return o(this,void 0,void 0,(function(){var r,o,a,s,c,d,p;return i(this,(function(i){r=new m.Deferred,o=f.NetworkManager.Instance,a=o.getRetryConfig(),n===_.EventEnum.VWO_DEBUGGER_EVENT&&(a.shouldRetry=!1),s=y.UrlUtil.getBaseUrl(),c=h.SettingsService.Instance.protocol,d=h.SettingsService.Instance.port,n!==_.EventEnum.VWO_LOG_EVENT&&n!==_.EventEnum.VWO_USAGE_STATS&&n!==_.EventEnum.VWO_DEBUGGER_EVENT||(s=u.Constants.HOST_NAME,c=u.Constants.HTTPS_PROTOCOL,d=443),s=y.UrlUtil.getUpdatedBaseUrl(s);try{return(p=new f.RequestModel(s,l.HttpMethodEnum.POST,g.UrlEnum.EVENTS,e,t,null,c,d,a)).setEventName(e.en),o.post(p).then((function(e){r.resolve(e.getData())})).catch((function(e){r.reject(e)})),[2,r.promise]}catch(e){return r.resolve(!1),[2,r.promise]}return[2]}))}))},t.createNetWorkAndRetryDebugEvent=L;var a=n(8667),s=n(1720),u=n(5399),c=n(4019),l=n(8202),g=n(9528),d=n(7128),p=n(4580),f=n(6710),h=n(470),v=n(1359),E=n(8754),y=n(8694),m=n(4782),I=n(7241),_=n(9693),S=n(3368),T=n(8205),b=n(4237),A=n(4273);function O(e,t,n,r,o,i,c,l){void 0===r&&(r=""),void 0===o&&(o=""),void 0===i&&(i=!1),void 0===c&&(c=null),void 0===l&&(l=!0);var g,d=h.SettingsService.Instance.accountId;i&&(d=c),g=l?(0,s.getUUID)(t.toString(),d.toString()):t.toString();var p={vwo_sdkName:u.Constants.SDK_NAME,vwo_sdkVersion:u.Constants.SDK_VERSION};i||(p.vwo_envKey=h.SettingsService.Instance.sdkKey);var f={d:{msgId:"".concat(g,"-").concat((0,a.getCurrentUnixTimestampInMillis)()),visId:g,sessionId:(0,a.getCurrentUnixTimestamp)(),visitor_ua:r,visitor_ip:o,event:{props:p,name:n,time:(0,a.getCurrentUnixTimestampInMillis)()}}};return i||(f.d.visitor={props:{vwo_fs_environment:h.SettingsService.Instance.sdkKey}}),f}var R=!1;function L(e,t,n,r){var o;try{var i=S.DebuggerCategoryEnum.RETRY,s=u.Constants.NETWORK_CALL_SUCCESS_WITH_RETRIES,c=(0,E.buildMessage)(d.InfoLogMessagesEnum.NETWORK_CALL_SUCCESS_WITH_RETRIES,{extraData:r,attempts:e.getTotalAttempts(),err:(0,a.getFormattedErrorMessage)(e.getError())}),l=p.LogLevelEnum.INFO.toString();200!==e.getStatusCode()&&(i=S.DebuggerCategoryEnum.NETWORK,s=u.Constants.NETWORK_CALL_FAILURE_AFTER_MAX_RETRIES,c=(0,E.buildMessage)(d.ErrorLogMessagesEnum.NETWORK_CALL_FAILURE_AFTER_MAX_RETRIES,{extraData:r,attempts:e.getTotalAttempts(),err:(0,a.getFormattedErrorMessage)(e.getError())}),l=p.LogLevelEnum.ERROR.toString());var g={cg:i,msg_t:s,msg:c,lt:l};return n&&(g.an=n),(null===(o=null==t?void 0:t.d)||void 0===o?void 0:o.sessionId)?g.sId=t.d.sessionId:g.sId=(0,a.getCurrentUnixTimestamp)(),g}catch(e){return{cg:S.DebuggerCategoryEnum.NETWORK,an:n,msg_t:"NETWORK_CALL_FAILED",msg:(0,E.buildMessage)(d.ErrorLogMessagesEnum.NETWORK_CALL_FAILED,{method:r,err:(0,a.getFormattedErrorMessage)(e)}),lt:p.LogLevelEnum.ERROR.toString(),sId:(0,a.getCurrentUnixTimestamp)()}}}},9025:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,n){function r(e,r,a,s){var u;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=(0,i.default)(r)),16!==(null===(u=r)||void 0===u?void 0:u.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+e.length);if(c.set(r),c.set(e,r.length),c=n(c),c[6]=15&c[6]|t,c[8]=63&c[8]|128,a){s=s||0;for(let e=0;e<16;++e)a[s+e]=c[e];return a}return(0,o.unsafeStringify)(c)}try{r.name=e}catch(e){}return r.DNS=a,r.URL=s,r};var r,o=n(9910),i=(r=n(6792))&&r.__esModule?r:{default:r};const a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=a;const s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=s},9042:(e,t)=>{"use strict";function n(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function r(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){const t=[1518500249,1859775393,2400959708,3395469782],o=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const i=e.length/4+2,a=Math.ceil(i/16),s=new Array(a);for(let t=0;t<a;++t){const n=new Uint32Array(16);for(let r=0;r<16;++r)n[r]=e[64*t+4*r]<<24|e[64*t+4*r+1]<<16|e[64*t+4*r+2]<<8|e[64*t+4*r+3];s[t]=n}s[a-1][14]=8*(e.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<a;++e){const i=new Uint32Array(80);for(let t=0;t<16;++t)i[t]=s[e][t];for(let e=16;e<80;++e)i[e]=r(i[e-3]^i[e-8]^i[e-14]^i[e-16],1);let a=o[0],u=o[1],c=o[2],l=o[3],g=o[4];for(let e=0;e<80;++e){const o=Math.floor(e/20),s=r(a,5)+n(o,u,c,l)+g+t[o]+i[e]>>>0;g=l,l=c,c=r(u,30)>>>0,u=a,a=s}o[0]=o[0]+a>>>0,o[1]=o[1]+u>>>0,o[2]=o[2]+c>>>0,o[3]=o[3]+l>>>0,o[4]=o[4]+g>>>0}return[o[0]>>24&255,o[0]>>16&255,o[0]>>8&255,255&o[0],o[1]>>24&255,o[1]>>16&255,o[1]>>8&255,255&o[1],o[2]>>24&255,o[2]>>16&255,o[2]>>8&255,255&o[2],o[3]>>24&255,o[3]>>16&255,o[3]>>8&255,255&o[3],o[4]>>24&255,o[4]>>16&255,o[4]>>8&255,255&o[4]]}},9094:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetricModel=void 0;var n=function(){function e(){}return e.prototype.modelFromDictionary=function(e){return this.identifier=e.identifier||e.key,this.id=e.i||e.id,this.type=e.t||e.type,this},e.prototype.getId=function(){return this.id},e.prototype.getIdentifier=function(){return this.identifier},e.prototype.getType=function(){return this.type},e}();t.MetricModel=n},9181:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setVariationAllocation=function(e){if(e.getType()===o.CampaignTypeEnum.ROLLOUT||e.getType()===o.CampaignTypeEnum.PERSONALIZE)!function(e){for(var t=0;t<e.getVariations().length;t++){var n=e.getVariations()[t],r=100*e.getVariations()[t].getWeight();n.setStartRange(1),n.setEndRange(r),s.LogManager.Instance.info((0,u.buildMessage)(i.InfoLogMessagesEnum.VARIATION_RANGE_ALLOCATION,{variationKey:n.getKey(),campaignKey:e.getKey(),variationWeight:n.getWeight(),startRange:1,endRange:r}))}}(e);else{var t=0;e.getVariations().forEach((function(n){var r=c(n,t);t+=r,s.LogManager.Instance.info((0,u.buildMessage)(i.InfoLogMessagesEnum.VARIATION_RANGE_ALLOCATION,{variationKey:n.getKey(),campaignKey:e.getKey(),variationWeight:n.getWeight(),startRange:n.getStartRangeVariation(),endRange:n.getEndRangeVariation()}))}))}},t.assignRangeValues=c,t.scaleVariationWeights=function(e){var t=e.reduce((function(e,t){return e+t.weight}),0);if(t)e.forEach((function(e){return e.weight=e.weight/t*100}));else{var n=100/e.length;e.forEach((function(e){return e.weight=n}))}},t.getBucketingSeed=function(e,t,n){if(n)return"".concat(n,"_").concat(e);var r=t.getType()===o.CampaignTypeEnum.ROLLOUT||t.getType()===o.CampaignTypeEnum.PERSONALIZE?t.getVariations()[0].getSalt():t.getSalt();return r?"".concat(r,"_").concat(e):"".concat(t.getId(),"_").concat(e)},t.getVariationFromCampaignKey=function(e,t,n){var r=e.getCampaigns().find((function(e){return e.getKey()===t}));if(r){var o=r.getVariations().find((function(e){return e.getId()===n}));if(o)return(new a.VariationModel).modelFromDictionary(o)}return null},t.getCampaignKeyFromCampaignId=function(e,t){var n=e.getCampaigns().find((function(e){return e.getId()===t}));return n?n.getKey():null},t.getVariationNameFromCampaignIdAndVariationId=function(e,t,n){var r=e.getCampaigns().find((function(e){return e.getId()===t}));if(r){var o=r.getVariations().find((function(e){return e.getId()===n}));if(o)return o.getKey()}return null},t.getCampaignTypeFromCampaignId=function(e,t){var n=e.getCampaigns().find((function(e){return e.getId()===t}));return n?n.getType():null},t.setCampaignAllocation=function(e){for(var t=0,n=0;t<e.length;t++)n+=l(e[t],n)},t.getGroupDetailsIfCampaignPartOfIt=function(e,t,n){void 0===n&&(n=null);var r=t.toString();return null!==n&&(r="".concat(t,"_").concat(n).toString()),e.getCampaignGroups()&&Object.prototype.hasOwnProperty.call(e.getCampaignGroups(),r)?{groupId:e.getCampaignGroups()[r],groupName:e.getGroups()[e.getCampaignGroups()[r]].name}:{}},t.getCampaignsByGroupId=function(e,t){var n=e.getGroups()[t];return n?n.campaigns:[]},t.getFeatureKeysFromCampaignIds=function(e,t){for(var n=[],r=function(t){var r=t.split("_").map(Number),o=r[0],i=r[1];e.getFeatures().forEach((function(e){-1===n.indexOf(e.getKey())&&e.getRules().forEach((function(t){t.getCampaignId()===o&&(null!=i?t.getVariationId()===i&&n.push(e.getKey()):n.push(e.getKey()))}))}))},o=0,i=t;o<i.length;o++)r(i[o]);return n},t.getCampaignIdsFromFeatureKey=function(e,t){var n=[];return e.getFeatures().forEach((function(e){e.getKey()===t&&e.getRules().forEach((function(e){n.push(e.getCampaignId())}))})),n},t.assignRangeValuesMEG=l;var r=n(5399),o=n(4273),i=n(7128),a=n(2365),s=n(4580),u=n(8754);function c(e,t){var n=g(e.getWeight());return n?(e.setStartRange(t+1),e.setEndRange(t+n)):(e.setStartRange(-1),e.setEndRange(-1)),n}function l(e,t){var n=g(e.weight);return n?(e.startRangeVariation=t+1,e.endRangeVariation=t+n):(e.startRangeVariation=-1,e.endRangeVariation=-1),n}function g(e){if(!e||0===e)return 0;var t=Math.ceil(100*e);return Math.min(t,r.Constants.MAX_TRAFFIC_VALUE)}},9217:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.StatusEnum=void 0,function(e){e.PASSED="passed",e.FAILED="failed"}(n||(t.StatusEnum=n={}))},9315:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.BatchEventsDispatcher=void 0;var i=n(6710),a=n(8694),s=n(6710),u=n(8202),c=n(9528),l=n(470),g=n(4580),d=n(8754),p=n(7128),f=n(1359),h=n(4782),v=n(8667),E=n(5399),y=n(8205),m=n(8925),I=n(9693),_=function(){function e(){}return e.dispatch=function(e,t,n){return r(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,this.sendPostApiRequest(n,e,t)];case 1:return[2,r.sent()]}}))}))},e.sendPostApiRequest=function(e,t,n){return r(this,void 0,void 0,(function(){var r,d,p,f,I,_,S,T,b,A,O,R=this;return o(this,(function(o){r=new h.Deferred,d=s.NetworkManager.Instance,p=d.getRetryConfig(),(f={}).Authorization=l.SettingsService.Instance.sdkKey,I=a.UrlUtil.getBaseUrl(),I=a.UrlUtil.getUpdatedBaseUrl(I),_=new i.RequestModel(I,u.HttpMethodEnum.POST,c.UrlEnum.BATCH_EVENTS,e,t,f,l.SettingsService.Instance.protocol,l.SettingsService.Instance.port,p),S=this.extractEventCounts(t),T=S.variationShownCount,b=S.setAttributeCount,A=S.customEventCount,O="".concat(E.Constants.BATCH_EVENTS," having "),T>0&&(O+="getFlag events: ".concat(T,", ")),A>0&&(O+="conversion events: ".concat(A,", ")),b>0&&(O+="setAttribute events: ".concat(b,", "));try{return s.NetworkManager.Instance.post(_).then((function(o){if(o.getTotalAttempts()>0){var i=(0,m.createNetWorkAndRetryDebugEvent)(o,"",E.Constants.BATCH_EVENTS,O);(0,y.sendDebugEventToVWO)(i)}var a=R.handleBatchResponse(c.UrlEnum.BATCH_EVENTS,t,e,null,o,n);r.resolve(a)})).catch((function(o){var i=(0,m.createNetWorkAndRetryDebugEvent)(o,"",E.Constants.BATCH_EVENTS,O);(0,y.sendDebugEventToVWO)(i);var a=R.handleBatchResponse(c.UrlEnum.BATCH_EVENTS,t,e,null,o,n);r.resolve(a)})),[2,r.promise]}catch(e){return g.LogManager.Instance.errorLog("EXECUTION_FAILED",{apiName:E.Constants.BATCH_EVENTS,err:(0,v.getFormattedErrorMessage)(e)},{an:E.Constants.BATCH_EVENTS}),r.resolve({status:"error",events:t}),[2,r.promise]}return[2]}))}))},e.handleBatchResponse=function(e,t,n,r,o,i){var a=t.ev.length,s=n.a,c=r||(null==o?void 0:o.getError());if(!c||c instanceof Error||((0,f.isString)(c)?c=new Error(c):c instanceof Object&&(c=new Error(JSON.stringify(c)))),c)return g.LogManager.Instance.info((0,d.buildMessage)(p.InfoLogMessagesEnum.IMPRESSION_BATCH_FAILED)),g.LogManager.Instance.errorLog("NETWORK_CALL_FAILED",{method:u.HttpMethodEnum.POST,err:c.message},{},!1),i(c,t),{status:"error",events:t};var l=null==o?void 0:o.getStatusCode();return 200===l?(g.LogManager.Instance.info((0,d.buildMessage)(p.InfoLogMessagesEnum.IMPRESSION_BATCH_SUCCESS,{accountId:s,endPoint:e})),i(null,t),{status:"success",events:t}):413===l?(g.LogManager.Instance.errorLog("CONFIG_BATCH_EVENT_LIMIT_EXCEEDED",{accountId:s,endPoint:e,eventsPerRequest:a},{},!1),g.LogManager.Instance.errorLog("NETWORK_CALL_FAILED",{method:u.HttpMethodEnum.POST,err:c.message},{},!1),i(c,t),{status:"error",events:t}):(g.LogManager.Instance.errorLog("IMPRESSION_BATCH_FAILED",{},{},!1),g.LogManager.Instance.errorLog("NETWORK_CALL_FAILED",{method:u.HttpMethodEnum.POST,err:c.message},{},!1),i(c,t),{status:"error",events:t})},e.extractEventCounts=function(e){for(var t,n,r,o={variationShownCount:0,setAttributeCount:0,customEventCount:0},i=new Set(Object.values(I.EventEnum)),a=0,s=null!==(t=null==e?void 0:e.ev)&&void 0!==t?t:[];a<s.length;a++){var u=s[a],c=null===(r=null===(n=null==u?void 0:u.d)||void 0===n?void 0:n.event)||void 0===r?void 0:r.name;c&&(c!==I.EventEnum.VWO_VARIATION_SHOWN?c!==I.EventEnum.VWO_SYNC_VISITOR_PROP?i.has(c)||(o.customEventCount+=1):o.setAttributeCount+=1:o.variationShownCount+=1)}return o},e}();t.BatchEventsDispatcher=_,t.default=_},9378:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImpactCapmaignModel=void 0;var n=function(){function e(){}return e.prototype.modelFromDictionary=function(e){return this.type=e.type,this.campaignId=e.campaignId,this},e.prototype.getCampaignId=function(){return this.campaignId},e.prototype.getType=function(){return this.type},e}();t.ImpactCapmaignModel=n},9401:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=void 0;var r=n(2780);Object.defineProperty(t,"Storage",{enumerable:!0,get:function(){return r.Storage}})},9426:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.VWOBuilder=void 0;var a=n(4580),s=n(6710),u=n(4986),c=n(9401),l=n(1522),g=n(470),d=n(7128),p=n(1359),f=n(8667),h=n(8754),v=n(4782),E=n(362),y=n(1720),m=n(4140),I=n(9315),_=n(7241),S=n(5399),T=n(4237),b=n(8092),A=function(){function e(e){this.originalSettings={},this.isValidPollIntervalPassedFromInit=!1,this.isSettingsValid=!1,this.settingsFetchTime=void 0,this.options=e}return e.prototype.setNetworkManager=function(){var e,t,n,r,o,i=s.NetworkManager.Instance;return i.attachClient(null===(t=null===(e=this.options)||void 0===e?void 0:e.network)||void 0===t?void 0:t.client,null===(n=this.options)||void 0===n?void 0:n.retryConfig,!!(null===(r=this.options)||void 0===r?void 0:r.shouldWaitForTrackingCalls)),a.LogManager.Instance.debug((0,h.buildMessage)(d.DebugLogMessagesEnum.SERVICE_INITIALIZED,{service:"Network Layer"})),i.getConfig().setDevelopmentMode(null===(o=this.options)||void 0===o?void 0:o.isDevelopmentMode),this},e.prototype.initBatching=function(){var e,t=this;if(this.options.edgeConfig&&Object.keys(null===(e=this.options)||void 0===e?void 0:e.edgeConfig).length>0){var n=(new b.EdgeConfigModel).modelFromDictionary(this.options.edgeConfig);this.options.batchEventData={eventsPerRequest:n.getMaxEventsToBatch(),isEdgeEnvironment:!0}}if(this.options.batchEventData){if(this.settingFileManager.isGatewayServiceProvided)return a.LogManager.Instance.info((0,h.buildMessage)(d.InfoLogMessagesEnum.GATEWAY_AND_BATCH_EVENTS_CONFIG_MISMATCH)),this;if((!(0,p.isNumber)(this.options.batchEventData.eventsPerRequest)||this.options.batchEventData.eventsPerRequest<=0)&&(!(0,p.isNumber)(this.options.batchEventData.requestTimeInterval)||this.options.batchEventData.requestTimeInterval<=0))return a.LogManager.Instance.errorLog("INVALID_BATCH_EVENTS_CONFIG",{},{an:T.ApiEnum.INIT}),this;this.batchEventsQueue=new m.BatchEventsQueue(Object.assign({},this.options.batchEventData,{dispatcher:function(e,n){return I.BatchEventsDispatcher.dispatch({ev:e},n,Object.assign({},{a:t.options.accountId,env:t.options.sdkKey,sn:S.Constants.SDK_NAME,sv:S.Constants.SDK_VERSION}))}})),this.batchEventsQueue.flushAndClearTimer.bind(this.batchEventsQueue)}return this},e.prototype.setSegmentation=function(){var e;return u.SegmentationManager.Instance.attachEvaluator(null===(e=this.options)||void 0===e?void 0:e.segmentation),a.LogManager.Instance.debug((0,h.buildMessage)(d.DebugLogMessagesEnum.SERVICE_INITIALIZED,{service:"Segmentation Evaluator"})),this},e.prototype.fetchSettings=function(e){var t=this,n=new v.Deferred;return this.isSettingsFetchInProgress?(n.resolve(this.originalSettings),n.promise):(this.isSettingsFetchInProgress=!0,this.settingFileManager.getSettings(e).then((function(r){t.isSettingsValid=t.settingFileManager.isSettingsValid,t.settingsFetchTime=t.settingFileManager.settingsFetchTime,e||(t.originalSettings=r),t.isSettingsFetchInProgress=!1,n.resolve(r)})),n.promise)},e.prototype.getSettings=function(e){var t=new v.Deferred;try{!e&&this.settings?(a.LogManager.Instance.info("Using already fetched and cached settings"),t.resolve(this.settings)):this.fetchSettings(e).then((function(e){t.resolve(e)}))}catch(n){a.LogManager.Instance.errorLog("ERROR_FETCHING_SETTINGS",{err:(0,f.getFormattedErrorMessage)(n)},{an:e?S.Constants.POLLING:T.ApiEnum.INIT},!1),t.resolve({})}return t.promise},e.prototype.setStorage=function(){var e,t,o,i;if(this.options.storage)this.storage=c.Storage.Instance.attachConnector(this.options.storage);else if("undefined"!=typeof window&&window.localStorage){var s=n(1274).BrowserStorageConnector;this.storage=c.Storage.Instance.attachConnector(new s(r(r({},this.options.clientStorage),{alwaysUseCachedSettings:null===(e=this.options.clientStorage)||void 0===e?void 0:e.alwaysUseCachedSettings,ttl:null===(t=this.options.clientStorage)||void 0===t?void 0:t.ttl}))),a.LogManager.Instance.debug((0,h.buildMessage)(d.DebugLogMessagesEnum.SERVICE_INITIALIZED,{service:(null===(i=null===(o=this.options)||void 0===o?void 0:o.clientStorage)||void 0===i?void 0:i.provider)===sessionStorage?"Session Storage":"Local Storage"}))}else this.storage=null;return this},e.prototype.setSettingsService=function(){return this.settingFileManager=new g.SettingsService(this.options),this},e.prototype.setLogger=function(){return this.logManager=new a.LogManager(this.options.logger||{}),a.LogManager.Instance.debug((0,h.buildMessage)(d.DebugLogMessagesEnum.SERVICE_INITIALIZED,{service:"Logger"})),this},e.prototype.getRandomUserId=function(){var e="getRandomUserId";try{return a.LogManager.Instance.debug((0,h.buildMessage)(d.DebugLogMessagesEnum.API_CALLED,{apiName:e})),(0,y.getRandomUUID)(this.options.sdkKey)}catch(t){a.LogManager.Instance.errorLog("EXECUTION_FAILED",{apiName:e,err:(0,f.getFormattedErrorMessage)(t)})}},e.prototype.initPolling=function(){var e=this.options.pollInterval;return null!=e&&(0,p.isNumber)(e)&&e>=1e3?(this.isValidPollIntervalPassedFromInit=!0,this.checkAndPoll()):null!=e&&a.LogManager.Instance.errorLog("INVALID_POLLING_CONFIGURATION",{key:"pollInterval",correctType:"number >= 1000"},{an:T.ApiEnum.INIT}),this},e.prototype.initUsageStats=function(){return this.options.isUsageStatsDisabled||_.UsageStatsUtil.getInstance().setUsageStats(this.options),this},e.prototype.build=function(e){return this.vwoInstance=new l.VWOClient(e,this.options),this.updatePollIntervalAndCheckAndPoll(e,!0),this.vwoInstance},e.prototype.checkAndPoll=function(){var e,t=this,n=function(){return o(t,void 0,void 0,(function(){var e,t,r,o,s;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,3,4]),[4,this.getSettings(!0)];case 1:return(e=i.sent())&&Object.keys(e).length>0&&JSON.stringify(e)!==JSON.stringify(this.originalSettings)?(this.originalSettings=e,t=(0,f.cloneObject)(e),a.LogManager.Instance.info(d.InfoLogMessagesEnum.POLLING_SET_SETTINGS),(0,E.setSettingsAndAddCampaignsToRules)(t,this.vwoInstance),this.updatePollIntervalAndCheckAndPoll(e,!1)):e&&a.LogManager.Instance.info(d.InfoLogMessagesEnum.POLLING_NO_CHANGE_IN_SETTINGS),[3,4];case 2:return r=i.sent(),a.LogManager.Instance.errorLog("ERROR_FETCHING_SETTINGS_WITH_POLLING",{err:(0,f.getFormattedErrorMessage)(r)},{an:S.Constants.POLLING}),[3,4];case 3:return o=null!==(s=this.options.pollInterval)&&void 0!==s?s:S.Constants.POLLING_INTERVAL,setTimeout(n,o),[7];case 4:return[2]}}))}))},r=null!==(e=this.options.pollInterval)&&void 0!==e?e:S.Constants.POLLING_INTERVAL;setTimeout(n,r)},e.prototype.updatePollIntervalAndCheckAndPoll=function(e,t){var n;if(!this.isValidPollIntervalPassedFromInit){var r=null!==(n=null==e?void 0:e.pollInterval)&&void 0!==n?n:S.Constants.POLLING_INTERVAL;a.LogManager.Instance.debug((0,h.buildMessage)(d.DebugLogMessagesEnum.USING_POLL_INTERVAL_FROM_SETTINGS,{source:(null==e?void 0:e.pollInterval)?"settings":"default",pollInterval:r.toString()})),this.options.pollInterval=r}t&&!this.isValidPollIntervalPassedFromInit&&this.checkAndPoll()},e}();t.VWOBuilder=A},9528:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.UrlEnum=void 0,function(e){e.EVENTS="/events/t",e.ATTRIBUTE_CHECK="/check-attribute",e.GET_USER_DATA="/get-user-details",e.BATCH_EVENTS="/server-side/batch-events-v2",e.SET_ALIAS="/user-alias/setUserAlias",e.GET_ALIAS="/user-alias/getAliasUserId"}(n||(t.UrlEnum=n={}))},9693:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.EventEnum=void 0,function(e){e.VWO_VARIATION_SHOWN="vwo_variationShown",e.VWO_SYNC_VISITOR_PROP="vwo_syncVisitorProp",e.VWO_LOG_EVENT="vwo_log",e.VWO_INIT_CALLED="vwo_fmeSdkInit",e.VWO_USAGE_STATS="vwo_sdkUsageStats",e.VWO_DEBUGGER_EVENT="vwo_sdkDebug"}(n||(t.EventEnum=n={}))},9709:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.VWO=void 0,t.init=function(e){return r(this,void 0,void 0,(function(){var t,n,i,p,f,E,y=this;return o(this,(function(m){t=d.ApiEnum.INIT,n=(new Date).toISOString();try{return i="[ERROR]: VWO-SDK ".concat(n," "),(0,a.isObject)(e)||(E=i+(0,l.buildMessage)(c.ErrorLogMessagesEnum.INVALID_OPTIONS),console.error(E)),(null==e?void 0:e.sdkKey)&&(0,a.isString)(null==e?void 0:e.sdkKey)||(E=i+(0,l.buildMessage)(c.ErrorLogMessagesEnum.INVALID_SDK_KEY_IN_OPTIONS),console.error(E)),e.accountId||(E=i+(0,l.buildMessage)(c.ErrorLogMessagesEnum.INVALID_ACCOUNT_ID_IN_OPTIONS),console.error(E)),e.isAliasingEnabled&&!e.gatewayService&&(E=i+(0,l.buildMessage)(c.ErrorLogMessagesEnum.INVALID_GATEWAY_URL,{date:n}),console.error(E)),e.platform=g.PlatformEnum.CLIENT,p=Date.now(),f=new h(e),v={vwoInitDeferred:new s.Deferred,isSettingsFetched:!1,instance:null},[2,f.then((function(e){return r(y,void 0,void 0,(function(){var t,n,r,i,a,s,c;return o(this,(function(o){switch(o.label){case 0:return t=Date.now()-p,!e.isSettingsValid||(null===(i=null===(r=e.originalSettings)||void 0===r?void 0:r.sdkMetaInfo)||void 0===i?void 0:i.wasInitializedEarlier)?[3,3]:(null===(a=e.options)||void 0===a?void 0:a.shouldWaitForTrackingCalls)?[4,(0,u.sendSdkInitEvent)(e.settingsFetchTime,t)]:[3,2];case 1:return o.sent(),[3,3];case 2:(0,u.sendSdkInitEvent)(e.settingsFetchTime,t),o.label=3;case 3:return(n=null===(s=e.originalSettings)||void 0===s?void 0:s.usageStatsAccountId)?(null===(c=e.options)||void 0===c?void 0:c.shouldWaitForTrackingCalls)?[4,(0,u.sendSDKUsageStatsEvent)(n)]:[3,5]:[3,6];case 4:return o.sent(),[3,6];case 5:(0,u.sendSDKUsageStatsEvent)(n),o.label=6;case 6:return v.isSettingsFetched=!0,v.instance=e,v.vwoInitDeferred.resolve(e),[2,e]}}))}))}))]}catch(e){E=(0,l.buildMessage)(c.ErrorLogMessagesEnum.EXECUTION_FAILED,{apiName:t,err:e}),console.info("[INFO]: VWO-SDK ".concat((new Date).toISOString()," ").concat(E))}return[2]}))}))},t.onInit=function(){return r(this,void 0,void 0,(function(){var e,t,n;return o(this,(function(r){e=d.ApiEnum.ON_INIT;try{return v.vwoInitDeferred=new s.Deferred,t=(new Date).toISOString(),v.isSettingsFetched?(n=(0,l.buildMessage)(c.InfoLogMessagesEnum.ON_INIT_ALREADY_RESOLVED,{date:t,apiName:e}),console.info(n),v.vwoInitDeferred.resolve(v.instance)):setTimeout((function(){if(!v.isSettingsFetched){var e=(0,l.buildMessage)(c.InfoLogMessagesEnum.ON_INIT_SETTINGS_FAILED,{date:t});console.error(e),v.vwoInitDeferred.reject(new Error("VWO settings could not be fetched"))}}),5e3),[2,v.vwoInitDeferred.promise]}catch(t){n=(0,l.buildMessage)(c.ErrorLogMessagesEnum.EXECUTION_FAILED,{apiName:e,err:t}),console.info("[INFO]: VWO-SDK ".concat((new Date).toISOString()," ").concat(n))}return[2]}))}))};var i=n(9426),a=n(1359),s=n(4782),u=n(1114),c=n(7128),l=n(8754),g=n(5520),d=n(4237),p=n(4580),f=n(9846),h=function(){function e(t){return e.setInstance(t)}return e.setInstance=function(e){var t,n=this,r=null==e?void 0:e.vwoBuilder;return this.vwoBuilder=r||new i.VWOBuilder(e),this.instance=this.vwoBuilder.setLogger().setSettingsService().setStorage().setNetworkManager().setSegmentation().initPolling().initBatching().initUsageStats(),(null==e?void 0:e.settings)?(new f.SettingsSchema).isSettingsValid(e.settings)?(p.LogManager.Instance.info(c.InfoLogMessagesEnum.SETTINGS_FETCH_SUCCESS),(t=this.vwoBuilder.build(e.settings)).isSettingsValid=!0,t.settingsFetchTime=0,Promise.resolve(t)):(p.LogManager.Instance.errorLog("INVALID_SETTINGS_SCHEMA",{},{an:d.ApiEnum.INIT}),(t=this.vwoBuilder.build({})).isSettingsValid=!1,t.settingsFetchTime=0,Promise.resolve(t)):this.vwoBuilder.getSettings().then((function(e){var t=n.vwoBuilder.build(e);return t.isSettingsValid=n.vwoBuilder.isSettingsValid,t.settingsFetchTime=n.vwoBuilder.settingsFetchTime,n.settings=e,t}))},Object.defineProperty(e,"Instance",{get:function(){return this.instance},enumerable:!1,configurable:!0}),e}();t.VWO=h;var v={}},9750:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentOperandEvaluator=void 0;var i=n(3769),a=n(6905),s=n(6947),u=n(4076),c=n(1359),l=n(2898),g=n(9528),d=n(4580),p=n(4237),f=n(8667),h=function(){function e(){}return e.prototype.evaluateCustomVariableDSL=function(e,t,n){return r(this,void 0,void 0,(function(){var r,a,s,u,c,h,v,E,y,m,I,_,S,T,b,A,O;return o(this,(function(o){switch(o.label){case 0:if(r=(0,i.getKeyValue)(e),a=r.key,s=r.value,u=a,c=s,!Object.prototype.hasOwnProperty.call(t,u))return[2,!1];if(!c.includes("inlist"))return[3,5];if(h=/inlist\(([^)]+)\)/,!(v=c.match(h))||v.length<2)return d.LogManager.Instance.errorLog("INVALID_ATTRIBUTE_LIST_FORMAT",{},{an:p.ApiEnum.GET_FLAG,uuid:n.getUuid(),sId:n.getSessionId()}),[2,!1];S=t[u],E=this.preProcessTagValue(S),y=v[1],m={attribute:E,listId:y},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(0,l.getFromGatewayService)(m,g.UrlEnum.ATTRIBUTE_CHECK,n)];case 2:return(I=o.sent())&&void 0!==I&&"false"!==I&&0!==I.status?[2,I]:[2,!1];case 3:return _=o.sent(),d.LogManager.Instance.errorLog("ERROR_FETCHING_DATA_FROM_GATEWAY",{err:(0,f.getFormattedErrorMessage)(_)},{an:p.ApiEnum.GET_FLAG,uuid:n.getUuid(),sId:n.getSessionId()}),[2,!1];case 4:return[3,6];case 5:return S=t[u],S=this.preProcessTagValue(S),T=this.preProcessOperandValue(c),b=T.operandType,A=T.operandValue,O=this.processValues(A,S),S=O.tagValue,[2,this.extractResult(b,O.operandValue,S)];case 6:return[2]}}))}))},e.prototype.evaluateUserDSL=function(e,t){for(var n=e.split(","),r=0;r<n.length;r++)if(n[r].trim()==t._vwoUserId)return!0;return!1},e.prototype.evaluateUserAgentDSL=function(e,t){var n=e;if(!t.getUserAgent()||void 0===t.getUserAgent())return d.LogManager.Instance.errorLog("INVALID_USER_AGENT_IN_CONTEXT_FOR_PRE_SEGMENTATION",{},{an:p.ApiEnum.GET_FLAG,uuid:t.getUuid(),sId:t.getSessionId()}),!1;var r=decodeURIComponent(t.getUserAgent()),o=this.preProcessOperandValue(n),i=o.operandType,a=o.operandValue,s=this.processValues(a,r);return r=s.tagValue,this.extractResult(i,s.operandValue,r)},e.prototype.preProcessTagValue=function(e){return void 0===e&&(e=""),(0,c.isBoolean)(e)&&(e=!!e),null!==e&&(e=e.toString()),e},e.prototype.preProcessOperandValue=function(e){var t,n;if((0,i.matchWithRegex)(e,s.SegmentOperandRegexEnum.LOWER_MATCH))t=a.SegmentOperandValueEnum.LOWER_VALUE,n=this.extractOperandValue(e,s.SegmentOperandRegexEnum.LOWER_MATCH);else if((0,i.matchWithRegex)(e,s.SegmentOperandRegexEnum.WILDCARD_MATCH)){n=this.extractOperandValue(e,s.SegmentOperandRegexEnum.WILDCARD_MATCH);var r=(0,i.matchWithRegex)(n,s.SegmentOperandRegexEnum.STARTING_STAR),o=(0,i.matchWithRegex)(n,s.SegmentOperandRegexEnum.ENDING_STAR);r&&o?t=a.SegmentOperandValueEnum.STARTING_ENDING_STAR_VALUE:r?t=a.SegmentOperandValueEnum.STARTING_STAR_VALUE:o&&(t=a.SegmentOperandValueEnum.ENDING_STAR_VALUE),n=n.replace(new RegExp(s.SegmentOperandRegexEnum.STARTING_STAR),"").replace(new RegExp(s.SegmentOperandRegexEnum.ENDING_STAR),"")}else(0,i.matchWithRegex)(e,s.SegmentOperandRegexEnum.REGEX_MATCH)?(t=a.SegmentOperandValueEnum.REGEX_VALUE,n=this.extractOperandValue(e,s.SegmentOperandRegexEnum.REGEX_MATCH)):(0,i.matchWithRegex)(e,s.SegmentOperandRegexEnum.GREATER_THAN_MATCH)?(t=a.SegmentOperandValueEnum.GREATER_THAN_VALUE,n=this.extractOperandValue(e,s.SegmentOperandRegexEnum.GREATER_THAN_MATCH)):(0,i.matchWithRegex)(e,s.SegmentOperandRegexEnum.GREATER_THAN_EQUAL_TO_MATCH)?(t=a.SegmentOperandValueEnum.GREATER_THAN_EQUAL_TO_VALUE,n=this.extractOperandValue(e,s.SegmentOperandRegexEnum.GREATER_THAN_EQUAL_TO_MATCH)):(0,i.matchWithRegex)(e,s.SegmentOperandRegexEnum.LESS_THAN_MATCH)?(t=a.SegmentOperandValueEnum.LESS_THAN_VALUE,n=this.extractOperandValue(e,s.SegmentOperandRegexEnum.LESS_THAN_MATCH)):(0,i.matchWithRegex)(e,s.SegmentOperandRegexEnum.LESS_THAN_EQUAL_TO_MATCH)?(t=a.SegmentOperandValueEnum.LESS_THAN_EQUAL_TO_VALUE,n=this.extractOperandValue(e,s.SegmentOperandRegexEnum.LESS_THAN_EQUAL_TO_MATCH)):(t=a.SegmentOperandValueEnum.EQUAL_VALUE,n=e);return{operandType:t,operandValue:n}},e.prototype.extractOperandValue=function(e,t){return(0,i.matchWithRegex)(e,t)&&(0,i.matchWithRegex)(e,t)[1]},e.prototype.processValues=function(t,n,r){if(void 0===r&&(r=void 0),r===u.SegmentOperatorValueEnum.IP||r===u.SegmentOperatorValueEnum.BROWSER_VERSION||r===u.SegmentOperatorValueEnum.OS_VERSION)return{operandValue:t,tagValue:n};if(e.NON_NUMERIC_PATTERN.test(n))return{operandValue:t,tagValue:n};var o=parseFloat(t),i=parseFloat(n);return o&&i?{operandValue:o.toString(),tagValue:i.toString()}:{operandValue:t,tagValue:n}},e.prototype.extractResult=function(e,t,n){var r=!1;if(null===n)return!1;var o=String(t),i=String(n);switch(e){case a.SegmentOperandValueEnum.LOWER_VALUE:r=o.toLowerCase()===i.toLowerCase();break;case a.SegmentOperandValueEnum.STARTING_ENDING_STAR_VALUE:r=-1!==i.indexOf(o);break;case a.SegmentOperandValueEnum.STARTING_STAR_VALUE:r=i.endsWith(o);break;case a.SegmentOperandValueEnum.ENDING_STAR_VALUE:r=i.startsWith(o);break;case a.SegmentOperandValueEnum.REGEX_VALUE:try{r=null!==new RegExp(o).exec(i)}catch(e){r=!1}break;case a.SegmentOperandValueEnum.GREATER_THAN_VALUE:r=this.compareVersions(i,o)>0;break;case a.SegmentOperandValueEnum.GREATER_THAN_EQUAL_TO_VALUE:r=this.compareVersions(i,o)>=0;break;case a.SegmentOperandValueEnum.LESS_THAN_VALUE:r=this.compareVersions(i,o)<0;break;case a.SegmentOperandValueEnum.LESS_THAN_EQUAL_TO_VALUE:r=this.compareVersions(i,o)<=0;break;default:r=this.isVersionString(i)&&this.isVersionString(o)?0===this.compareVersions(i,o):i===o}return r},e.prototype.evaluateStringOperandDSL=function(e,t,n){var r=String(e),o=this.getTagValueForOperandType(t,n);if(null===o)return this.logMissingContextError(n),!1;var i=this.preProcessOperandValue(r),a=this.processValues(i.operandValue,o,n),s=a.tagValue;return this.extractResult(i.operandType,String(a.operandValue).trim().replace(/"/g,""),s)},e.prototype.getTagValueForOperandType=function(e,t){return t===u.SegmentOperatorValueEnum.IP?e.getIpAddress()||null:t===u.SegmentOperatorValueEnum.BROWSER_VERSION?this.getBrowserVersionFromContext(e):this.getOsVersionFromContext(e)},e.prototype.getBrowserVersionFromContext=function(e){var t,n=null===(t=e.getVwo())||void 0===t?void 0:t.getUaInfo();return n&&"object"==typeof n&&0!==Object.keys(n).length&&"browser_version"in n&&null!==n.browser_version?String(n.browser_version):null},e.prototype.getOsVersionFromContext=function(e){var t,n=null===(t=e.getVwo())||void 0===t?void 0:t.getUaInfo();return n&&"object"==typeof n&&0!==Object.keys(n).length&&"os_version"in n&&null!==n.os_version?String(n.os_version):null},e.prototype.logMissingContextError=function(e){e===u.SegmentOperatorValueEnum.IP?d.LogManager.Instance.info("To evaluate IP segmentation, please provide ipAddress in context"):e===u.SegmentOperatorValueEnum.BROWSER_VERSION?d.LogManager.Instance.info("To evaluate browser version segmentation, please provide userAgent in context"):d.LogManager.Instance.info("To evaluate OS version segmentation, please provide userAgent in context")},e.prototype.isVersionString=function(e){return/^(\d+\.)*\d+$/.test(e)},e.prototype.compareVersions=function(e,t){for(var n=e.split(".").map((function(e){return e.match(/^\d+$/)?parseInt(e,10):0})),r=t.split(".").map((function(e){return e.match(/^\d+$/)?parseInt(e,10):0})),o=Math.max(n.length,r.length),i=0;i<o;i++){var a=i<n.length?n[i]:0,s=i<r.length?r[i]:0;if(a<s)return-1;if(a>s)return 1}return 0},e.NON_NUMERIC_PATTERN=/[^0-9.]/,e}();t.SegmentOperandEvaluator=h},9752:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextModel=void 0;var r=n(1880),o=n(1720),i=n(470),a=n(8667),s=function(){function e(){}return e.prototype.modelFromDictionary=function(e){return this.id=e.id,this.userAgent=e.userAgent,this.ipAddress=e.ipAddress,"undefined"==typeof XMLHttpRequest||e.userAgent||(this.userAgent=navigator.userAgent),(null==e?void 0:e.customVariables)&&(this.customVariables=e.customVariables),(null==e?void 0:e.variationTargetingVariables)&&(this.variationTargetingVariables=e.variationTargetingVariables),(null==e?void 0:e._vwo)&&(this._vwo=(new r.ContextVWOModel).modelFromDictionary(e._vwo)),(null==e?void 0:e.postSegmentationVariables)&&(this.postSegmentationVariables=e.postSegmentationVariables),this._vwo_uuid=(0,o.getUUID)(this.id.toString(),i.SettingsService.Instance.accountId.toString()),this._vwo_sessionId=(0,a.getCurrentUnixTimestamp)(),this},e.prototype.getId=function(){var e;return null===(e=this.id)||void 0===e?void 0:e.toString()},e.prototype.getUserAgent=function(){return this.userAgent},e.prototype.getIpAddress=function(){return this.ipAddress},e.prototype.getCustomVariables=function(){return this.customVariables},e.prototype.setCustomVariables=function(e){this.customVariables=e},e.prototype.getVariationTargetingVariables=function(){return this.variationTargetingVariables},e.prototype.setVariationTargetingVariables=function(e){this.variationTargetingVariables=e},e.prototype.getVwo=function(){return this._vwo},e.prototype.setVwo=function(e){this._vwo=e},e.prototype.getPostSegmentationVariables=function(){return this.postSegmentationVariables},e.prototype.setPostSegmentationVariables=function(e){this.postSegmentationVariables=e},e.prototype.getUuid=function(){return this._vwo_uuid},e.prototype.getSessionId=function(){return this._vwo_sessionId},e}();t.ContextModel=s},9846:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsSchema=void 0;var r=n(3185),o=function(){function e(){this.initializeSchemas()}return e.prototype.initializeSchemas=function(){this.campaignMetricSchema=(0,r.type)({id:(0,r.union)([(0,r.number)(),(0,r.string)()]),type:(0,r.string)(),identifier:(0,r.string)(),mca:(0,r.optional)((0,r.union)([(0,r.number)(),(0,r.string)()])),hasProps:(0,r.optional)((0,r.boolean)()),revenueProp:(0,r.optional)((0,r.string)())}),this.variableObjectSchema=(0,r.type)({id:(0,r.union)([(0,r.number)(),(0,r.string)()]),type:(0,r.string)(),key:(0,r.string)(),value:(0,r.union)([(0,r.number)(),(0,r.string)(),(0,r.boolean)(),(0,r.object)()])}),this.campaignVariationSchema=(0,r.type)({id:(0,r.union)([(0,r.number)(),(0,r.string)()]),name:(0,r.string)(),weight:(0,r.union)([(0,r.number)(),(0,r.string)()]),segments:(0,r.optional)((0,r.object)()),variables:(0,r.optional)((0,r.array)(this.variableObjectSchema)),startRangeVariation:(0,r.optional)((0,r.number)()),endRangeVariation:(0,r.optional)((0,r.number)()),salt:(0,r.optional)((0,r.string)())}),this.campaignObjectSchema=(0,r.type)({id:(0,r.union)([(0,r.number)(),(0,r.string)()]),type:(0,r.string)(),key:(0,r.string)(),percentTraffic:(0,r.optional)((0,r.number)()),status:(0,r.string)(),variations:(0,r.array)(this.campaignVariationSchema),segments:(0,r.object)(),isForcedVariationEnabled:(0,r.optional)((0,r.boolean)()),isAlwaysCheckSegment:(0,r.optional)((0,r.boolean)()),name:(0,r.string)(),salt:(0,r.optional)((0,r.string)())}),this.ruleSchema=(0,r.type)({type:(0,r.string)(),ruleKey:(0,r.string)(),campaignId:(0,r.number)(),variationId:(0,r.optional)((0,r.number)())}),this.featureSchema=(0,r.type)({id:(0,r.union)([(0,r.number)(),(0,r.string)()]),key:(0,r.string)(),status:(0,r.string)(),name:(0,r.string)(),type:(0,r.string)(),metrics:(0,r.array)(this.campaignMetricSchema),impactCampaign:(0,r.optional)((0,r.object)()),rules:(0,r.optional)((0,r.array)(this.ruleSchema)),variables:(0,r.optional)((0,r.array)(this.variableObjectSchema))}),this.settingsSchema=(0,r.type)({sdkKey:(0,r.optional)((0,r.string)()),version:(0,r.union)([(0,r.number)(),(0,r.string)()]),accountId:(0,r.union)([(0,r.number)(),(0,r.string)()]),usageStatsAccountId:(0,r.optional)((0,r.number)()),features:(0,r.optional)((0,r.array)(this.featureSchema)),campaigns:(0,r.array)(this.campaignObjectSchema),groups:(0,r.optional)((0,r.object)()),campaignGroups:(0,r.optional)((0,r.object)()),collectionPrefix:(0,r.optional)((0,r.string)()),sdkMetaInfo:(0,r.optional)((0,r.object)({wasInitializedEarlier:(0,r.optional)((0,r.boolean)())})),pollInterval:(0,r.optional)((0,r.number)())})},e.prototype.isSettingsValid=function(e){return!!e&&!(0,r.validate)(e,this.settingsSchema)[0]},e}();t.SettingsSchema=o},9910:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=a;var r,o=(r=n(7037))&&r.__esModule?r:{default:r};const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function a(e,t=0){return i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]}t.default=function(e,t=0){const n=a(e,t);if(!(0,o.default)(n))throw TypeError("Stringified UUID is invalid");return n}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r={};return(()=>{"use strict";var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.getUUID=e.Flag=e.StorageConnector=e.LogLevelEnum=e.onInit=e.init=void 0;var t=n(4940);Object.defineProperty(e,"LogLevelEnum",{enumerable:!0,get:function(){return t.LogLevelEnum}});var o=n(5030);Object.defineProperty(e,"StorageConnector",{enumerable:!0,get:function(){return o.Connector}});var i=n(6612);Object.defineProperty(e,"Flag",{enumerable:!0,get:function(){return i.Flag}});var a=n(1720);Object.defineProperty(e,"getUUID",{enumerable:!0,get:function(){return a.getUUID}});var s=n(9709);Object.defineProperty(e,"init",{enumerable:!0,get:function(){return s.init}}),Object.defineProperty(e,"onInit",{enumerable:!0,get:function(){return s.onInit}})})(),r})()));
//# sourceMappingURL=vwo-fme-javascript-sdk.min.js.map